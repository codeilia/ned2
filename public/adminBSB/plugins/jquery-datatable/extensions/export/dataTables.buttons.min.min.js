/*!
 Buttons for DataTables 1.2.2
 Â©2016 SpryMedia Ltd - datatables.net/license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(b){return a(b,window,document)}):"object"===typeof exports?module.exports=function(c,b){c||(c=window);if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}return a(b,c,c.document)}:a(jQuery,window,document)})(function(k,c,b,e){var h=k.fn.dataTable,r=0,p=0,g=h.ext.buttons,f=function(i,d){!0===d&&(d={});k.isArray(d)&&(d={buttons:d});this.c=k.extend(!0,{},f.defaults,d);d.buttons&&(this.c.buttons=d.buttons);this.s={dt:new h.Api(i),buttons:[],listenKeys:"",namespace:"dtb"+r++};this.dom={container:k("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)};this._constructor()};k.extend(f.prototype,{action:function(i,d){var j=this._nodeToButton(i);if(d===e){return j.conf.action}j.conf.action=d;return this},active:function(i,d){var l=this._nodeToButton(i),j=this.c.dom.button.active,l=k(l.node);if(d===e){return l.hasClass(j)}l.toggleClass(j,d===e?!0:d);return this},add:function(j,i){var o=this.s.buttons;if("string"===typeof i){for(var m=i.split("-"),o=this.s,n=0,l=m.length-1;n<l;n++){o=o.buttons[1*m[n]]}o=o.buttons;i=1*m[m.length-1]}this._expandButton(o,j,!1,i);this._draw();return this},container:function(){return this.dom.container},disable:function(d){d=this._nodeToButton(d);k(d.node).addClass(this.c.dom.button.disabled);return this},destroy:function(){k("body").off("keyup."+this.s.namespace);var i=this.s.buttons.slice(),d,j;d=0;for(j=i.length;d<j;d++){this.remove(i[d].node)}this.dom.container.remove();i=this.s.dt.settings()[0];d=0;for(j=i.length;d<j;d++){if(i.inst===this){i.splice(d,1);break}}return this},enable:function(i,d){if(!1===d){return this.disable(i)}var j=this._nodeToButton(i);k(j.node).removeClass(this.c.dom.button.disabled);return this},name:function(){return this.c.name},node:function(d){d=this._nodeToButton(d);return k(d.node)},remove:function(i){var d=this._nodeToButton(i),m=this._nodeToHost(i),l=this.s.dt;if(d.buttons.length){for(var j=d.buttons.length-1;0<=j;j--){this.remove(d.buttons[j].node)}}d.conf.destroy&&d.conf.destroy.call(l.button(i),l,k(i),d.conf);this._removeKey(d.conf);k(d.node).remove();i=k.inArray(d,m);m.splice(i,1);return this},text:function(i,d){var o=this._nodeToButton(i),n=this.c.dom.collection.buttonLiner,n=o.inCollection&&n&&n.tag?n.tag:this.c.dom.buttonLiner.tag,l=this.s.dt,j=k(o.node),m=function(q){return"function"===typeof q?q(l,j,o.conf):q};if(d===e){return m(o.conf.text)}o.conf.text=d;n?j.children(n).html(m(d)):j.html(m(d));return this},_constructor:function(){var i=this,d=this.s.dt,m=d.settings()[0],l=this.c.buttons;m._buttons||(m._buttons=[]);m._buttons.push({inst:this,name:this.c.name});for(var m=0,j=l.length;m<j;m++){this.add(l[m])}d.on("destroy",function(){i.destroy()});k("body").on("keyup."+this.s.namespace,function(n){if(!b.activeElement||b.activeElement===b.body){var o=String.fromCharCode(n.keyCode).toLowerCase();i.s.listenKeys.toLowerCase().indexOf(o)!==-1&&i._keypress(o,n)}})},_addKey:function(d){d.key&&(this.s.listenKeys+=k.isPlainObject(d.key)?d.key.key:d.key)},_draw:function(i,d){i||(i=this.dom.container,d=this.s.buttons);i.children().detach();for(var l=0,j=d.length;l<j;l++){i.append(d[l].inserter),d[l].buttons&&d[l].buttons.length&&this._draw(d[l].collection,d[l].buttons)}},_expandButton:function(u,t,q,o){for(var m=this.s.dt,l=0,t=!k.isArray(t)?[t]:t,n=0,d=t.length;n<d;n++){var j=this._resolveExtends(t[n]);if(j){if(k.isArray(j)){this._expandButton(u,j,q,o)}else{var i=this._buildButton(j,q);if(i){o!==e?(u.splice(o,0,i),o++):u.push(i);if(i.conf.buttons){var v=this.c.dom.collection;i.collection=k("<"+v.tag+"/>").addClass(v.className);i.conf._collection=i.collection;this._expandButton(i.buttons,i.conf.buttons,!0,o)}j.init&&j.init.call(m.button(i.node),m,k(i.node),j);l++}}}}},_buildButton:function(t,q){var o=this.c.dom.button,n=this.c.dom.buttonLiner,l=this.c.dom.collection,j=this.s.dt,m=function(u){return"function"===typeof u?u(j,i,t):u};q&&l.button&&(o=l.button);q&&l.buttonLiner&&(n=l.buttonLiner);if(t.available&&!t.available(j,t)){return !1}var d=function(v,u,x,w){w.action.call(u.button(x),v,u,x,w);k(u.table().node()).triggerHandler("buttons-action.dt",[u.button(x),u,x,w])},i=k("<"+o.tag+"/>").addClass(o.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(u){u.preventDefault();!i.hasClass(o.disabled)&&t.action&&d(u,j,i,t);i.blur()}).on("keyup.dtb",function(u){u.keyCode===13&&!i.hasClass(o.disabled)&&t.action&&d(u,j,i,t)});"a"===o.tag.toLowerCase()&&i.attr("href","#");n.tag?(l=k("<"+n.tag+"/>").html(m(t.text)).addClass(n.className),"a"===n.tag.toLowerCase()&&l.attr("href","#"),i.append(l)):i.html(m(t.text));!1===t.enabled&&i.addClass(o.disabled);t.className&&i.addClass(t.className);t.titleAttr&&i.attr("title",t.titleAttr);t.namespace||(t.namespace=".dt-button-"+p++);n=(n=this.c.dom.buttonContainer)&&n.tag?k("<"+n.tag+"/>").addClass(n.className).append(i):i;this._addKey(t);return{conf:t,node:i.get(0),inserter:n,buttons:[],inCollection:q,collection:null}},_nodeToButton:function(j,i){i||(i=this.s.buttons);for(var n=0,l=i.length;n<l;n++){if(i[n].node===j){return i[n]}if(i[n].buttons.length){var m=this._nodeToButton(j,i[n].buttons);if(m){return m}}}},_nodeToHost:function(j,i){i||(i=this.s.buttons);for(var n=0,l=i.length;n<l;n++){if(i[n].node===j){return i}if(i[n].buttons.length){var m=this._nodeToHost(j,i[n].buttons);if(m){return m}}}},_keypress:function(i,d){var j=function(q){for(var n=0,l=q.length;n<l;n++){var o=q[n].conf,m=q[n].node;if(o.key){if(o.key===i){k(m).click()}else{if(k.isPlainObject(o.key)&&o.key.key===i&&(!o.key.shiftKey||d.shiftKey)){if(!o.key.altKey||d.altKey){if(!o.key.ctrlKey||d.ctrlKey){(!o.key.metaKey||d.metaKey)&&k(m).click()}}}}}q[n].buttons.length&&j(q[n].buttons)}};j(this.s.buttons)},_removeKey:function(i){if(i.key){var d=k.isPlainObject(i.key)?i.key.key:i.key,i=this.s.listenKeys.split(""),d=k.inArray(d,i);i.splice(d,1);this.s.listenKeys=i.join("")}},_resolveExtends:function(i){for(var d=this.s.dt,o,n,l=function(t){for(var q=0;!k.isPlainObject(t)&&!k.isArray(t);){if(t===e){return}if("function"===typeof t){if(t=t(d,i),!t){return !1}}else{if("string"===typeof t){if(!g[t]){throw"Unknown button type: "+t}t=g[t]}}q++;if(30<q){throw"Buttons: Too many iterations"}}return k.isArray(t)?t:k.extend({},t)},i=l(i);i&&i.extend;){if(!g[i.extend]){throw"Cannot extend unknown button type: "+i.extend}var j=l(g[i.extend]);if(k.isArray(j)){return j}if(!j){return !1}o=j.className;i=k.extend({},j,i);o&&i.className!==o&&(i.className=o+" "+i.className);var m=i.postfixButtons;if(m){i.buttons||(i.buttons=[]);o=0;for(n=m.length;o<n;o++){i.buttons.push(m[o])}i.postfixButtons=null}if(m=i.prefixButtons){i.buttons||(i.buttons=[]);o=0;for(n=m.length;o<n;o++){i.buttons.splice(o,0,m[o])}i.prefixButtons=null}i.extend=j.extend}return i}});f.background=function(i,d,j){j===e&&(j=400);i?k("<div/>").addClass(d).css("display","none").appendTo("body").fadeIn(j):k("body > div."+d).fadeOut(j,function(){k(this).removeClass(d).remove()})};f.instanceSelector=function(i,d){if(!i){return k.map(d,function(n){return n.inst})}var m=[],l=k.map(d,function(n){return n.name}),j=function(n){if(k.isArray(n)){for(var q=0,o=n.length;q<o;q++){j(n[q])}}else{"string"===typeof n?-1!==n.indexOf(",")?j(n.split(",")):(n=k.inArray(k.trim(n),l),-1!==n&&m.push(d[n].inst)):"number"===typeof n&&m.push(d[n].inst)}};j(i);return m};f.buttonSelector=function(i,d){for(var o=[],n=function(t,q,y){for(var x,v,w=0,u=q.length;w<u;w++){if(x=q[w]){v=y!==e?y+w:w+"",t.push({node:x.node,name:x.conf.name,idx:v}),x.buttons&&n(t,x.buttons,v+"-")}}},l=function(t,q){var x,w,v=[];n(v,q.s.buttons);x=k.map(v,function(y){return y.node});if(k.isArray(t)||t instanceof k){x=0;for(w=t.length;x<w;x++){l(t[x],q)}}else{if(null===t||t===e||"*"===t){x=0;for(w=v.length;x<w;x++){o.push({inst:q,node:v[x].node})}}else{if("number"===typeof t){o.push({inst:q,node:q.s.buttons[t].node})}else{if("string"===typeof t){if(-1!==t.indexOf(",")){v=t.split(",");x=0;for(w=v.length;x<w;x++){l(k.trim(v[x]),q)}}else{if(t.match(/^\d+(\-\d+)*$/)){x=k.map(v,function(y){return y.idx}),o.push({inst:q,node:v[k.inArray(t,x)].node})}else{if(-1!==t.indexOf(":name")){var u=t.replace(":name","");x=0;for(w=v.length;x<w;x++){v[x].name===u&&o.push({inst:q,node:v[x].node})}}else{k(x).filter(t).each(function(){o.push({inst:q,node:this})})}}}}else{"object"===typeof t&&t.nodeName&&(v=k.inArray(t,x),-1!==v&&o.push({inst:q,node:x[v]}))}}}}},j=0,m=i.length;j<m;j++){l(d,i[j])}return o};f.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}};f.version="1.2.2";k.extend(g,{collection:{text:function(d){return d.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(i,d,o,n){var i=o.offset(),l=k(d.table().container()),j=!1;k("div.dt-button-background").length&&(j=k("div.dt-button-collection").offset(),k("body").trigger("click.dtb-collection"));n._collection.addClass(n.collectionLayout).css("display","none").appendTo("body").fadeIn(n.fade);var m=n._collection.css("position");j&&"absolute"===m?n._collection.css({top:j.top+5,left:j.left+5}):"absolute"===m?(n._collection.css({top:i.top+o.outerHeight(),left:i.left}),o=i.left+n._collection.outerWidth(),l=l.offset().left+l.width(),o>l&&n._collection.css("left",i.left-(o-l))):(i=n._collection.height()/2,i>k(c).height()/2&&(i=k(c).height()/2),n._collection.css("marginTop",-1*i));n.background&&f.background(!0,n.backgroundClassName,n.fade);setTimeout(function(){k("div.dt-button-background").on("click.dtb-collection",function(){});k("body").on("click.dtb-collection",function(q){var t=k.fn.addBack?"addBack":"andSelf";if(!k(q.target).parents()[t]().filter(n._collection).length){n._collection.fadeOut(n.fade,function(){n._collection.detach()});k("div.dt-button-background").off("click.dtb-collection");f.background(false,n.backgroundClassName,n.fade);k("body").off("click.dtb-collection");d.off("buttons-action.b-internal")}})},10);if(n.autoClose){d.on("buttons-action.b-internal",function(){k("div.dt-button-background").click()})}},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(i,d){if(g.copyHtml5){return"copyHtml5"}if(g.copyFlash&&g.copyFlash.available(i,d)){return"copyFlash"}},csv:function(i,d){if(g.csvHtml5&&g.csvHtml5.available(i,d)){return"csvHtml5"}if(g.csvFlash&&g.csvFlash.available(i,d)){return"csvFlash"}},excel:function(i,d){if(g.excelHtml5&&g.excelHtml5.available(i,d)){return"excelHtml5"}if(g.excelFlash&&g.excelFlash.available(i,d)){return"excelFlash"}},pdf:function(i,d){if(g.pdfHtml5&&g.pdfHtml5.available(i,d)){return"pdfHtml5"}if(g.pdfFlash&&g.pdfFlash.available(i,d)){return"pdfFlash"}},pageLength:function(i){var i=i.settings()[0].aLengthMenu,d=k.isArray(i[0])?i[0]:i,l=k.isArray(i[0])?i[1]:i,j=function(m){return m.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},m.page.len())};return{extend:"collection",text:j,className:"buttons-page-length",autoClose:!0,buttons:k.map(d,function(n,m){return{text:l[m],action:function(o,q){q.page.len(n).draw()},init:function(o,u,q){var t=this,u=function(){t.active(o.page.len()===n)};o.on("length.dt"+q.namespace,u);u()},destroy:function(q,o,t){q.off("length.dt"+t.namespace)}}}),init:function(n,m,q){var o=this;n.on("length.dt"+q.namespace,function(){o.text(j(n))})},destroy:function(n,m,o){n.off("length.dt"+o.namespace)}}}});h.Api.register("buttons()",function(i,d){d===e&&(d=i,i=e);this.selector.buttonGroup=i;var j=this.iterator(!0,"table",function(l){if(l._buttons){return f.buttonSelector(f.instanceSelector(i,l._buttons),d)}},!0);j._groupSelector=i;return j});h.Api.register("button()",function(i,d){var j=this.buttons(i,d);1<j.length&&j.splice(1,j.length);return j});h.Api.registerPlural("buttons().active()","button().active()",function(d){return d===e?this.map(function(i){return i.inst.active(i.node)}):this.each(function(i){i.inst.active(i.node,d)})});h.Api.registerPlural("buttons().action()","button().action()",function(d){return d===e?this.map(function(i){return i.inst.action(i.node)}):this.each(function(i){i.inst.action(i.node,d)})});h.Api.register(["buttons().enable()","button().enable()"],function(d){return this.each(function(i){i.inst.enable(i.node,d)})});h.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(d){d.inst.disable(d.node)})});h.Api.registerPlural("buttons().nodes()","button().node()",function(){var d=k();k(this.each(function(i){d=d.add(i.inst.node(i.node))}));return d});h.Api.registerPlural("buttons().text()","button().text()",function(d){return d===e?this.map(function(i){return i.inst.text(i.node)}):this.each(function(i){i.inst.text(i.node,d)})});h.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(d){d.inst.node(d.node).trigger("click")})});h.Api.registerPlural("buttons().containers()","buttons().container()",function(){var i=k(),d=this._groupSelector;this.iterator(!0,"table",function(m){if(m._buttons){for(var m=f.instanceSelector(d,m._buttons),l=0,j=m.length;l<j;l++){i=i.add(m[l].container())}}});return i});h.Api.register("button().add()",function(i,d){var j=this.context;j.length&&(j=f.instanceSelector(this._groupSelector,j[0]._buttons),j.length&&j[0].add(d,i));return this.button(this._groupSelector,i)});h.Api.register("buttons().destroy()",function(){this.pluck("inst").unique().each(function(d){d.destroy()});return this});h.Api.registerPlural("buttons().remove()","buttons().remove()",function(){this.each(function(d){d.inst.remove(d.node)});return this});var a;h.Api.register("buttons.info()",function(i,d,l){var j=this;if(!1===i){return k("#datatables_buttons_info").fadeOut(function(){k(this).remove()}),clearTimeout(a),a=null,this}a&&clearTimeout(a);k("#datatables_buttons_info").length&&k("#datatables_buttons_info").remove();k('<div id="datatables_buttons_info" class="dt-button-info"/>').html(i?"<h2>"+i+"</h2>":"").append(k("<div/>")["string"===typeof d?"html":"append"](d)).css("display","none").appendTo("body").fadeIn();l!==e&&0!==l&&(a=setTimeout(function(){j.buttons.info(!1)},l));return this});h.Api.register("buttons.exportData()",function(E){if(this.context.length){for(var D=new h.Api(this.context[0]),C=k.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(j){return B(j)},footer:function(j){return B(j)},body:function(j){return B(j)}}},E),B=function(j){if("string"!==typeof j){return j}C.stripHtml&&(j=j.replace(/<[^>]*>/g,""));C.trim&&(j=j.replace(/^\s+|\s+$/g,""));C.stripNewlines&&(j=j.replace(/\n/g," "));C.decodeEntities&&(s.innerHTML=j,j=s.value);return j},E=D.columns(C.columns).indexes().map(function(j){var l=D.column(j).header();return C.format.header(l.innerHTML,j,l)}).toArray(),z=D.table().footer()?D.columns(C.columns).indexes().map(function(j){var l=D.column(j).footer();return C.format.footer(l?l.innerHTML:"",j,l)}).toArray():null,y=D.rows(C.rows,C.modifier).indexes().toArray(),A=D.cells(y,C.columns).render(C.orthogonal).toArray(),y=D.cells(y,C.columns).nodes().toArray(),x=E.length,w=0<x?A.length/x:0,v=Array(w),u=0,t=0;t<w;t++){for(var i=Array(x),d=0;d<x;d++){i[d]=C.format.body(A[u],t,d,y[u]),u++}v[t]=i}return{header:E,footer:z,body:v}}});var s=k("<textarea/>")[0];k.fn.dataTable.Buttons=f;k.fn.DataTable.Buttons=f;k(b).on("init.dt plugin-init.dt",function(i,d){if("dt"===i.namespace){var j=d.oInit.buttons||h.defaults.buttons;j&&!d._buttons&&(new f(d,j)).container()}});h.ext.feature.push({fnInit:function(i){var i=new h.Api(i),d=i.init().buttons||h.defaults.buttons;return(new f(i,d)).container()},cFeature:"B"});return f});