tinymce.ThemeManager.add("modern",function(J){var C=this,w=J.settings,y=tinymce.ui.Factory,L=tinymce.each,v=tinymce.DOM,G=tinymce.geom.Rect,z=tinymce.ui.FloatPanel;var D={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}};var K="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";function N(c,b){var a=[],d;if(!c){return}L(c.split(/[ ,]/),function(f){var e;function g(){var i=J.selection;function h(j){return function(l,n){var k,m=n.parents.length;while(m--){k=n.parents[m].nodeName;if(k=="OL"||k=="UL"){break}}f.active(l&&k==j)}}if(e=="bullist"){i.selectorChanged("ul > li",h("UL"))}if(e=="numlist"){i.selectorChanged("ol > li",h("OL"))}if(f.settings.stateSelector){i.selectorChanged(f.settings.stateSelector,function(j){f.active(j)},true)}if(f.settings.disabledStateSelector){i.selectorChanged(f.settings.disabledStateSelector,function(j){f.disabled(j)})}}if(f=="|"){d=null}else{if(y.has(f)){f={type:f,size:b};a.push(f);d=null}else{if(!d){d={type:"buttongroup",items:[]};a.push(d)}if(J.buttons[f]){e=f;f=J.buttons[e];if(typeof f=="function"){f=f()}f.type=f.type||"button";f.size=b;f=y.create(f);d.items.push(f);if(J.initialized){g()}else{J.on("init",g)}}}}});return{type:"toolbar",layout:"flow",items:a}}function I(c){var b=[];function a(e){if(e){b.push(N(e,c));return true}}if(tinymce.isArray(w.toolbar)){if(w.toolbar.length===0){return}tinymce.each(w.toolbar,function(e,f){w["toolbar"+(f+1)]=e});delete w.toolbar}for(var d=1;d<10;d++){if(!a(w["toolbar"+d])){break}}if(!b.length&&w.toolbar!==false){a(w.toolbar||K)}if(b.length){return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:b}}}function u(){var c,h=[];function f(j){var i;if(j=="|"){return{text:"|"}}i=J.menuItems[j];return i}function e(k){var o,j,l,i,m;m=tinymce.makeMap((w.removed_menuitems||"").split(/[ ,]/));if(w.menu){j=w.menu[k];i=true}else{j=D[k]}if(j){o={text:j.title};l=[];L((j.items||"").split(/[ ,]/),function(p){var q=f(p);if(q&&!m[p]){l.push(f(p))}});if(!i){L(J.menuItems,function(p){if(p.context==k){if(p.separator=="before"){l.push({text:"|"})}if(p.prependToContext){l.unshift(p)}else{l.push(p)}if(p.separator=="after"){l.push({text:"|"})}}})}for(var n=0;n<l.length;n++){if(l[n].text=="|"){if(n===0||n==l.length-1){l.splice(n,1)}}}o.menu=l;if(!o.menu.length){return null}}return o}var d=[];if(w.menu){for(c in w.menu){d.push(c)}}else{for(c in D){d.push(c)}}var g=typeof w.menubar=="string"?w.menubar.split(/[ ,]/):d;for(var b=0;b<g.length;b++){var a=g[b];a=e(a);if(a){h.push(a)}}return h}function E(a){function b(d){var c=a.find(d)[0];if(c){c.focus(true)}}J.shortcuts.add("Alt+F9","",function(){b("menubar")});J.shortcuts.add("Alt+F10","",function(){b("toolbar")});J.shortcuts.add("Alt+F11","",function(){b("elementpath")});a.on("cancel",function(){J.focus()})}function B(c,d){var b,e,g,f;function a(h){return{width:h.clientWidth,height:h.clientHeight}}b=J.getContainer();e=J.getContentAreaContainer().firstChild;g=a(b);f=a(e);if(c!==null){c=Math.max(w.min_width||100,c);c=Math.min(w.max_width||65535,c);v.setStyle(b,"width",c+(g.width-f.width));v.setStyle(e,"width",c)}d=Math.max(w.min_height||100,d);d=Math.min(w.max_height||65535,d);v.setStyle(e,"height",d);J.fire("ResizeEditor")}function H(c,b){var a=J.getContentAreaContainer();C.resizeTo(a.clientWidth+c,a.clientHeight+b)}function x(){var a;function f(){return J.contextToolbars||[]}function m(o){var p,q,r;p=tinymce.DOM.getPos(J.getContentAreaContainer());q=J.dom.getRect(o);r=J.dom.getRoot();if(r.nodeName=="BODY"){q.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft;q.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop}q.x+=p.x;q.y+=p.y;return q}function c(){L(J.contextToolbars,function(o){if(o.panel){o.panel.hide()}})}function e(o,p,q){p=p?p.substr(0,2):"";L({t:"down",b:"up"},function(r,s){o.classes.toggle("arrow-"+r,q(s,p.substr(0,1)))});L({l:"left",r:"right"},function(r,s){o.classes.toggle("arrow-"+r,q(s,p.substr(1,1)))})}function d(o){return{left:o.x,top:o.y,width:o.w,height:o.h,right:o.x+o.w,bottom:o.y+o.h}}function j(r,s,p,o,q){q=d({x:r,y:s,w:q.w,h:q.h});if(w.inline_toolbar_position_handler){q=w.inline_toolbar_position_handler({elementRect:d(p),contentAreaRect:d(o),panelRect:q})}return q}function b(p,o){p.moveTo(o.left,o.top)}function l(t){var o,R,q,r,T,s,S,p;if(J.removed){return}if(!t||!t.toolbar.panel){c();return}S=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"];T=t.toolbar.panel;T.show();q=m(t.element);R=tinymce.DOM.getRect(T.getEl());r=tinymce.DOM.getRect(J.getContentAreaContainer()||J.getBody());p=25;q.w=t.element.clientWidth;q.h=t.element.clientHeight;if(!J.inline){r.w=J.getDoc().documentElement.offsetWidth}if(J.selection.controlSelection.isResizable(t.element)&&q.w<p){q=G.inflate(q,0,8)}o=G.findBestRelativePosition(R,q,r,S);q=G.clamp(q,r);if(o){s=G.relativePosition(R,q,o);b(T,j(s.x,s.y,q,r,R))}else{r.h+=R.h;q=G.intersect(r,q);if(q){o=G.findBestRelativePosition(R,q,r,["bc-tc","bl-tl","br-tr"]);if(o){s=G.relativePosition(R,q,o);b(T,j(s.x,s.y,q,r,R))}else{b(T,j(q.x,q.y,q,r,R))}}else{T.hide()}}e(T,o,function(O,P){return O===P})}function i(){function o(){if(J.selection){l(k(J.selection.getNode()))}}tinymce.util.Delay.requestAnimationFrame(o)}function n(){if(!a){a=J.selection.getScrollContainer()||J.getWin();tinymce.$(a).on("scroll",i);J.on("remove",function(){tinymce.$(a).off("scroll")})}}function g(o){var p;if(o.toolbar.panel){o.toolbar.panel.show();l(o);return}n();p=y.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:true,border:1,items:N(o.toolbar.items),oncancel:function(){J.focus()}});o.toolbar.panel=p;p.renderTo(document.body).reflow();l(o)}function h(){tinymce.each(f(),function(o){if(o.panel){o.panel.hide()}})}function k(p){var q,s,r,o=f();r=J.$(p).parents().add(p);for(q=r.length-1;q>=0;q--){for(s=o.length-1;s>=0;s--){if(o[s].predicate(r[q])){return{toolbar:o[s],element:r[q]}}}}return null}J.on("click keyup setContent",function(o){if(o.type=="setcontent"&&!o.selection){return}tinymce.util.Delay.setEditorTimeout(J,function(){var p;p=k(J.selection.getNode());if(p){h();g(p)}else{h()}})});J.on("blur hide",h);J.on("ObjectResizeStart",function(){var o=k(J.selection.getNode());if(o&&o.toolbar.panel){o.toolbar.panel.hide()}});J.on("nodeChange ResizeEditor ResizeWindow",i);J.on("remove",function(){tinymce.each(f(),function(o){if(o.panel){o.panel.remove()}});J.contextToolbars={}});J.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var o=k(J.selection.getNode());if(o&&o.toolbar.panel){o.toolbar.panel.items()[0].focus()}})}function A(a){return function(){if(a.initialized){a.fire("SkinLoaded")}else{a.on("init",function(){a.fire("SkinLoaded")})}}}function F(b){var c,a;if(w.fixed_toolbar_container){a=v.select(w.fixed_toolbar_container)[0]}function d(){if(c&&c.moveRel&&c.visible()&&!c._fixed){var i=J.selection.getScrollContainer(),l=J.getBody();var k=0,m=0;if(i){var h=v.getPos(l),j=v.getPos(i);k=Math.max(0,j.x-h.x);m=Math.max(0,j.y-h.y)}c.fixed(false).moveRel(l,J.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(k,m)}}function e(){if(c){c.show();d();v.addClass(J.getBody(),"mce-edit-focus")}}function g(){if(c){c.hide();z.hideAll();v.removeClass(J.getBody(),"mce-edit-focus")}}function f(){if(c){if(!c.visible()){e()}return}c=C.panel=y.create({type:a?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:!!a,border:1,items:[w.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:u()},I(w.toolbar_items_size)]});J.fire("BeforeRenderUI");c.renderTo(a||document.body).reflow();E(c);e();x();J.on("nodeChange",d);J.on("activate",e);J.on("deactivate",g);J.nodeChanged()}w.content_editable=true;J.on("focus",function(){if(b.skinUiCss){tinymce.DOM.styleSheetLoader.load(b.skinUiCss,f,f)}else{f()}});J.on("blur hide",g);J.on("remove",function(){if(c){c.remove();c=null}});if(b.skinUiCss){tinymce.DOM.styleSheetLoader.load(b.skinUiCss,A(J))}return{}}function M(b){var c,a,d;function e(){return function(f){if(f.mode=="readonly"){c.find("*").disabled(true)}else{c.find("*").disabled(false)}}}if(b.skinUiCss){tinymce.DOM.styleSheetLoader.load(b.skinUiCss,A(J))}c=C.panel=y.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[w.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:u()},I(w.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});if(w.resize!==false){a={type:"resizehandle",direction:w.resize,onResizeStart:function(){var f=J.getContentAreaContainer().firstChild;d={width:f.clientWidth,height:f.clientHeight}},onResize:function(f){if(w.resize=="both"){B(d.width+f.deltaX,d.height+f.deltaY)}else{B(null,d.height+f.deltaY)}}}}if(w.statusbar!==false){c.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath",editor:J},a]})}J.fire("BeforeRenderUI");J.on("SwitchMode",e());c.renderBefore(b.targetNode).reflow();if(w.readonly){J.setMode("readonly")}if(w.width){tinymce.DOM.setStyle(c.getEl(),"width",w.width)}J.on("remove",function(){c.remove();c=null});E(c);x();return{iframeContainer:c.find("#iframe")[0].getEl(),editorContainer:c.getEl()}}C.renderUI=function(b){var a=w.skin!==false?w.skin||"lightgray":false;if(a){var c=w.skin_url;if(c){c=J.documentBaseURI.toAbsolute(c)}else{c=tinymce.baseURL+"/skins/"+a}if(tinymce.Env.documentMode<=7){b.skinUiCss=c+"/skin.ie7.min.css"}else{b.skinUiCss=c+"/skin.min.css"}J.contentCSS.push(c+"/content"+(J.inline?".inline":"")+".min.css")}J.on("ProgressState",function(d){C.throbber=C.throbber||new tinymce.ui.Throbber(C.panel.getEl("body"));if(d.state){C.throbber.show(d.time)}else{C.throbber.hide()}});if(w.inline){return F(b)}return M(b)};C.resizeTo=B;C.resizeBy=H});