(function(b,g){var d={};function c(m,n){var l,j=[];for(var k=0;k<m.length;++k){l=d[m[k]]||e(m[k]);if(!l){throw"module definition dependecy not found: "+m[k]}j.push(l)}n.apply(null,j)}function h(k,j,i){if(typeof k!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(j===g){throw"invalid module definition, dependencies must be specified"}if(i===g){throw"invalid module definition, definition function must be specified"}c(j,function(){d[k]=i.apply(null,arguments)})}function f(i){return !!d[i]}function e(l){var j=b;var i=l.split(/[.\/]/);for(var k=0;k<i.length;++k){if(!j[i[k]]){return}j=j[i[k]]}return j}function a(l){var k,n,p,j,m;for(k=0;k<l.length;k++){n=b;p=l[k];j=p.split(/[.\/]/);for(var o=0;o<j.length-1;++o){if(n[j[o]]===g){n[j[o]]={}}n=n[j[o]]}n[j[j.length-1]]=d[p]}if(b.AMDLC_TESTS){m=b.privateModules||{};for(p in d){m[p]=d[p]}for(k=0;k<l.length;k++){delete m[l[k]]}b.privateModules=m}}h("tinymce/tableplugin/Utils",["tinymce/Env"],function(j){function i(m,l){return parseInt(m.getAttribute(l)||1,10)}function k(l){if(!j.ie||j.ie>9){if(!l.hasChildNodes()){l.innerHTML='<br data-mce-bogus="1" />'}}}return{getSpanVal:i,paddCell:k}});h("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(k,j,m){var l=k.each,i=m.getSpanVal;return function(n,D,T){var U,G,s,B,y=n.selection,o=y.dom;function r(){n.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function R(ab){return ab===n.getBody()}function z(ab,ac){if(!ab){return[]}ac=k.map(ac.split(","),function(ad){return ad.toLowerCase()});return k.grep(ab.childNodes,function(ad){return k.inArray(ac,ad.nodeName.toLowerCase())!==-1})}function w(){var ab=0;U=[];G=0;l(["thead","tbody","tfoot"],function(ad){var ac=z(D,ad)[0];var ae=z(ac,"tr");l(ae,function(af,ag){ag+=ab;l(z(af,"td,th"),function(am,ah){var ai,aj,ak,al;if(U[ag]){while(U[ag][ah]){ah++}}ak=i(am,"rowspan");al=i(am,"colspan");for(aj=ag;aj<ag+ak;aj++){if(!U[aj]){U[aj]=[]}for(ai=ah;ai<ah+al;ai++){U[aj][ai]={part:ad,real:aj==ag&&ai==ah,elm:am,rowspan:ak,colspan:al}}}G=Math.max(G,ah+1)})});ab+=ae.length})}function M(ab){n.fire("newrow",{node:ab});return ab}function aa(ab){n.fire("newcell",{node:ab});return ab}function K(ac,ab){ac=ac.cloneNode(ab);ac.removeAttribute("id");return ac}function p(ab,ad){var ac;ac=U[ad];if(ac){return ac[ab]}}function W(ad,ab,ac){if(ad){ac=parseInt(ac,10);if(ac===1){ad.removeAttribute(ab,1)}else{ad.setAttribute(ab,ac,1)}}}function X(ab){return ab&&(!!o.getAttrib(ab.elm,"data-mce-selected")||ab==T)}function V(){var ab=[];l(D.rows,function(ac){l(ac.cells,function(ad){if(o.getAttrib(ad,"data-mce-selected")||(T&&ad==T.elm)){ab.push(ac);return false}})});return ab}function v(){var ab=o.createRng();if(R(D)){return}ab.setStartAfter(D);ab.setEndAfter(D);y.setRng(ab);o.remove(D)}function H(ab){var ad,ac={};if(n.settings.table_clone_elements!==false){ac=k.makeMap((n.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)}k.walk(ab,function(af){var ae;if(af.nodeType==3){l(o.getParents(af.parentNode,null,ab).reverse(),function(ag){if(!ac[ag.nodeName]){return}ag=K(ag,false);if(!ad){ad=ae=ag}else{if(ae){ae.appendChild(ag)}}ae=ag});if(ae){ae.innerHTML=j.ie&&j.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'}return false}},"childNodes");ab=K(ab,false);aa(ab);W(ab,"rowSpan",1);W(ab,"colSpan",1);if(ad){ab.appendChild(ad)}else{m.paddCell(ab)}return ab}function t(){var ab=o.createRng(),ac;l(o.select("tr",D),function(ad){if(ad.cells.length===0){o.remove(ad)}});if(o.select("tr",D).length===0){ab.setStartBefore(D);ab.setEndBefore(D);y.setRng(ab);o.remove(D);return}l(o.select("thead,tbody,tfoot",D),function(ad){if(ad.rows.length===0){o.remove(ad)}});w();if(s){ac=U[Math.min(U.length-1,s.y)];if(ac){y.select(ac[Math.min(ac.length-1,s.x)].elm,true);y.collapse(true)}}}function E(ah,af,aj,ag){var ae,ac,ab,ad,ai;ae=U[af][ah].elm.parentNode;for(ab=1;ab<=aj;ab++){ae=o.getNext(ae,"tr");if(ae){for(ac=ah;ac>=0;ac--){ai=U[af+ab][ac].elm;if(ai.parentNode==ae){for(ad=1;ad<=ag;ad++){o.insertAfter(H(ai),ai)}break}}if(ac==-1){for(ad=1;ad<=ag;ad++){ae.insertBefore(H(ae.cells[0]),ae.cells[0])}}}}}function L(){l(U,function(ab,ac){l(ab,function(ae,ad){var ah,ag,af;if(X(ae)){ae=ae.elm;ah=i(ae,"colspan");ag=i(ae,"rowspan");if(ah>1||ag>1){W(ae,"rowSpan",1);W(ae,"colSpan",1);for(af=0;af<ah-1;af++){o.insertAfter(H(ae),ae)}E(ad,ac,ag-1,ah)}}})})}function S(an,ak,aq){var aj,ae,ad,ap,ao,am,ai,al,ab,ac,ag;if(an){aj=F(an);ae=aj.x;ad=aj.y;ap=ae+(ak-1);ao=ad+(aq-1)}else{s=B=null;l(U,function(ar,at){l(ar,function(av,au){if(X(av)){if(!s){s={x:au,y:at}}B={x:au,y:at}}})});if(s){ae=s.x;ad=s.y;ap=B.x;ao=B.y}}al=p(ae,ad);ab=p(ap,ao);if(al&&ab&&al.part==ab.part){L();w();al=p(ae,ad).elm;var af=(ap-ae)+1;var ah=(ao-ad)+1;if(af===G&&ah===U.length){af=1;ah=1}if(af===G&&ah>1){ah=1}W(al,"colSpan",af);W(al,"rowSpan",ah);for(ai=ad;ai<=ao;ai++){for(am=ae;am<=ap;am++){if(!U[ai]||!U[ai][am]){continue}an=U[ai][am].elm;if(an!=al){ac=k.grep(an.childNodes);l(ac,function(ar){al.appendChild(ar)});if(ac.length){ac=k.grep(al.childNodes);ag=0;l(ac,function(ar){if(ar.nodeName=="BR"&&ag++<ac.length-1){al.removeChild(ar)}})}o.remove(an)}}}t()}}function x(ag){var ab,ai,af,ah,aj,ak,ac,al,ae,ad;l(U,function(am,an){l(am,function(ao){if(X(ao)){ao=ao.elm;aj=ao.parentNode;ak=M(K(aj,false));ab=an;if(ag){return false}}});if(ag){return !ab}});if(ab===g){return}for(ah=0,ad=0;ah<U[0].length;ah+=ad){if(!U[ab][ah]){continue}ai=U[ab][ah].elm;ad=i(ai,"colspan");if(ai!=af){if(!ag){ae=i(ai,"rowspan");if(ae>1){W(ai,"rowSpan",ae+1);continue}}else{if(ab>0&&U[ab-1][ah]){al=U[ab-1][ah].elm;ae=i(al,"rowSpan");if(ae>1){W(al,"rowSpan",ae+1);continue}}}ac=H(ai);W(ac,"colSpan",ai.colSpan);ak.appendChild(ac);af=ai}}if(ak.hasChildNodes()){if(!ag){o.insertAfter(ak,aj)}else{aj.parentNode.insertBefore(ak,aj)}}}function q(ac){var ad,ab;l(U,function(ae){l(ae,function(ag,af){if(X(ag)){ad=af;if(ac){return false}}});if(ac){return !ad}});l(U,function(ah,ai){var ae,af,ag;if(!ah[ad]){return}ae=ah[ad].elm;if(ae!=ab){ag=i(ae,"colspan");af=i(ae,"rowspan");if(ag==1){if(!ac){o.insertAfter(H(ae),ae);E(ad,ai,af-1,ag)}else{ae.parentNode.insertBefore(H(ae),ae);E(ad,ai,af-1,ag)}}else{W(ae,"colSpan",ae.colSpan+1)}ab=ae}})}function C(ab){return k.grep(P(ab),X)}function P(ac){var ab=[];l(ac,function(ad){l(ad,function(ae){ab.push(ae)})});return ab}function Y(){var ab=[];if(R(D)){if(U[0].length==1){return}if(C(U).length==P(U).length){return}}l(U,function(ac){l(ac,function(ae,ad){if(X(ae)&&k.inArray(ab,ad)===-1){l(U,function(ah){var af=ah[ad].elm,ag;ag=i(af,"colSpan");if(ag>1){W(af,"colSpan",ag-1)}else{o.remove(af)}});ab.push(ad)}})});t()}function J(){var ac;function ab(ae){var af,ad;l(ae.cells,function(ag){var ah=i(ag,"rowSpan");if(ah>1){W(ag,"rowSpan",ah-1);af=F(ag);E(af.x,af.y,1,1)}});af=F(ae.cells[0]);l(U[af.y],function(ag){var ah;ag=ag.elm;if(ag!=ad){ah=i(ag,"rowSpan");if(ah<=1){o.remove(ag)}else{W(ag,"rowSpan",ah-1)}ad=ag}})}ac=V();if(R(D)&&ac.length==D.rows.length){return}l(ac.reverse(),function(ad){ab(ad)});t()}function Q(){var ab=V();if(R(D)&&ab.length==D.rows.length){return}o.remove(ab);t();return ab}function I(){var ab=V();l(ab,function(ad,ac){ab[ac]=K(ad,true)});return ab}function N(ae,ad){var af=V(),ac=af[ad?0:af.length-1],ag=ac.cells.length,ab;if(!ae){return}ab=k.map(ae,function(ah){return ah.cloneNode(true)});l(U,function(ai){var ah;ag=0;l(ai,function(aj){if(aj.real){ag+=aj.colspan}if(aj.elm.parentNode==ac){ah=1}});if(ah){return false}});if(!ad){ab.reverse()}l(ab,function(ak){var ai,aj=ak.cells.length,ah;M(ak);for(ai=0;ai<aj;ai++){ah=ak.cells[ai];aa(ah);W(ah,"colSpan",1);W(ah,"rowSpan",1)}for(ai=aj;ai<ag;ai++){ak.appendChild(aa(H(ak.cells[aj-1])))}for(ai=ag;ai<aj;ai++){o.remove(ak.cells[ai])}if(ad){ac.parentNode.insertBefore(ak,ac)}else{o.insertAfter(ak,ac)}});r()}function F(ab){var ac;l(U,function(ad,ae){l(ad,function(ag,af){if(ag.elm==ab){ac={x:af,y:ae};return false}});return !ac});return ac}function A(ab){s=F(ab)}function O(){var ac,ab;ac=ab=0;l(U,function(ad,ae){l(ad,function(ag,af){var ai,ah;if(X(ag)){ag=U[ae][af];if(af>ac){ac=af}if(ae>ab){ab=ae}if(ag.real){ai=ag.colspan-1;ah=ag.rowspan-1;if(ai){if(af+ai>ac){ac=af+ai}}if(ah){if(ae+ah>ab){ab=ae+ah}}}}})});return{x:ac,y:ab}}function Z(aj){var ae,ad,al,ak,ac,ab,af,ag,ai,ah;B=F(aj);if(s&&B){ae=Math.min(s.x,B.x);ad=Math.min(s.y,B.y);al=Math.max(s.x,B.x);ak=Math.max(s.y,B.y);ac=al;ab=ak;for(ah=ad;ah<=ak;ah++){for(ai=ae;ai<=al;ai++){aj=U[ah][ai];if(aj.real){af=aj.colspan-1;ag=aj.rowspan-1;if(af){if(ai+af>ac){ac=ai+af}}if(ag){if(ah+ag>ab){ab=ah+ag}}}}}r();for(ah=ad;ah<=ab;ah++){for(ai=ae;ai<=ac;ai++){if(U[ah][ai]){o.setAttrib(U[ah][ai].elm,"data-mce-selected","1")}}}}}function u(ad,af){var ae,ac,ab;ae=F(ad);ac=ae.y*G+ae.x;do{ac+=af;ab=p(ac%G,Math.floor(ac/G));if(!ab){break}if(ab.elm!=ad){y.select(ab.elm,true);if(o.isEmpty(ab.elm)){y.collapse(true)}return true}}while(ab.elm==ad);return false}D=D||o.getParent(y.getStart(true),"table");w();T=T||o.getParent(y.getStart(true),"th,td");if(T){s=F(T);B=O();T=p(s.x,s.y)}k.extend(this,{deleteTable:v,split:L,merge:S,insertRow:x,insertCol:q,deleteCols:Y,deleteRows:J,cutRows:Q,copyRows:I,pasteRows:N,getPos:F,setStartCell:A,setEndCell:Z,moveRelIdx:u,refresh:w})}});h("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(n,o,j,k,m){var l=k.each,i=m.getSpanVal;return function(t){function u(){function v(E){var K=E.keyCode;function C(T,P){var O=T?"previousSibling":"nextSibling";var U=t.dom.getParent(P,"tr");var S=U[O];if(S){G(t,P,S,T);E.preventDefault();return true}var V=t.dom.getParent(U,"table");var R=U.parentNode;var N=R.nodeName.toLowerCase();if(N==="tbody"||N===(T?"tfoot":"thead")){var Q=x(T,V,R,"tbody");if(Q!==null){return z(T,Q,P)}}return J(T,U,O,V)}function x(R,P,Q,T){var O=t.dom.select(">"+T,P);var N=O.indexOf(Q);if(R&&N===0||!R&&N===O.length-1){return A(R,P)}else{if(N===-1){var S=Q.tagName.toLowerCase()==="thead"?0:O.length-1;return O[S]}}return O[N+(R?-1:1)]}function A(Q,P){var O=Q?"thead":"tfoot";var N=t.dom.select(">"+O,P);return N.length!==0?N[0]:null}function z(Q,P,O){var N=w(P,Q);if(N){G(t,O,N,Q)}E.preventDefault();return true}function J(T,Q,N,S){var O=S[N];if(O){I(O);return true}var R=t.dom.getParent(S,"td,th");if(R){return C(T,R,E)}var P=w(Q,!T);I(P);E.preventDefault();return false}function w(O,N){var P=O&&O[N?"lastChild":"firstChild"];return P&&P.nodeName==="BR"?t.dom.getParent(P,"td,th"):P}function I(N){t.selection.setCursorLocation(N,0)}function F(){return K==n.UP||K==n.DOWN}function H(O){var P=O.selection.getNode();var N=O.dom.getParent(P,"tr");return N!==null}function D(O){var N=0;var P=O;while(P.previousSibling){P=P.previousSibling;N=N+i(P,"colspan")}return N}function y(P,N){var Q=0,O=0;l(P.children,function(R,S){Q=Q+i(R,"colspan");O=S;if(Q>N){return false}});return O}function G(P,S,U,R){var T=D(t.dom.getParent(S,"td,th"));var O=y(U,T);var N=U.childNodes[O];var Q=w(N,R);I(Q||N)}function M(N){var P=t.selection.getNode();var Q=t.dom.getParent(P,"td,th");var O=t.dom.getParent(N,"td,th");return Q&&Q!==O&&B(Q,O)}function B(O,N){return t.dom.getParent(O,"TABLE")===t.dom.getParent(N,"TABLE")}if(F()&&H(t)){var L=t.selection.getNode();o.setEditorTimeout(t,function(){if(M(L)){C(!E.shiftKey&&K===n.UP,L,E)}},0)}}t.on("KeyDown",function(w){v(w)})}function p(){function v(x,y){var z=y.ownerDocument,w=z.createRange(),A;w.setStartBefore(y);w.setEnd(x.endContainer,x.endOffset);A=z.createElement("body");A.appendChild(w.cloneContents());return A.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}t.on("KeyDown",function(y){var w,x,z=t.dom;if(y.keyCode==37||y.keyCode==38){w=t.selection.getRng();x=z.getParent(w.startContainer,"table");if(x&&t.getBody().firstChild==x){if(v(w,x)){w=z.createRng();w.setStartBefore(x);w.setEndBefore(x);t.selection.setRng(w);y.preventDefault()}}}})}function r(){t.on("KeyDown SetContent VisualAid",function(){var v;for(v=t.getBody().lastChild;v;v=v.previousSibling){if(v.nodeType==3){if(v.nodeValue.length>0){break}}else{if(v.nodeType==1&&(v.tagName=="BR"||!v.getAttribute("data-mce-bogus"))){break}}}if(v&&v.nodeName=="TABLE"){if(t.settings.forced_root_block){t.dom.add(t.getBody(),t.settings.forced_root_block,t.settings.forced_root_block_attrs,j.ie&&j.ie<10?"&nbsp;":'<br data-mce-bogus="1" />')}else{t.dom.add(t.getBody(),"br",{"data-mce-bogus":"1"})}}});t.on("PreProcess",function(w){var v=w.node.lastChild;if(v&&(v.nodeName=="BR"||(v.childNodes.length==1&&(v.firstChild.nodeName=="BR"||v.firstChild.nodeValue=="\u00a0")))&&v.previousSibling&&v.previousSibling.nodeName=="TABLE"){t.dom.remove(v)}})}function q(){function v(C,y,z,E){var A=3,F=C.dom.getParent(y.startContainer,"TABLE");var B,x,D;if(F){B=F.parentNode}x=y.startContainer.nodeType==A&&y.startOffset===0&&y.endOffset===0&&E&&(z.nodeName=="TR"||z==B);D=(z.nodeName=="TD"||z.nodeName=="TH")&&!E;return x||D}function w(){var y=t.selection.getRng();var A=t.selection.getNode();var z=t.dom.getParent(y.startContainer,"TD,TH");if(!v(t,y,A,z)){return}if(!z){z=A}var x=z.lastChild;while(x.lastChild){x=x.lastChild}if(x.nodeType==3){y.setEnd(x,x.data.length);t.selection.setRng(y)}}t.on("KeyDown",function(){w()});t.on("MouseDown",function(x){if(x.button!=2){w()}})}function s(){function w(x){t.selection.select(x,true);t.selection.collapse(true)}function v(x){t.$(x).empty();m.paddCell(x)}t.on("keydown",function(z){if((z.keyCode==n.DELETE||z.keyCode==n.BACKSPACE)&&!z.isDefaultPrevented()){var y,B,A,x;y=t.dom.getParent(t.selection.getStart(),"table");if(y){B=t.dom.select("td,th",y);A=k.grep(B,function(C){return !!t.dom.getAttrib(C,"data-mce-selected")});if(A.length===0){x=t.dom.getParent(t.selection.getStart(),"td,th");if(t.selection.isCollapsed()&&x&&t.dom.isEmpty(x)){z.preventDefault();v(x);w(x)}return}z.preventDefault();t.undoManager.transact(function(){if(B.length==A.length){t.execCommand("mceTableDelete")}else{k.each(A,v);w(A[0])}})}}})}s();if(j.webkit){u();q()}if(j.gecko){p();r()}if(j.ie>9){p();r()}}});h("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(j,k,i){return function(p,v){var n=p.dom,u,t,m,x,w=true,r;function o(y){p.getBody().style.webkitUserSelect="";if(y||w){p.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected");w=false}}var s=function(){t=u=m=x=null;v(false)};function q(z,y){if(!z||!y){return false}return z===n.getParent(y,"table")}function l(B){var z,A=B.target,C;if(r){return}if(A===x){return}x=A;if(m&&t){C=n.getParent(A,"td,th");if(!q(m,C)){C=n.getParent(m,"td,th")}if(t===C&&!w){return}v(true);if(q(m,C)){B.preventDefault();if(!u){u=new j(p,m,t);p.getBody().style.webkitUserSelect="none"}u.setEndCell(C);w=true;z=p.selection.getSel();try{if(z.removeAllRanges){z.removeAllRanges()}else{z.empty()}}catch(y){}}}}p.on("SelectionChange",function(y){if(w){y.stopImmediatePropagation()}},true);p.on("MouseDown",function(y){if(y.button!=2&&!r){o();t=n.getParent(y.target,"td,th");m=n.getParent(t,"table")}});p.on("mouseover",l);p.on("remove",function(){n.unbind(p.getDoc(),"mouseover",l);o()});p.on("MouseUp",function(){var z,D=p.selection,y,E,C,B;function A(F,H){var G=new k(F,F);do{if(F.nodeType==3&&i.trim(F.nodeValue).length!==0){if(H){z.setStart(F,0)}else{z.setEnd(F,F.nodeValue.length)}return}if(F.nodeName=="BR"){if(H){z.setStartBefore(F)}else{z.setEndBefore(F)}return}}while((F=(H?G.next():G.prev())))}if(t){if(u){p.getBody().style.webkitUserSelect=""}y=n.select("td[data-mce-selected],th[data-mce-selected]");if(y.length>0){z=n.createRng();C=y[0];z.setStartBefore(C);z.setEndAfter(C);A(C,1);E=new k(C,n.getParent(y[0],"table"));do{if(C.nodeName=="TD"||C.nodeName=="TH"){if(!n.getAttrib(C,"data-mce-selected")){break}B=C}}while((C=E.next()));A(B);D.setRng(z)}p.nodeChanged();s()}});p.on("KeyUp Drop SetContent",function(y){o(y.type=="setcontent");s();r=false});p.on("ObjectResizeStart ObjectResized",function(y){r=y.type!="objectresized"});return{clear:o}}});h("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(j,i){var k=j.each;return function(n){var w=this;function q(){var x=n.settings.color_picker_callback;if(x){return function(){var y=this;x.call(n,function(z){y.value(z).fire("change")},y.value())}}}function t(x){return{title:"Advanced",type:"form",defaults:{onchange:function(){v(x,this.parents().reverse()[0],this.name()=="style")}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:q()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:q()}]}]}}function m(x){return x?x.replace(/px$/,""):""}function u(x){if(/^[0-9]+$/.test(x)){x+="px"}return x}function s(x){k("left center right".split(" "),function(y){n.formatter.remove("align"+y,{},x)})}function o(x){k("top middle bottom".split(" "),function(y){n.formatter.remove("valign"+y,{},x)})}function p(z,x,A){function y(C,B){B=B||[];j.each(C,function(E){var D={text:E.text||E.title};if(E.menu){D.menu=y(E.menu)}else{D.value=E.value;if(x){x(D)}}B.push(D)});return B}return y(z,A||[])}function v(B,A,x){var z=A.toJSON();var y=B.parseStyle(z.style);if(x){A.find("#borderColor").value(y["border-color"]||"")[0].fire("change");A.find("#backgroundColor").value(y["background-color"]||"")[0].fire("change")}else{y["border-color"]=z.borderColor;y["background-color"]=z.backgroundColor}A.find("#style").value(B.serializeStyle(B.parseStyle(B.serializeStyle(y))))}function l(z,y,A){var x=z.parseStyle(z.getAttrib(A,"style"));if(x["border-color"]){y.borderColor=x["border-color"]}if(x["background-color"]){y.backgroundColor=x["background-color"]}y.style=z.serializeStyle(x)}function r(z,A,y){var x=z.parseStyle(z.getAttrib(A,"style"));k(y,function(B){x[B.name]=B.value});z.setAttrib(A,"style",z.serializeStyle(z.parseStyle(z.serializeStyle(x))))}w.tableProps=function(){w.table(true)};w.table=function(B){var y=n.dom,D,F,C,x,A={},G,z;function H(){function J(N,K,M){if(N.tagName==="TD"||N.tagName==="TH"){y.setStyle(N,K,M)}else{if(N.children){for(var L=0;L<N.children.length;L++){J(N.children[L],K,M)}}}}var I;v(y,this);A=j.extend(A,this.toJSON());if(A["class"]===false){delete A["class"]}n.undoManager.transact(function(){if(!D){D=n.plugins.table.insertTable(A.cols||1,A.rows||1)}n.dom.setAttribs(D,{style:A.style,"class":A["class"]});if(n.settings.table_style_by_css){z=[];z.push({name:"border",value:A.border});z.push({name:"border-spacing",value:u(A.cellspacing)});r(y,D,z);y.setAttribs(D,{"data-mce-border-color":A.borderColor,"data-mce-cell-padding":A.cellpadding,"data-mce-border":A.border});if(D.children){for(var K=0;K<D.children.length;K++){J(D.children[K],"border",A.border);J(D.children[K],"padding",u(A.cellpadding))}}}else{n.dom.setAttribs(D,{border:A.border,cellpadding:A.cellpadding,cellspacing:A.cellspacing})}if(y.getAttrib(D,"width")&&!n.settings.table_style_by_css){y.setAttrib(D,"width",m(A.width))}else{y.setStyle(D,"width",u(A.width))}y.setStyle(D,"height",u(A.height));I=y.select("caption",D)[0];if(I&&!A.caption){y.remove(I)}if(!I&&A.caption){I=y.create("caption");I.innerHTML=!i.ie?'<br data-mce-bogus="1"/>':"\u00a0";D.insertBefore(I,D.firstChild)}s(D);if(A.align){n.formatter.apply("align"+A.align,{},D)}n.focus();n.addVisual()})}function E(M,K){var J=n.dom.select("td,th",M),L;function I(Q,P){for(var O=0;O<P.length;O++){var N=y.getStyle(P[O],K);if(typeof Q==="undefined"){Q=N}if(Q!=N){return""}}return Q}L=I(L,J);return L}if(B===true){D=y.getParent(n.selection.getStart(),"table");if(D){A={width:m(y.getStyle(D,"width")||y.getAttrib(D,"width")),height:m(y.getStyle(D,"height")||y.getAttrib(D,"height")),cellspacing:m(y.getStyle(D,"border-spacing")||y.getAttrib(D,"cellspacing")),cellpadding:y.getAttrib(D,"data-mce-cell-padding")||y.getAttrib(D,"cellpadding")||E(D,"padding"),border:y.getAttrib(D,"data-mce-border")||y.getAttrib(D,"border")||E(D,"border"),borderColor:y.getAttrib(D,"data-mce-border-color"),caption:!!y.select("caption",D)[0],"class":y.getAttrib(D,"class")};k("left center right".split(" "),function(I){if(n.formatter.matchNode(D,"align"+I)){A.align=I}})}}else{F={label:"Cols",name:"cols"};C={label:"Rows",name:"rows"}}if(n.settings.table_class_list){if(A["class"]){A["class"]=A["class"].replace(/\s*mce\-item\-table\s*/g,"")}x={name:"class",type:"listbox",label:"Class",values:p(n.settings.table_class_list,function(I){if(I.value){I.textStyle=function(){return n.formatter.getCssText({block:"table",classes:[I.value]})}}})}}G={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:false,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(n.settings.table_appearance_options!==false)?[F,C,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[F,C,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},x]};if(n.settings.table_advtab!==false){l(y,A,D);n.windowManager.open({title:"Table properties",data:A,bodyType:"tabpanel",body:[{title:"General",type:"form",items:G},t(y)],onsubmit:H})}else{n.windowManager.open({title:"Table properties",data:A,body:G,onsubmit:H})}};w.merge=function(y,x){n.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var z=this.toJSON();n.undoManager.transact(function(){y.merge(x,z.cols,z.rows)})}})};w.cell=function(){var D=n.dom,z,C,A,x=[];function B(){v(D,this);C=j.extend(C,this.toJSON());n.undoManager.transact(function(){k(x,function(E){n.dom.setAttribs(E,{scope:C.scope,style:C.style,"class":C["class"]});n.dom.setStyles(E,{width:u(C.width),height:u(C.height)});if(C.type&&E.nodeName.toLowerCase()!=C.type){E=D.rename(E,C.type)}s(E);if(C.align){n.formatter.apply("align"+C.align,{},E)}o(E);if(C.valign){n.formatter.apply("valign"+C.valign,{},E)}});n.focus()})}x=n.dom.select("td[data-mce-selected],th[data-mce-selected]");z=n.dom.getParent(n.selection.getStart(),"td,th");if(!x.length&&z){x.push(z)}z=z||x[0];if(!z){return}C={width:m(D.getStyle(z,"width")||D.getAttrib(z,"width")),height:m(D.getStyle(z,"height")||D.getAttrib(z,"height")),scope:D.getAttrib(z,"scope"),"class":D.getAttrib(z,"class")};C.type=z.nodeName.toLowerCase();k("left center right".split(" "),function(E){if(n.formatter.matchNode(z,"align"+E)){C.align=E}});k("top middle bottom".split(" "),function(E){if(n.formatter.matchNode(z,"valign"+E)){C.valign=E}});if(n.settings.table_cell_class_list){A={name:"class",type:"listbox",label:"Class",values:p(n.settings.table_cell_class_list,function(E){if(E.value){E.textStyle=function(){return n.formatter.getCssText({block:"td",classes:[E.value]})}}})}}var y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:false,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},A]};if(n.settings.table_cell_advtab!==false){l(D,C,z);n.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:C,body:[{title:"General",type:"form",items:y},t(D)],onsubmit:B})}else{n.windowManager.open({title:"Cell properties",data:C,body:y,onsubmit:B})}};w.row=function(){var z=n.dom,C,D,E,x,A,F=[],y;function B(){var G,H,I;v(z,this);A=j.extend(A,this.toJSON());n.undoManager.transact(function(){var J=A.type;k(F,function(K){n.dom.setAttribs(K,{scope:A.scope,style:A.style,"class":A["class"]});n.dom.setStyles(K,{height:u(A.height)});if(J!=K.parentNode.nodeName.toLowerCase()){G=z.getParent(K,"table");H=K.parentNode;I=z.select(J,G)[0];if(!I){I=z.create(J);if(G.firstChild){G.insertBefore(I,G.firstChild)}else{G.appendChild(I)}}I.appendChild(K);if(!H.hasChildNodes()){z.remove(H)}}s(K);if(A.align){n.formatter.apply("align"+A.align,{},K)}});n.focus()})}C=n.dom.getParent(n.selection.getStart(),"table");D=n.dom.getParent(n.selection.getStart(),"td,th");k(C.rows,function(G){k(G.cells,function(H){if(z.getAttrib(H,"data-mce-selected")||H==D){F.push(G);return false}})});E=F[0];if(!E){return}A={height:m(z.getStyle(E,"height")||z.getAttrib(E,"height")),scope:z.getAttrib(E,"scope"),"class":z.getAttrib(E,"class")};A.type=E.parentNode.nodeName.toLowerCase();k("left center right".split(" "),function(G){if(n.formatter.matchNode(E,"align"+G)){A.align=G}});if(n.settings.table_row_class_list){x={name:"class",type:"listbox",label:"Class",values:p(n.settings.table_row_class_list,function(G){if(G.value){G.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[G.value]})}}})}}y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},x]};if(n.settings.table_row_advtab!==false){l(z,A,E);n.windowManager.open({title:"Row properties",data:A,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},t(z)],onsubmit:B})}else{n.windowManager.open({title:"Row properties",data:A,body:y,onsubmit:B})}}}});h("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(i,k){var j;return function(Q){var n="mce-resize-bar",ad="mce-resize-bar-row",X="row-resize",T="data-row",J="data-initial-top",aa="mce-resize-bar-col",aE="col-resize",p="data-col",aj="data-initial-left",ay=4,s=10,E=10,R="mce-resize-bar-dragging";var ag=new RegExp(/(\d+(\.\d+)?%)/),C=new RegExp(/px|em/);var am,u,aw,aF,H,G;function ai(aL,aM){return{index:aL,y:Q.dom.getPos(aM).y}}function t(aL,aM){return{index:aL,y:Q.dom.getPos(aM).y+aM.offsetHeight}}function P(aM,aL){return{index:aM,x:Q.dom.getPos(aL).x}}function ak(aM,aL){return{index:aM,x:Q.dom.getPos(aL).x+aL.offsetWidth}}function D(){var aL=Q.getBody().dir;return aL==="rtl"}function M(){return Q.inline}function aB(){return M?Q.getBody().ownerDocument.body:Q.getBody()}function V(aM,aL){return D()?ak(aM,aL):P(aM,aL)}function Z(aM,aL){return D()?P(aM,aL):ak(aM,aL)}function aI(aL,aM){return L(aL,"width")/L(aM,"width")*100}function L(aM,aO){var aL=Q.dom.getStyle(aM,aO,true);var aN=parseInt(aL,10);return aN}function K(aN){var aL=L(aN,"width");var aM=L(aN.parentElement,"width");return aL/aM*100}function q(aM,aN){var aL=L(aM,"width");return aN/aL*100}function ac(aM,aN){var aL=L(aM.parentElement,"width");return aN/aL*100}function aq(aQ,aR,aL){var aO=[];for(var aN=1;aN<aL.length;aN++){var aP=aL[aN].element;aO.push(aQ(aN-1,aP))}var aM=aL[aL.length-1];aO.push(aR(aL.length-1,aM.element));return aO}function aK(){var aL=Q.dom.select("."+n,aB());i.each(aL,function(aM){Q.dom.remove(aM)})}function I(aL){aK();ah(aL)}function aA(aN,aS,aM,aR,aT,aL,aO,aP){var aQ={"data-mce-bogus":"all","class":n+" "+aN,unselectable:"on","data-mce-resize":false,style:"cursor: "+aS+"; margin: 0; padding: 0; position: absolute; left: "+aM+"px; top: "+aR+"px; height: "+aT+"px; width: "+aL+"px; "};aQ[aO]=aP;return aQ}function ar(aM,aL,aN){i.each(aM,function(aP){var aS=aN.x,aR=aP.y-ay/2,aO=ay,aQ=aL;Q.dom.add(aB(),"div",aA(ad,X,aS,aR,aO,aQ,T,aP.index))})}function z(aM,aL,aN){i.each(aM,function(aP){var aS=aP.x-ay/2,aR=aN.y,aO=aL,aQ=ay;Q.dom.add(aB(),"div",aA(aa,aE,aS,aR,aO,aQ,p,aP.index))})}function W(aL){return i.map(aL.rows,function(aN){var aM=i.map(aN.cells,function(aO){var aP=aO.hasAttribute("rowspan")?parseInt(aO.getAttribute("rowspan"),10):1;var aQ=aO.hasAttribute("colspan")?parseInt(aO.getAttribute("colspan"),10):1;return{element:aO,rowspan:aP,colspan:aQ}});return{element:aN,cells:aM}})}function U(aS){function aR(aV,aU){return aV+","+aU}function aL(aV,aU){return aM[aR(aV,aU)]}function aN(){var aU=[];i.each(aT,function(aV){aU=aU.concat(aV.cells)});return aU}function aP(){return aT}var aM={};var aT=[];var aQ=0;var aO=0;i.each(aS,function(aV,aW){var aU=[];i.each(aV.cells,function(aX){var a3=0;while(aM[aR(aW,a3)]!==g){a3++}var a1={element:aX.element,colspan:aX.colspan,rowspan:aX.rowspan,rowIndex:aW,colIndex:a3};for(var aZ=0;aZ<aX.colspan;aZ++){for(var aY=0;aY<aX.rowspan;aY++){var a0=aW+aY;var a2=a3+aZ;aM[aR(a0,a2)]=a1;aQ=Math.max(aQ,a0+1);aO=Math.max(aO,a2+1)}}aU.push(a1)});aT.push({element:aV.element,cells:aU})});return{grid:{maxRows:aQ,maxCols:aO},getAt:aL,getAllCells:aN,getAllRows:aP}}function N(aO,aL){var aN=[];for(var aM=aO;aM<aL;aM++){aN.push(aM)}return aN}function x(aM,aQ,aO){var aN=aM();var aP;for(var aL=0;aL<aN.length;aL++){if(aQ(aN[aL])){aP=aN[aL]}}return aP?aP:aO()}function Y(aL){var aN=N(0,aL.grid.maxCols);var aM=N(0,aL.grid.maxRows);return i.map(aN,function(aO){function aP(){var aT=[];for(var aS=0;aS<aM.length;aS++){var aU=aL.getAt(aS,aO);if(aU&&aU.colIndex===aO){aT.push(aU)}}return aT}function aR(aS){return aS.colspan===1}function aQ(){var aT;for(var aS=0;aS<aM.length;aS++){aT=aL.getAt(aS,aO);if(aT){return aT}}return null}return x(aP,aR,aQ)})}function ae(aL){var aN=N(0,aL.grid.maxCols);var aM=N(0,aL.grid.maxRows);return i.map(aM,function(aR){function aO(){var aT=[];for(var aS=0;aS<aN.length;aS++){var aU=aL.getAt(aR,aS);if(aU&&aU.rowIndex===aR){aT.push(aU)}}return aT}function aQ(aS){return aS.rowspan===1}function aP(){return aL.getAt(aR,0)}return x(aO,aQ,aP)})}function ah(aO){var aL=W(aO);var aN=U(aL);var aP=ae(aN);var aS=Y(aN);var aR=Q.dom.getPos(aO);var aM=aP.length>0?aq(ai,t,aP):[];var aQ=aS.length>0?aq(V,Z,aS):[];ar(aM,aO.offsetWidth,aR);z(aQ,aO.offsetHeight,aR)}function aJ(aV,aS,aL,aW){if(aS<0||aS>=aV.length-1){return""}var aU=aV[aS];if(aU){aU={value:aU,delta:0}}else{var aN=aV.slice(0,aS).reverse();for(var aQ=0;aQ<aN.length;aQ++){if(aN[aQ]){aU={value:aN[aQ],delta:aQ+1}}}}var aR=aV[aS+1];if(aR){aR={value:aR,delta:1}}else{var aM=aV.slice(aS+1);for(var aP=0;aP<aM.length;aP++){if(aM[aP]){aR={value:aM[aP],delta:aP+1}}}}var aO=aR.delta-aU.delta;var aT=Math.abs(aR.value-aU.value)/aO;return aL?aT/L(aW,"width")*100:aT}function aC(aM,aN){var aL=Q.dom.getStyle(aM,aN);if(!aL){aL=Q.dom.getAttrib(aM,aN)}if(!aL){aL=Q.dom.getStyle(aM,aN,true)}return aL}function o(aN,aQ,aO){var aM=aC(aN,"width");var aP=parseInt(aM,10);var aL=aQ?aI(aN,aO):L(aN,"width");if(aQ&&!aD(aM)||!aQ&&!O(aM)){aP=0}return !isNaN(aP)&&aP>0?aP:aL}function aH(aR,aL,aT){var aP=Y(aR);var aQ=i.map(aP,function(aU){return V(aU.colIndex,aU.element).x});var aN=[];for(var aO=0;aO<aP.length;aO++){var aS=aP[aO].element.hasAttribute("colspan")?parseInt(aP[aO].element.getAttribute("colspan"),10):1;var aM=aS>1?aJ(aQ,aO):o(aP[aO].element,aL,aT);aM=aM?aM:s;aN.push(aM)}return aN}function at(aM){var aL=aC(aM,"height");var aN=parseInt(aL,10);if(aD(aL)){aN=0}return !isNaN(aN)&&aN>0?aN:L(aM,"height")}function af(aM){var aR=ae(aM);var aP=i.map(aR,function(aS){return ai(aS.rowIndex,aS.element).y});var aQ=[];for(var aN=0;aN<aR.length;aN++){var aO=aR[aN].element.hasAttribute("rowspan")?parseInt(aR[aN].element.getAttribute("rowspan"),10):1;var aL=aO>1?aJ(aP,aN):at(aR[aN].element);aL=aL?aL:E;aQ.push(aL)}return aQ}function aG(aU,aO,aN,aP,aL){var aV=aU.slice(0);function aQ(aW){return i.map(aW,function(){return 0})}function aT(){var aX;if(aL){aX=[100-aV[0]]}else{var aW=Math.max(aP,aV[0]+aN);aX=[aW-aV[0]]}return aX}function aR(aX,aZ){var a2=aQ(aV.slice(0,aX));var a0=aQ(aV.slice(aZ+1));var a1;if(aN>=0){var aW=Math.max(aP,aV[aZ]-aN);a1=a2.concat([aN,aW-aV[aZ]]).concat(a0)}else{var a3=Math.max(aP,aV[aX]+aN);var aY=aV[aX]-a3;a1=a2.concat([a3-aV[aX],aY]).concat(a0)}return a1}function aS(aY,aW){var a0=aQ(aV.slice(0,aW));var aZ;if(aN>=0){aZ=a0.concat([aN])}else{var aX=Math.max(aP,aV[aW]+aN);aZ=a0.concat([aX-aV[aW]])}return aZ}var aM;if(aU.length===0){aM=[]}else{if(aU.length===1){aM=aT()}else{if(aO===0){aM=aR(0,1)}else{if(aO>0&&aO<aU.length-1){aM=aR(aO,aO+1)}else{if(aO===aU.length-1){aM=aS(aO-1,aO)}else{aM=[]}}}}}return aM}function y(aP,aL,aO){var aN=0;for(var aM=aP;aM<aL;aM++){aN+=aO[aM]}return aN}function F(aL,aN){var aM=aL.getAllCells();return i.map(aM,function(aO){var aP=y(aO.colIndex,aO.colIndex+aO.colspan,aN);return{element:aO.element,width:aP,colspan:aO.colspan}})}function ax(aL,aN){var aM=aL.getAllCells();return i.map(aM,function(aP){var aO=y(aP.rowIndex,aP.rowIndex+aP.rowspan,aN);return{element:aP.element,height:aO,rowspan:aP.rowspan}})}function au(aL,aN){var aM=aL.getAllRows();return i.map(aM,function(aP,aO){return{element:aP.element,height:aN[aO]}})}function aD(aL){return ag.test(aL)}function O(aL){return C.test(aL)}function az(a0,a1,aP){var a2=W(a0);var aN=U(a2);function aT(a4,a3){i.each(a4,function(a5){Q.dom.setStyle(a5.element,"width",a5.width+a3);Q.dom.setAttrib(a5.element,"width",null)})}function aY(){return aP<aN.grid.maxCols-1?K(a0):K(a0)+ac(a0,a1)}function aM(){return aP<aN.grid.maxCols-1?L(a0,"width"):L(a0,"width")+a1}function aL(a5,a4,a3){if(aP==aN.grid.maxCols-1||!a3){Q.dom.setStyle(a0,"width",a5+a4);Q.dom.setAttrib(a0,"width",null)}}var aS=aD(a0.width)||aD(a0.style.width);var aU=aH(aN,aS,a0);var aO=aS?q(a0,a1):a1;var aQ=aG(aU,aP,aO,s,aS,a0);var aV=[];for(var aX=0;aX<aQ.length;aX++){aV.push(aQ[aX]+aU[aX])}var aZ=F(aN,aV);var aW=aS?"%":"px";var aR=aS?aY():aM();Q.undoManager.transact(function(){aT(aZ,aW);aL(aR,aW,aS)})}function ap(aV,aS,aO){var aT=W(aV);var aQ=U(aT);var aP=af(aQ);var aR=[],aM=0;for(var aN=0;aN<aP.length;aN++){aR.push(aN===aO?aS+aP[aN]:aP[aN]);aM+=aM[aN]}var aL=ax(aQ,aR);var aU=au(aQ,aR);Q.undoManager.transact(function(){i.each(aU,function(aW){Q.dom.setStyle(aW.element,"height",aW.height+"px");Q.dom.setAttrib(aW.element,"height",null)});i.each(aL,function(aW){Q.dom.setStyle(aW.element,"height",aW.height+"px");Q.dom.setAttrib(aW.element,"height",null)});Q.dom.setStyle(aV,"height",aM+"px");Q.dom.setAttrib(aV,"height",null)})}function r(){am=setTimeout(function(){S()},200)}function w(){clearTimeout(am)}function av(){var aL=document.createElement("div");aL.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;");aL.setAttribute("data-mce-bogus","all");return aL}function A(aL,aM){Q.dom.bind(aL,"mouseup",function(){S()});Q.dom.bind(aL,"mousemove",function(aN){w();if(u){aM(aN)}});Q.dom.bind(aL,"mouseout",function(){r()})}function S(){Q.dom.remove(aw);if(u){Q.dom.removeClass(aF,R);u=false;var aN,aQ;if(ab(aF)){var aL=parseInt(Q.dom.getAttrib(aF,aj),10);var aO=Q.dom.getPos(aF).x;aN=parseInt(Q.dom.getAttrib(aF,p),10);aQ=D()?aL-aO:aO-aL;az(j,aQ,aN)}else{if(l(aF)){var aP=parseInt(Q.dom.getAttrib(aF,J),10);var aM=Q.dom.getPos(aF).y;aN=parseInt(Q.dom.getAttrib(aF,T),10);aQ=aM-aP;ap(j,aQ,aN)}}I(j);Q.nodeChanged()}}function B(aM,aL){aw=aw?aw:av();u=true;Q.dom.addClass(aM,R);aF=aM;A(aw,aL);Q.dom.add(aB(),aw)}function ab(aL){return Q.dom.hasClass(aL,aa)}function l(aL){return Q.dom.hasClass(aL,ad)}function an(aM){H=H!==g?H:aM.clientX;var aL=aM.clientX-H;H=aM.clientX;var aN=Q.dom.getPos(aF).x;Q.dom.setStyle(aF,"left",aN+aL+"px")}function al(aN){G=G!==g?G:aN.clientY;var aL=aN.clientY-G;G=aN.clientY;var aM=Q.dom.getPos(aF).y;Q.dom.setStyle(aF,"top",aM+aL+"px")}function ao(aL){H=g;B(aL,an)}function m(aL){G=g;B(aL,al)}function v(aP){var aO=aP.target,aL=Q.getBody();if(!Q.$.contains(aL,j)&&j!==aL){return}if(ab(aO)){aP.preventDefault();var aM=Q.dom.getPos(aO).x;Q.dom.setAttrib(aO,aj,aM);ao(aO)}else{if(l(aO)){aP.preventDefault();var aN=Q.dom.getPos(aO).y;Q.dom.setAttrib(aO,J,aN);m(aO)}else{aK()}}}Q.on("init",function(){Q.dom.bind(aB(),"mousedown",v)});Q.on("ObjectResized",function(aN){var aM=aN.target;if(aM.nodeName==="TABLE"){var aL=[];i.each(aM.rows,function(aO){i.each(aO.cells,function(aP){var aQ=Q.dom.getStyle(aP,"width",true);aL.push({cell:aP,width:aQ})})});i.each(aL,function(aO){Q.dom.setStyle(aO.cell,"width",aO.width);Q.dom.setAttrib(aO.cell,"width",null)})}});Q.on("mouseover",function(aL){if(!u){var aM=Q.dom.getParent(aL.target,"table");if(aL.target.nodeName==="TABLE"||aM){j=aM;I(aM)}}});Q.on("keydown",function(aL){switch(aL.keyCode){case k.LEFT:case k.RIGHT:case k.UP:case k.DOWN:aK();break}});Q.on("remove",function(){aK();Q.dom.unbind(aB(),"mousedown",v)});return{adjustWidth:az,adjustHeight:ap,clearBars:aK,drawBars:ah,determineDeltas:aG,getTableGrid:U,getTableDetails:W,getWidths:aH,getPixelHeights:af,isPercentageBasedSize:aD,isPixelBasedSize:O,recalculateWidths:F,recalculateCellHeights:ax,recalculateRowHeights:au}}});h("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(r,q,s,o,k,i,p,l,j){var n=i.each;function m(u){var F,D=this,H=new o(u),B;if(u.settings.object_resizing&&u.settings.table_resize_bars!==false&&(u.settings.object_resizing===true||u.settings.object_resizing==="table")){B=k(u)}function E(M){return function(){u.execCommand(M)}}function A(Q,P){var R,M,O,N;O='<table id="__mce"><tbody>';for(R=0;R<P;R++){O+="<tr>";for(M=0;M<Q;M++){O+="<td>"+(l.ie&&l.ie<10?"&nbsp;":"<br>")+"</td>"}O+="</tr>"}O+="</tbody></table>";u.undoManager.transact(function(){u.insertContent(O);N=u.dom.get("__mce");u.dom.setAttrib(N,"id",null);u.$("tr",N).each(function(S,T){u.fire("newrow",{node:T});u.$("th,td",T).each(function(V,U){u.fire("newcell",{node:U})})});u.dom.setAttribs(N,u.settings.table_default_attributes||{});u.dom.setStyles(N,u.settings.table_default_styles||{})});return N}function J(N,M,P){function O(){var T,Q,U={},R=0,S;Q=u.dom.select("td[data-mce-selected],th[data-mce-selected]");T=Q[0];if(!T){T=u.selection.getStart()}if(P&&Q.length>0){n(Q,function(V){return U[V.parentNode.parentNode.nodeName]=1});n(U,function(V){R+=V});S=R!==1}else{S=!u.dom.getParent(T,M)}N.disabled(S);u.selection.selectorChanged(M,function(V){N.disabled(!V)})}if(u.initialized){O()}else{u.on("init",O)}}function C(){J(this,"table")}function x(){J(this,"td,th")}function I(){J(this,"td,th",true)}function w(){var N="";N='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var O=0;O<10;O++){N+="<tr>";for(var M=0;M<10;M++){N+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(O*10+M)+'" href="#" data-mce-x="'+M+'" data-mce-y="'+O+'"></a></td>'}N+="</tr>"}N+="</table>";N+='<div class="mce-text-center" role="presentation">1 x 1</div>';return N}function y(P,N,O){var U=O.getEl().getElementsByTagName("table")[0];var S,R,V,T,M;var Q=O.isRtl()||O.parent().rel=="tl-tr";U.nextSibling.innerHTML=(P+1)+" x "+(N+1);if(Q){P=9-P}for(R=0;R<10;R++){for(S=0;S<10;S++){T=U.rows[R].childNodes[S].firstChild;M=(Q?S>=P:S<=P)&&R<=N;u.dom.toggleClass(T,"mce-active",M);if(M){V=T}}}return V.parentNode}if(u.settings.table_grid===false){u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:H.table})}else{u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(M){if(M.aria){this.parent().hideAll();M.stopImmediatePropagation();H.table()}},onshow:function(){y(0,0,this.menu.items()[0])},onhide:function(){var M=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(M,"mce-active");u.dom.addClass(M[0],"mce-active")},menu:[{type:"container",html:w(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(O){var N=O.target,M,P;if(N.tagName.toUpperCase()=="A"){M=parseInt(N.getAttribute("data-mce-x"),10);P=parseInt(N.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel=="tl-tr"){M=9-M}if(M!==this.lastX||P!==this.lastY){y(M,P,O.control);this.lastX=M;this.lastY=P}}},onclick:function(N){var M=this;if(N.target.tagName.toUpperCase()=="A"){N.preventDefault();N.stopPropagation();M.parent().cancel();u.undoManager.transact(function(){A(M.lastX+1,M.lastY+1)});u.addVisual()}}}]})}u.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:C,onclick:H.tableProps});u.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:C,cmd:"mceTableDelete"});u.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:E("mceTableCellProps"),onPostRender:x},{text:"Merge cells",onclick:E("mceTableMergeCells"),onPostRender:I},{text:"Split cell",onclick:E("mceTableSplitCells"),onPostRender:x}]});u.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:E("mceTableInsertRowBefore"),onPostRender:x},{text:"Insert row after",onclick:E("mceTableInsertRowAfter"),onPostRender:x},{text:"Delete row",onclick:E("mceTableDeleteRow"),onPostRender:x},{text:"Row properties",onclick:E("mceTableRowProps"),onPostRender:x},{text:"-"},{text:"Cut row",onclick:E("mceTableCutRow"),onPostRender:x},{text:"Copy row",onclick:E("mceTableCopyRow"),onPostRender:x},{text:"Paste row before",onclick:E("mceTablePasteRowBefore"),onPostRender:x},{text:"Paste row after",onclick:E("mceTablePasteRowAfter"),onPostRender:x}]});u.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:E("mceTableInsertColBefore"),onPostRender:x},{text:"Insert column after",onclick:E("mceTableInsertColAfter"),onPostRender:x},{text:"Delete column",onclick:E("mceTableDeleteCol"),onPostRender:x}]});var L=[];n("inserttable tableprops deletetable | cell row column".split(" "),function(M){if(M=="|"){L.push({text:"-"})}else{L.push(u.menuItems[M])}});u.addButton("table",{type:"menubutton",title:"Table",menu:L});if(!l.isIE){u.on("click",function(M){M=M.target;if(M.nodeName==="TABLE"){u.selection.select(M);u.nodeChanged()}})}D.quirks=new q(u);u.on("Init",function(){D.cellSelection=new s(u,function(M){if(M){B.clearBars()}});D.resizeBars=B});u.on("PreInit",function(){u.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(M,N){var O=M.length;while(O--){M[O].attr(N,null)}})});n({mceTableSplitCells:function(M){M.split()},mceTableMergeCells:function(N){var M;M=u.dom.getParent(u.selection.getStart(),"th,td");if(!u.dom.select("td[data-mce-selected],th[data-mce-selected]").length){H.merge(N,M)}else{N.merge()}},mceTableInsertRowBefore:function(M){M.insertRow(true)},mceTableInsertRowAfter:function(M){M.insertRow()},mceTableInsertColBefore:function(M){M.insertCol(true)},mceTableInsertColAfter:function(M){M.insertCol()},mceTableDeleteCol:function(M){M.deleteCols()},mceTableDeleteRow:function(M){M.deleteRows()},mceTableCutRow:function(M){F=M.cutRows()},mceTableCopyRow:function(M){F=M.copyRows()},mceTablePasteRowBefore:function(M){M.pasteRows(F,true)},mceTablePasteRowAfter:function(M){M.pasteRows(F)},mceTableDelete:function(M){if(B){B.clearBars()}M.deleteTable()}},function(N,M){u.addCommand(M,function(){var O=new r(u);if(O){N(O);u.execCommand("mceRepaint");D.cellSelection.clear()}})});n({mceInsertTable:H.table,mceTableProps:function(){H.table(true)},mceTableRowProps:H.row,mceTableCellProps:H.cell},function(N,M){u.addCommand(M,function(O,P){N(P)})});function t(){u.addButton("tableprops",{title:"Table properties",onclick:H.tableProps,icon:"table"});u.addButton("tabledelete",{title:"Delete table",onclick:E("mceTableDelete")});u.addButton("tablecellprops",{title:"Cell properties",onclick:E("mceTableCellProps")});u.addButton("tablemergecells",{title:"Merge cells",onclick:E("mceTableMergeCells")});u.addButton("tablesplitcells",{title:"Split cell",onclick:E("mceTableSplitCells")});u.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:E("mceTableInsertRowBefore")});u.addButton("tableinsertrowafter",{title:"Insert row after",onclick:E("mceTableInsertRowAfter")});u.addButton("tabledeleterow",{title:"Delete row",onclick:E("mceTableDeleteRow")});u.addButton("tablerowprops",{title:"Row properties",onclick:E("mceTableRowProps")});u.addButton("tablecutrow",{title:"Cut row",onclick:E("mceTableCutRow")});u.addButton("tablecopyrow",{title:"Copy row",onclick:E("mceTableCopyRow")});u.addButton("tablepasterowbefore",{title:"Paste row before",onclick:E("mceTablePasteRowBefore")});u.addButton("tablepasterowafter",{title:"Paste row after",onclick:E("mceTablePasteRowAfter")});u.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:E("mceTableInsertColBefore")});u.addButton("tableinsertcolafter",{title:"Insert column after",onclick:E("mceTableInsertColAfter")});u.addButton("tabledeletecol",{title:"Delete column",onclick:E("mceTableDeleteCol")})}function K(N){var M=u.dom.is(N,"table")&&u.getBody().contains(N);return M}function G(){var M=u.settings.table_toolbar;if(M===""||M===false){return}if(!M){M="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}u.addContextToolbar(K,M)}function v(){return F}function z(M){F=M}t();G();if(u.settings.table_tab_navigation!==false){u.on("keydown",function(O){var N,M,P;if(O.keyCode==9){N=u.dom.getParent(u.selection.getStart(),"th,td");if(N){O.preventDefault();M=new r(u);P=O.shiftKey?-1:1;u.undoManager.transact(function(){if(!M.moveRelIdx(N,P)&&P>0){M.insertRow();M.refresh();M.moveRelIdx(N,P)}})}}})}D.insertTable=A;D.setClipboardRows=z;D.getClipboardRows=v}j.add("table",m)})})(this);