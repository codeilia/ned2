tinymce.PluginManager.add("contextmenu",function(b){var c,a=b.settings.contextmenu_never_use_native;b.on("contextmenu",function(j){var g,h=b.getDoc();if(j.ctrlKey&&!a){return}j.preventDefault();if(tinymce.Env.mac&&tinymce.Env.webkit){if(j.button==2&&h.caretRangeFromPoint){b.selection.setRng(h.caretRangeFromPoint(j.x,j.y))}}g=b.settings.contextmenu||"link image inserttable | cell row column deletetable";if(!c){var d=[];tinymce.each(g.split(/[ ,]/),function(e){var i=b.menuItems[e];if(e=="|"){i={text:e}}if(i){i.shortcut="";d.push(i)}});for(var f=0;f<d.length;f++){if(d[f].text=="|"){if(f===0||f==d.length-1){d.splice(f,1)}}}c=new tinymce.ui.Menu({items:d,context:"contextmenu",classes:"contextmenu"}).renderTo();b.on("remove",function(){c.remove();c=null})}else{c.show()}var k={x:j.pageX,y:j.pageY};if(!b.inline){k=tinymce.DOM.getPos(b.getContentAreaContainer());k.x+=j.clientX;k.y+=j.clientY}c.moveTo(k.x,k.y)})});