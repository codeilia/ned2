(function(b,g){var d={};function c(m,n){var l,j=[];for(var k=0;k<m.length;++k){l=d[m[k]]||e(m[k]);if(!l){throw"module definition dependecy not found: "+m[k]}j.push(l)}n.apply(null,j)}function h(k,j,i){if(typeof k!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(j===g){throw"invalid module definition, dependencies must be specified"}if(i===g){throw"invalid module definition, definition function must be specified"}c(j,function(){d[k]=i.apply(null,arguments)})}function f(i){return !!d[i]}function e(l){var j=b;var i=l.split(/[.\/]/);for(var k=0;k<i.length;++k){if(!j[i[k]]){return}j=j[i[k]]}return j}function a(l){var k,n,p,j,m;for(k=0;k<l.length;k++){n=b;p=l[k];j=p.split(/[.\/]/);for(var o=0;o<j.length-1;++o){if(n[j[o]]===g){n[j[o]]={}}n=n[j[o]]}n[j[j.length-1]]=d[p]}if(b.AMDLC_TESTS){m=b.privateModules||{};for(p in d){m[p]=d[p]}for(k=0;k<l.length;k++){delete m[l[k]]}b.privateModules=m}}h("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(i,o,l){function k(q,p){i.each(p,function(r){if(r.constructor==RegExp){q=q.replace(r,"")}else{q=q.replace(r[0],r[1])}});return q}function m(s){var u=new l(),w=new o({},u),v="";var r=u.getShortEndedElements();var q=i.makeMap("script noscript style textarea video audio iframe object"," ");var t=u.getBlockElements();function p(z){var x=z.name,y=z;if(x==="br"){v+="\n";return}if(r[x]){v+=" "}if(q[x]){v+=" ";return}if(z.type==3){v+=z.value}if(!z.shortEnded){if((z=z.firstChild)){do{p(z)}while((z=z.next))}}if(t[x]&&y.next){v+="\n";if(x=="p"){v+="\n"}}}s=k(s,[/<!\[[^\]]+\]>/g]);p(w.parse(s));return v}function j(p){function q(t,s,r){if(!s&&!r){return" "}return"\u00a0"}p=k(p,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,q],/<br class="Apple-interchange-newline">/g,/<br>$/i]);return p}function n(q){var p=0;return function(){return q+(p++)}}return{filter:k,innerText:m,trimHtml:j,createIdGenerator:n}});h("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(m){var o=function(s){return/^https?:\/\/[\w\?\-\/+=.&%]+$/i.test(s)};var p=function(s){return o(s)&&/.(gif|jpe?g|png)$/.test(s)};var l=function(u,t,s){u.undoManager.extra(function(){s(u,t)},function(){u.insertContent('<img src="'+t+'">')});return true};var n=function(u,t,s){u.undoManager.extra(function(){s(u,t)},function(){u.execCommand("mceInsertLink",false,t)});return true};var q=function(u,t,s){return u.selection.isCollapsed()===false&&o(t)?n(u,t,s):false};var r=function(u,t,s){return p(t)?l(u,t,s):false};var k=function(t,s){t.insertContent(s,{merge:t.settings.paste_merge_formats!==false,paste:true});return true};var j=function(t,s){m.each([q,r,k],function(u){return u(t,s,k)!==true})};var i=function(t,s){if(t.settings.smart_paste===false){k(t,s)}else{j(t,s)}};return{isImageUrl:p,isAbsoluteUrl:o,insertContent:i}});h("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(i,k,m,l,j,n){return function(v){var F=this,r,K,q=0,J=false;var w="%MCEPASTEBIN%",L;var x="data:text/mce-internal,";var z=l.createIdGenerator("mceclip");function H(R){var Q,S=v.dom;Q=v.fire("BeforePastePreProcess",{content:R});Q=v.fire("PastePreProcess",Q);R=Q.content;if(!Q.isDefaultPrevented()){if(v.hasEventListeners("PastePostProcess")&&!Q.isDefaultPrevented()){var P=S.add(v.getBody(),"div",{style:"display:none"},R);Q=v.fire("PastePostProcess",{node:P});S.remove(P);R=Q.node.innerHTML}if(!Q.isDefaultPrevented()){j.insertContent(v,R)}}}function I(S){S=v.dom.encode(S).replace(/\r\n/g,"\n");var Q=v.dom.getParent(v.selection.getStart(),v.dom.isBlock);var P=v.settings.forced_root_block;var R;if(P){R=v.dom.createHTML(P,v.settings.forced_root_block_attrs);R=R.substr(0,R.length-3)+">"}if((Q&&/^(PRE|DIV)$/.test(Q.nodeName))||!P){S=l.filter(S,[[/\n/g,"<br>"]])}else{S=l.filter(S,[[/\n\n/g,"</p>"+R],[/^(.*<\/p>)(<p>)$/,R+"$1"],[/\n/g,"<br />"]]);if(S.indexOf("<p>")!=-1){S=R+S}}H(S)}function y(){var R=v.dom,S=v.getBody();var T=v.dom.getViewPort(v.getWin()),Q=T.y,V=20;var X;K=v.selection.getRng();if(v.inline){X=v.selection.getScrollContainer();if(X&&X.scrollTop>0){Q=X.scrollTop}}function U(Z){var aa,ac,ab,Y=Z.startContainer;aa=Z.getClientRects();if(aa.length){return aa[0]}if(!Z.collapsed||Y.nodeType!=1){return}ab=Y.childNodes[K.startOffset];while(ab&&ab.nodeType==3&&!ab.data.length){ab=ab.nextSibling}if(!ab){return}if(ab.tagName=="BR"){ac=R.doc.createTextNode("\uFEFF");ab.parentNode.insertBefore(ac,ab);Z=R.createRng();Z.setStartBefore(ac);Z.setEndAfter(ac);aa=Z.getClientRects();R.remove(ac)}if(aa.length){return aa[0]}}if(K.getClientRects){var W=U(K);if(W){V=Q+(W.top-R.getPos(S).y)}else{V=Q;var P=K.startContainer;if(P){if(P.nodeType==3&&P.parentNode!=S){P=P.parentNode}if(P.nodeType==1){V=R.getPos(P,X||S).y}}}}r=R.add(v.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+V+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},w);if(i.ie||i.gecko){R.setStyle(r,"left",R.getStyle(S,"direction",true)=="rtl"?65535:-65535)}R.bind(r,"beforedeactivate focusin focusout",function(Y){Y.stopPropagation()});r.focus();v.selection.select(r,true)}function O(){if(r){var P;while((P=v.dom.get("mcepastebin"))){v.dom.remove(P);v.dom.unbind(P)}if(K){v.selection.setRng(K)}}r=K=null}function N(){var S="",Q,R,T,P;Q=v.dom.select("div[id=mcepastebin]");for(R=0;R<Q.length;R++){T=Q[R];if(T.firstChild&&T.firstChild.id=="mcepastebin"){T=T.firstChild}P=T.innerHTML;if(S!=w){S+=P}}return S}function C(R){var P={};if(R){if(R.getData){var T=R.getData("Text");if(T&&T.length>0){if(T.indexOf(x)==-1){P["text/plain"]=T}}}if(R.types){for(var Q=0;Q<R.types.length;Q++){var S=R.types[Q];P[S]=R.getData(S)}}}return P}function D(P){return C(P.clipboardData||v.getDoc().dataTransfer)}function p(P){return E(P,"text/html")||E(P,"text/plain")}function t(Q){var P;P=Q.indexOf(",");if(P!==-1){return Q.substr(P+1)}return null}function A(P,Q){return P.images_dataimg_filter?P.images_dataimg_filter(Q):true}function u(R,V,Q){if(R){v.selection.setRng(R);R=null}var X=V.result;var W=t(X);var U=new Image();U.src=X;if(A(v.settings,U)){var T=v.editorUpload.blobCache;var P,S;S=T.findFirst(function(Y){return Y.base64()===W});if(!S){P=T.create(z(),Q,W);T.add(P)}else{P=S}H('<img src="'+P.blobUri()+'">')}else{H('<img src="'+X+'">')}}function B(S,Q){var R=S.clipboardData||S.dataTransfer;function P(V){var W,X,T,Y=false;if(V){for(W=0;W<V.length;W++){X=V[W];if(/^image\/(jpeg|png|gif|bmp)$/.test(X.type)){var U=X.getAsFile?X.getAsFile():X;T=new FileReader();T.onload=u.bind(null,Q,T,U);T.readAsDataURL(U);S.preventDefault();Y=true}}}return Y}if(v.settings.paste_data_images&&R){return P(R.items)||P(R.files)}}function G(P){var Q=P.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&Q&&Q.items&&Q.items.length===0}function o(P){return k.getCaretRangeFromPoint(P.clientX,P.clientY,v.getDoc())}function E(P,Q){return Q in P&&P[Q].length>0}function M(P){return(m.metaKeyPressed(P)&&P.keyCode==86)||(P.shiftKey&&P.keyCode==45)}function s(){v.on("keydown",function(S){function T(U){if(M(U)&&!U.isDefaultPrevented()){O()}}if(M(S)&&!S.isDefaultPrevented()){L=S.shiftKey&&S.keyCode==86;if(L&&i.webkit&&navigator.userAgent.indexOf("Version/")!=-1){return}S.stopImmediatePropagation();q=new Date().getTime();if(i.ie&&L){S.preventDefault();v.fire("paste",{ieFake:true});return}O();y();v.once("keyup",T);v.once("paste",function(){v.off("keyup",T)})}});function R(V,S,T){var U;if(E(V,"text/html")){U=V["text/html"]}else{U=N();if(U==w){T=true}}U=l.trimHtml(U);if(r&&r.firstChild&&r.firstChild.id==="mcepastebin"){T=true}O();if(!U.length){T=true}if(T){if(E(V,"text/plain")&&U.indexOf("</p>")==-1){U=V["text/plain"]}else{U=l.innerText(U)}}if(U==w){if(!S){v.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")}return}if(T){I(U)}else{H(U)}}var P=function(){return K||v.selection.getRng()};v.on("paste",function(W){var X=new Date().getTime();var V=D(W);var T=new Date().getTime()-X;var S=(new Date().getTime()-q-T)<1000;var U=F.pasteFormat=="text"||L;L=false;if(W.isDefaultPrevented()||G(W)){O();return}if(!p(V)&&B(W,P())){O();return}if(!S){W.preventDefault()}if(i.ie&&(!S||W.ieFake)){y();v.dom.bind(r,"paste",function(Y){Y.stopPropagation()});v.getDoc().execCommand("Paste",false,null);V["text/html"]=N()}if(E(V,"text/html")){W.preventDefault();R(V,S,U)}else{n.setEditorTimeout(v,function(){R(V,S,U)},0)}});v.on("dragstart dragend",function(S){J=S.type=="dragstart"});function Q(S){return S["text/plain"].indexOf("file://")===0}v.on("drop",function(V){var T,S;S=o(V);if(V.isDefaultPrevented()||J){return}T=C(V.dataTransfer);if((!p(T)||Q(T))&&B(V,S)){return}if(S&&v.settings.paste_filter_drop!==false){var U=T["mce-internal"]||T["text/html"]||T["text/plain"];if(U){V.preventDefault();n.setEditorTimeout(v,function(){v.undoManager.transact(function(){if(T["mce-internal"]){v.execCommand("Delete")}v.selection.setRng(S);U=l.trimHtml(U);if(!T["text/html"]){I(U)}else{H(U)}})})}}});v.on("dragover dragend",function(S){if(v.settings.paste_data_images){S.preventDefault()}})}F.pasteHtml=H;F.pasteText=I;F.pasteImageData=B;v.on("preInit",function(){s();v.parser.addNodeFilter("img",function(R,Q,W){function X(Y){return Y.data&&Y.data.paste===true}function V(Y){if(!Y.attr("data-mce-object")&&P!==i.transparentSrc){Y.remove()}}function S(Y){return Y.indexOf("webkit-fake-url")===0}function T(Y){return Y.indexOf("data:")===0}if(!v.settings.paste_data_images&&X(W)){var U=R.length;while(U--){var P=R[U].attributes.map.src;if(!P){continue}if(S(P)){V(R[U])}else{if(!v.settings.allow_html_data_urls&&T(P)){V(R[U])}}}}})})}});h("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(i,r,l,n,m,k){function q(s){return((/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i).test(s)||(/class="OutlineElement/).test(s)||(/id="?docs\-internal\-guid\-/.test(s)))}function j(u){var t,s;s=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];u=u.replace(/^[\u00a0 ]+/,"");i.each(s,function(v){if(v.test(u)){t=true;return false}});return t}function o(s){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(s)}function p(t){var s=t.settings;t.on("BeforePastePreProcess",function(A){var C=A.content,B,x;C=C.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"");C=C.replace(/<br class="?Apple-interchange-newline"?>/gi,"");B=s.paste_retain_style_properties;if(B){x=i.makeMap(B.split(/[, ]/))}function z(K){var H,Q,F=1;function P(T){var S="";if(T.type===3){return T.value}if((T=T.firstChild)){do{S+=P(T)}while((T=T.next))}return S}function N(T,S){if(T.type===3){if(S.test(T.value)){T.value=T.value.replace(S,"");return false}}if((T=T.firstChild)){do{if(!N(T,S)){return false}}while((T=T.next))}return true}function J(S){if(S._listIgnore){S.remove();return}if((S=S.firstChild)){do{J(S)}while((S=S.next))}}function R(S,T,V){var U=S._listLevel||F;if(U!=F){if(U<F){if(H){H=H.parent.parent}}else{Q=H;H=null}}if(!H||H.name!=T){Q=Q||H;H=new m(T,1);if(V>1){H.attr("start",""+V)}S.wrap(H)}else{H.append(S)}S.name="li";if(U>F&&Q){Q.lastChild.append(H)}F=U;J(S);N(S,/^\u00a0+/);N(S,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);N(S,/^\u00a0+/)}var E=[],I=K.firstChild;while(typeof I!=="undefined"&&I!==null){E.push(I);I=I.walk();if(I!==null){while(typeof I!=="undefined"&&I.parent!==K){I=I.walk()}}}for(var L=0;L<E.length;L++){K=E[L];if(K.name=="p"&&K.firstChild){var O=P(K);if(o(O)){R(K,"ul");continue}if(j(O)){var M=/([0-9]+)\./.exec(O);var G=1;if(M){G=parseInt(M[1],10)}R(K,"ol",G);continue}if(K._listLevel){R(K,"ul",1);continue}H=null}else{Q=H;H=null}}}function u(G,E){var I={},H,F=t.dom.parseStyle(E);i.each(F,function(K,J){switch(J){case"mso-list":H=/\w+ \w+([0-9]+)/i.exec(E);if(H){G._listLevel=parseInt(H[1],10)}if(/Ignore/i.test(K)&&G.firstChild){G._listIgnore=true;G.firstChild._listIgnore=true}break;case"horiz-align":J="text-align";break;case"vert-align":J="vertical-align";break;case"font-color":case"mso-foreground":J="color";break;case"mso-background":case"mso-highlight":J="background";break;case"font-weight":case"font-style":if(K!="normal"){I[J]=K}return;case"mso-element":if(/^(comment|comment-list)$/i.test(K)){G.remove();return}break}if(J.indexOf("mso-comment")===0){G.remove();return}if(J.indexOf("mso-")===0){return}if(B=="all"||(x&&x[J])){I[J]=K}});if(/(bold)/i.test(I["font-weight"])){delete I["font-weight"];G.wrap(new m("b",1))}if(/(italic)/i.test(I["font-style"])){delete I["font-style"];G.wrap(new m("i",1))}I=t.dom.serializeStyle(I,G.name);if(I){return I}return null}if(s.paste_enable_default_filters===false){return}if(q(A.content)){A.wordContent=true;C=k.filter(C,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(F,E){return(E.length>0)?E.replace(/./," ").slice(Math.floor(E.length/2)).split("").join("\u00a0"):""}]]);var v=s.paste_word_valid_elements;if(!v){v=("-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}var y=new l({valid_elements:v,valid_children:"-li[p]"});i.each(y.elements,function(E){if(!E.attributes["class"]){E.attributes["class"]={};E.attributesOrder.push("class")}if(!E.attributes.style){E.attributes.style={};E.attributesOrder.push("style")}});var D=new r({},y);D.addAttributeFilter("style",function(E){var F=E.length,G;while(F--){G=E[F];G.attr("style",u(G,G.attr("style")));if(G.name=="span"&&G.parent&&!G.attributes.length){G.unwrap()}}});D.addAttributeFilter("class",function(E){var F=E.length,H,G;while(F--){H=E[F];G=H.attr("class");if(/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(G)){H.remove()}H.attr("class",null)}});D.addNodeFilter("del",function(E){var F=E.length;while(F--){E[F].remove()}});D.addNodeFilter("a",function(F){var H=F.length,I,E,G;while(H--){I=F[H];E=I.attr("href");G=I.attr("name");if(E&&E.indexOf("#_msocom_")!=-1){I.remove();continue}if(E&&E.indexOf("file://")===0){E=E.split("#")[1];if(E){E="#"+E}}if(!E&&!G){I.unwrap()}else{if(G&&!/^_?(?:toc|edn|ftn)/i.test(G)){I.unwrap();continue}I.attr({href:E,name:G})}}});var w=D.parse(C);if(s.paste_convert_word_fake_lists!==false){z(w)}A.content=new n({validate:s.validate},y).serialize(w)}})}p.isWordContent=q;return p});h("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(i,j,l,k){return function(o){function p(q){o.on("BeforePastePreProcess",function(r){r.content=q(r.content)})}function n(q){if(!l.isWordContent(q)){return q}var r=[];j.each(o.schema.getBlockElements(),function(u,t){r.push(t)});var s=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");q=k.filter(q,[[s,"$1"]]);q=k.filter(q,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return q}function m(s){if(l.isWordContent(s)){return s}var q=o.settings.paste_webkit_styles;if(o.settings.paste_remove_styles_if_webkit===false||q=="all"){return s}if(q){q=q.split(/[, ]/)}if(q){var t=o.dom,r=o.selection.getNode();s=s.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(B,z,A,u){var v=t.parseStyle(A,"span"),y={};if(q==="none"){return z+u}for(var x=0;x<q.length;x++){var w=v[q[x]],C=t.getStyle(r,q[x],true);if(/color/.test(q[x])){w=t.toHex(w);C=t.toHex(C)}if(C!=w){y[q[x]]=w}}y=t.serializeStyle(y,"span");if(y){return z+' style="'+y+'"'+u}return z+u})}else{s=s.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}s=s.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(u,w,v,x){return w+' style="'+v+'"'+x});return s}if(i.webkit){p(m)}if(i.ie){p(n)}}});h("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(i,m,l,j){var k;i.add("paste",function(r){var p=this,s,q=r.settings;function o(){return k||r.settings.paste_plaintext_inform===false}function n(){if(s.pasteFormat=="text"){this.active(false);s.pasteFormat="html";r.fire("PastePlainTextToggle",{state:false})}else{s.pasteFormat="text";this.active(true);if(!o()){var t=r.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");r.notificationManager.open({text:t,type:"info"});k=true;r.fire("PastePlainTextToggle",{state:true})}}r.focus()}p.clipboard=s=new m(r);p.quirks=new j(r);p.wordFilter=new l(r);if(r.settings.paste_as_text){p.clipboard.pasteFormat="text"}if(q.paste_preprocess){r.on("PastePreProcess",function(t){q.paste_preprocess.call(p,p,t)})}if(q.paste_postprocess){r.on("PastePostProcess",function(t){q.paste_postprocess.call(p,p,t)})}r.addCommand("mceInsertClipboardContent",function(u,t){if(t.content){p.clipboard.pasteHtml(t.content)}if(t.text){p.clipboard.pasteText(t.text)}});if(r.settings.paste_block_drop){r.on("dragend dragover draggesture dragdrop drop drag",function(t){t.preventDefault();t.stopPropagation()})}if(!r.settings.paste_data_images){r.on("drop",function(u){var t=u.dataTransfer;if(t&&t.files&&t.files.length>0){u.preventDefault()}})}r.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:n,active:p.clipboard.pasteFormat=="text"});r.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:s.pasteFormat,onclick:n})})});a(["tinymce/pasteplugin/Utils"])})(this);