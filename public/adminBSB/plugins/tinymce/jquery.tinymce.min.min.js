(function(m){var h,k,n,i=[],l=window;m.fn.tinymce=function(c){var e=this,d,b,g,a="";if(!e.length){return e}if(!c){return window.tinymce?tinymce.get(e[0].id):null}e.css("visibility","hidden");function p(){var o=[],r=0;if(!n){j();n=true}e.each(function(y,x){var z,q=x.id,w=c.oninit;if(!q){x.id=q=tinymce.DOM.uniqueId()}if(tinymce.get(q)){return}z=new tinymce.Editor(q,c,tinymce.EditorManager);o.push(z);z.on("init",function(){var t,s=w;e.css("visibility","");if(w){if(++r==o.length){if(typeof s==="string"){t=(s.indexOf(".")===-1)?null:tinymce.resolve(s.replace(/\.\w+$/,""));s=tinymce.resolve(s)}s.apply(t||tinymce,o)}}})});m.each(o,function(q,t){t.render()})}if(!l.tinymce&&!k&&(d=c.script_url)){k=1;b=d.substring(0,d.lastIndexOf("/"));if(d.indexOf(".min")!=-1){a=".min"}l.tinymce=l.tinyMCEPreInit||{base:b,suffix:a};if(d.indexOf("gzip")!=-1){g=c.language||"en";d=d+(/\?/.test(d)?"&":"?")+"js=true&core=true&suffix="+escape(a)+"&themes="+escape(c.theme||"modern")+"&plugins="+escape(c.plugins||"")+"&languages="+(g||"");if(!l.tinyMCE_GZ){l.tinyMCE_GZ={start:function(){function o(r){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(r))}o("langs/"+g+".js");o("themes/"+c.theme+"/theme"+a+".js");o("themes/"+c.theme+"/langs/"+g+".js");m.each(c.plugins.split(","),function(s,t){if(t){o("plugins/"+t+"/plugin"+a+".js");o("plugins/"+t+"/langs/"+g+".js")}})},end:function(){}}}}var f=document.createElement("script");f.type="text/javascript";f.onload=f.onreadystatechange=function(o){o=o||window.event;if(k!==2&&(o.type=="load"||/complete|loaded/.test(f.readyState))){tinymce.dom.Event.domLoaded=1;k=2;if(c.script_loaded){c.script_loaded()}p();m.each(i,function(t,s){s()})}};f.src=d;document.body.appendChild(f)}else{if(k===1){i.push(p)}else{p()}}return e};m.extend(m.expr[":"],{tinymce:function(a){var b;if(a.id&&"tinymce" in window){b=tinymce.get(a.id);if(b&&b.editorManager===tinymce){return true}}return false}});function j(){function c(f){if(f==="remove"){this.each(function(q,g){var r=d(g);if(r){r.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(q,g){var r=tinymce.get(g.id.replace(/_parent$/,""));if(r){r.remove()}})}function a(g){var p=this,f;if(g!=null){c.call(p);p.each(function(s,o){var t;if((t=tinymce.get(o.id))){t.setContent(g)}})}else{if(p.length>0){if((f=tinymce.get(p[0].id))){return f.getContent()}}}}function d(g){var f=null;if(g&&g.id&&l.tinymce){f=tinymce.get(g.id)}return f}function e(f){return !!((f)&&(f.length)&&(l.tinymce)&&(f.is(":tinymce")))}var b={};m.each(["text","html","val"],function(q,f){var g=b[f]=m.fn[f],r=(f==="text");m.fn[f]=function(o){var v=this;if(!e(v)){return g.apply(v,arguments)}if(o!==h){a.call(v.filter(":tinymce"),o);g.apply(v.not(":tinymce"),arguments);return v}var p="";var u=arguments;(r?v:v.eq(0)).each(function(t,s){var x=d(s);if(x){p+=r?x.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):x.getContent({save:true})}else{p+=g.apply(m(s),u)}});return p}});m.each(["append","prepend"],function(q,r){var g=b[r]=m.fn[r],f=(r==="prepend");m.fn[r]=function(o){var p=this;if(!e(p)){return g.apply(p,arguments)}if(o!==h){if(typeof o==="string"){p.filter(":tinymce").each(function(w,v){var x=d(v);if(x){x.setContent(f?o+x.getContent():x.getContent()+o)}})}g.apply(p.not(":tinymce"),arguments);return p}}});m.each(["remove","replaceWith","replaceAll","empty"],function(p,f){var g=b[f]=m.fn[f];m.fn[f]=function(){c.call(this,f);return g.apply(this,arguments)}});b.attr=m.fn.attr;m.fn.attr=function(t,g){var v=this,u=arguments;if((!t)||(t!=="value")||(!e(v))){if(g!==h){return b.attr.apply(v,u)}return b.attr.apply(v,u)}if(g!==h){a.call(v.filter(":tinymce"),g);b.attr.apply(v.not(":tinymce"),u);return v}var s=v[0],f=d(s);return f?f.getContent({save:true}):b.attr.apply(m(s),u)}}})(jQuery);