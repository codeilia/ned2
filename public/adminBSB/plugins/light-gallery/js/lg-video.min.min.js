/*! lightgallery - v1.2.21 - 2016-06-28
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2016 Sachin N; Licensed Apache 2.0 */
(function(k,l,h,i){var j={videoMaxWidth:"855px",youtubePlayerParams:false,vimeoPlayerParams:false,dailymotionPlayerParams:false,vkPlayerParams:false,videojs:false,videojsOptions:{}};var g=function(a){this.core=k(a).data("lightGallery");this.$el=k(a);this.core.s=k.extend({},j,this.core.s);this.videoLoaded=false;this.init();return this};g.prototype.init=function(){var a=this;a.core.$el.on("hasVideo.lg.tm",function(e,n,c,f){a.core.$slide.eq(n).find(".lg-video").append(a.loadVideo(c,"lg-object",true,n,f));if(f){if(a.core.s.videojs){try{videojs(a.core.$slide.eq(n).find(".lg-html5").get(0),a.core.s.videojsOptions,function(){if(!a.videoLoaded){this.play()}})}catch(d){console.error("Make sure you have included videojs")}}else{a.core.$slide.eq(n).find(".lg-html5").get(0).play()}}});a.core.$el.on("onAferAppendSlide.lg.tm",function(c,d){a.core.$slide.eq(d).find(".lg-video-cont").css("max-width",a.core.s.videoMaxWidth);a.videoLoaded=true});var b=function(c){if(c.find(".lg-object").hasClass("lg-has-poster")&&c.find(".lg-object").is(":visible")){if(!c.hasClass("lg-has-video")){c.addClass("lg-video-playing lg-has-video");var t;var u;var d=function(m,o){c.find(".lg-video").append(a.loadVideo(m,"",false,a.core.index,o));if(o){if(a.core.s.videojs){try{videojs(a.core.$slide.eq(a.core.index).find(".lg-html5").get(0),a.core.s.videojsOptions,function(){this.play()})}catch(n){console.error("Make sure you have included videojs")}}else{a.core.$slide.eq(a.core.index).find(".lg-html5").get(0).play()}}};if(a.core.s.dynamic){t=a.core.s.dynamicEl[a.core.index].src;u=a.core.s.dynamicEl[a.core.index].html;d(t,u)}else{t=a.core.$items.eq(a.core.index).attr("href")||a.core.$items.eq(a.core.index).attr("data-src");u=a.core.$items.eq(a.core.index).attr("data-html");d(t,u)}var v=c.find(".lg-object");c.find(".lg-video").append(v);if(!c.find(".lg-video-object").hasClass("lg-html5")){c.removeClass("lg-complete");c.find(".lg-video-object").on("load.lg error.lg",function(){c.addClass("lg-complete")})}}else{var e=c.find(".lg-youtube").get(0);var s=c.find(".lg-vimeo").get(0);var w=c.find(".lg-dailymotion").get(0);var x=c.find(".lg-html5").get(0);if(e){e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}else{if(s){try{$f(s).api("play")}catch(f){console.error("Make sure you have included froogaloop2 js")}}else{if(w){w.contentWindow.postMessage("play","*")}else{if(x){if(a.core.s.videojs){try{videojs(x).play()}catch(f){console.error("Make sure you have included videojs")}}else{x.play()}}}}}c.addClass("lg-video-playing")}}};if(a.core.doCss()&&a.core.$items.length>1&&((a.core.s.enableSwipe&&a.core.isTouch)||(a.core.s.enableDrag&&!a.core.isTouch))){a.core.$el.on("onSlideClick.lg.tm",function(){var c=a.core.$slide.eq(a.core.index);b(c)})}else{a.core.$slide.on("click.lg",function(){b(k(this))})}a.core.$el.on("onBeforeSlide.lg.tm",function(y,u,e){var B=a.core.$slide.eq(u);var c=B.find(".lg-youtube").get(0);var f=B.find(".lg-vimeo").get(0);var x=B.find(".lg-dailymotion").get(0);var A=B.find(".lg-vk").get(0);var z=B.find(".lg-html5").get(0);if(c){c.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}else{if(f){try{$f(f).api("pause")}catch(d){console.error("Make sure you have included froogaloop2 js")}}else{if(x){x.contentWindow.postMessage("pause","*")}else{if(z){if(a.core.s.videojs){try{videojs(z).pause()}catch(d){console.error("Make sure you have included videojs")}}else{z.pause()}}}}}if(A){k(A).attr("src",k(A).attr("src").replace("&autoplay","&noplay"))}var v;if(a.core.s.dynamic){v=a.core.s.dynamicEl[e].src}else{v=a.core.$items.eq(e).attr("href")||a.core.$items.eq(e).attr("data-src")}var w=a.core.isVideo(v,e)||{};if(w.youtube||w.vimeo||w.dailymotion||w.vk){a.core.$outer.addClass("lg-hide-download")}});a.core.$el.on("onAfterSlide.lg.tm",function(c,d){a.core.$slide.eq(d).removeClass("lg-video-playing")})};g.prototype.loadVideo=function(s,b,e,c,d){var r="";var f=1;var a="";var t=this.core.isVideo(s,c)||{};if(e){if(this.videoLoaded){f=0}else{f=1}}if(t.youtube){a="?wmode=opaque&autoplay="+f+"&enablejsapi=1";if(this.core.s.youtubePlayerParams){a=a+"&"+k.param(this.core.s.youtubePlayerParams)}r='<iframe class="lg-video-object lg-youtube '+b+'" width="560" height="315" src="//www.youtube.com/embed/'+t.youtube[1]+a+'" frameborder="0" allowfullscreen></iframe>'}else{if(t.vimeo){a="?autoplay="+f+"&api=1";if(this.core.s.vimeoPlayerParams){a=a+"&"+k.param(this.core.s.vimeoPlayerParams)}r='<iframe class="lg-video-object lg-vimeo '+b+'" width="560" height="315"  src="//player.vimeo.com/video/'+t.vimeo[1]+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else{if(t.dailymotion){a="?wmode=opaque&autoplay="+f+"&api=postMessage";if(this.core.s.dailymotionPlayerParams){a=a+"&"+k.param(this.core.s.dailymotionPlayerParams)}r='<iframe class="lg-video-object lg-dailymotion '+b+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+t.dailymotion[1]+a+'" frameborder="0" allowfullscreen></iframe>'}else{if(t.html5){var q=d.substring(0,1);if(q==="."||q==="#"){d=k(d).html()}r=d}else{if(t.vk){a="&autoplay="+f;if(this.core.s.vkPlayerParams){a=a+"&"+k.param(this.core.s.vkPlayerParams)}r='<iframe class="lg-video-object lg-vk '+b+'" width="560" height="315" src="http://vk.com/video_ext.php?'+t.vk[1]+a+'" frameborder="0" allowfullscreen></iframe>'}}}}}return r};g.prototype.destroy=function(){this.videoLoaded=false};k.fn.lightGallery.modules.video=g})(jQuery,window,document);