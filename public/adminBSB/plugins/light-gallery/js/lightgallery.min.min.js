/*! lightgallery - v1.2.21 - 2016-06-28
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2016 Sachin N; Licensed Apache 2.0 */
(function(k,l,h,i){var j={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6000,useLeft:false,closable:true,loop:true,escKey:true,keyPress:true,controls:true,slideEndAnimatoin:true,hideControlOnEnd:false,mousewheel:true,getCaptionFromTitleOrAlt:true,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:false,preload:1,showAfterLoad:true,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:false,iframeMaxWidth:"100%",download:true,counter:true,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:true,enableDrag:true,dynamic:false,dynamicEl:[],galleryId:1};function g(a,b){this.el=a;this.$el=k(a);this.s=k.extend({},j,b);if(this.s.dynamic&&this.s.dynamicEl!=="undefined"&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length){throw ("When using dynamic mode, you must also define dynamicEl as an Array.")}this.modules={};this.lGalleryOn=false;this.lgBusy=false;this.hideBartimeout=false;this.isTouch=("ontouchstart" in h.documentElement);if(this.s.slideEndAnimatoin){this.s.hideControlOnEnd=false}if(this.s.dynamic){this.$items=this.s.dynamicEl}else{if(this.s.selector==="this"){this.$items=this.$el}else{if(this.s.selector!==""){if(this.s.selectWithin){this.$items=k(this.s.selectWithin).find(this.s.selector)}else{this.$items=this.$el.find(k(this.s.selector))}}else{this.$items=this.$el.children()}}}this.$slide="";this.$outer="";this.init();return this}g.prototype.init=function(){var a=this;if(a.s.preload>a.$items.length){a.s.preload=a.$items.length}var b=l.location.hash;if(b.indexOf("lg="+this.s.galleryId)>0){a.index=parseInt(b.split("&slide=")[1],10);k("body").addClass("lg-from-hash");if(!k("body").hasClass("lg-on")){setTimeout(function(){a.build(a.index);k("body").addClass("lg-on")})}}if(a.s.dynamic){a.$el.trigger("onBeforeOpen.lg");a.index=a.s.index||0;if(!k("body").hasClass("lg-on")){setTimeout(function(){a.build(a.index);k("body").addClass("lg-on")})}}else{a.$items.on("click.lgcustom",function(d){try{d.preventDefault();d.preventDefault()}catch(c){d.returnValue=false}a.$el.trigger("onBeforeOpen.lg");a.index=a.s.index||a.$items.index(this);if(!k("body").hasClass("lg-on")){a.build(a.index);k("body").addClass("lg-on")}})}};g.prototype.build=function(b){var a=this;a.structure();k.each(k.fn.lightGallery.modules,function(c){a.modules[c]=new k.fn.lightGallery.modules[c](a.el)});a.slide(b,false,false);if(a.s.keyPress){a.keyPress()}if(a.$items.length>1){a.arrow();setTimeout(function(){a.enableDrag();a.enableSwipe()},50);if(a.s.mousewheel){a.mousewheel()}}a.counter();a.closeGallery();a.$el.trigger("onAfterOpen.lg");a.$outer.on("mousemove.lg click.lg touchstart.lg",function(){a.$outer.removeClass("lg-hide-items");clearTimeout(a.hideBartimeout);a.hideBartimeout=setTimeout(function(){a.$outer.addClass("lg-hide-items")},a.s.hideBarsDelay)})};g.prototype.structure=function(){var b="";var f="";var e=0;var c="";var d;var o=this;k("body").append('<div class="lg-backdrop"></div>');k(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms");for(e=0;e<this.$items.length;e++){b+='<div class="lg-item"></div>'}if(this.s.controls&&this.$items.length>1){f='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"}if(this.s.appendSubHtmlTo===".lg-sub-html"){c='<div class="lg-sub-html"></div>'}d='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+b+'</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>'+f+c+"</div></div>";k("body").append(d);this.$outer=k(".lg-outer");this.$slide=this.$outer.find(".lg-item");if(this.s.useLeft){this.$outer.addClass("lg-use-left");this.s.mode="lg-slide"}else{this.$outer.addClass("lg-use-css3")}o.setTop();k(l).on("resize.lg orientationchange.lg",function(){setTimeout(function(){o.setTop()},100)});this.$slide.eq(this.index).addClass("lg-current");if(this.doCss()){this.$outer.addClass("lg-css3")}else{this.$outer.addClass("lg-css");this.s.speed=0}this.$outer.addClass(this.s.mode);if(this.s.enableDrag&&this.$items.length>1){this.$outer.addClass("lg-grab")}if(this.s.showAfterLoad){this.$outer.addClass("lg-show-after-load")}if(this.doCss()){var a=this.$outer.find(".lg-inner");a.css("transition-timing-function",this.s.cssEasing);a.css("transition-duration",this.s.speed+"ms")}k(".lg-backdrop").addClass("in");setTimeout(function(){o.$outer.addClass("lg-visible")},this.s.backdropDuration);if(this.s.download){this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>')}this.prevScrollTop=k(l).scrollTop()};g.prototype.setTop=function(){if(this.s.height!=="100%"){var c=k(l).height();var a=(c-parseInt(this.s.height,10))/2;var b=this.$outer.find(".lg");if(c>=parseInt(this.s.height,10)){b.css("top",a+"px")}else{b.css("top","0px")}}};g.prototype.doCss=function(){var a=function(){var b=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"];var d=h.documentElement;var c=0;for(c=0;c<b.length;c++){if(b[c] in d.style){return true}}};if(a()){return true}return false};g.prototype.isVideo=function(a,f){var d;if(this.s.dynamic){d=this.s.dynamicEl[f].html}else{d=this.$items.eq(f).attr("data-html")}if(!a&&d){return{html5:true}}var e=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i);var n=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);var c=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i);var b=a.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);if(e){return{youtube:e}}else{if(n){return{vimeo:n}}else{if(c){return{dailymotion:c}}else{if(b){return{vk:b}}}}}};g.prototype.counter=function(){if(this.s.counter){k(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")}};g.prototype.addHtml=function(d){var b=null;var a;var e;if(this.s.dynamic){if(this.s.dynamicEl[d].subHtmlUrl){a=this.s.dynamicEl[d].subHtmlUrl}else{b=this.s.dynamicEl[d].subHtml}}else{e=this.$items.eq(d);if(e.attr("data-sub-html-url")){a=e.attr("data-sub-html-url")}else{b=e.attr("data-sub-html");if(this.s.getCaptionFromTitleOrAlt&&!b){b=e.attr("title")||e.find("img").first().attr("alt")}}}if(!a){if(typeof b!=="undefined"&&b!==null){var c=b.substring(0,1);if(c==="."||c==="#"){if(this.s.subHtmlSelectorRelative&&!this.s.dynamic){b=e.find(b).html()}else{b=k(b).html()}}}else{b=""}}if(this.s.appendSubHtmlTo===".lg-sub-html"){if(a){this.$outer.find(this.s.appendSubHtmlTo).load(a)}else{this.$outer.find(this.s.appendSubHtmlTo).html(b)}}else{if(a){this.$slide.eq(d).load(a)}else{this.$slide.eq(d).append(b)}}if(typeof b!=="undefined"&&b!==null){if(b===""){this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html")}else{this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")}}this.$el.trigger("onAfterAppendSubHtml.lg",[d])};g.prototype.preload=function(b){var a=1;var c=1;for(a=1;a<=this.s.preload;a++){if(a>=this.$items.length-b){break}this.loadContent(b+a,false,0)}for(c=1;c<=this.s.preload;c++){if(b-c<0){break}this.loadContent(b-c,false,0)}};g.prototype.loadContent=function(G,F,b){var z=this;var f=false;var a;var C;var c;var H;var A;var I;var B=function(o){var s=[];var m=[];for(var q=0;q<o.length;q++){var n=o[q].split(" ");if(n[0]===""){n.splice(0,1)}m.push(n[0]);s.push(n[1])}var r=k(l).width();for(var p=0;p<s.length;p++){if(parseInt(s[p],10)>r){C=m[p];break}}};if(z.s.dynamic){if(z.s.dynamicEl[G].poster){f=true;c=z.s.dynamicEl[G].poster}I=z.s.dynamicEl[G].html;C=z.s.dynamicEl[G].src;if(z.s.dynamicEl[G].responsive){var d=z.s.dynamicEl[G].responsive.split(",");B(d)}H=z.s.dynamicEl[G].srcset;A=z.s.dynamicEl[G].sizes}else{if(z.$items.eq(G).attr("data-poster")){f=true;c=z.$items.eq(G).attr("data-poster")}I=z.$items.eq(G).attr("data-html");C=z.$items.eq(G).attr("href")||z.$items.eq(G).attr("data-src");if(z.$items.eq(G).attr("data-responsive")){var E=z.$items.eq(G).attr("data-responsive").split(",");B(E)}H=z.$items.eq(G).attr("data-srcset");A=z.$items.eq(G).attr("data-sizes")}var D=false;if(z.s.dynamic){if(z.s.dynamicEl[G].iframe){D=true}}else{if(z.$items.eq(G).attr("data-iframe")==="true"){D=true}}var y=z.isVideo(C,G);if(!z.$slide.eq(G).hasClass("lg-loaded")){if(D){z.$slide.eq(G).prepend('<div class="lg-video-cont" style="max-width:'+z.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+C+'"  allowfullscreen="true"></iframe></div></div>')}else{if(f){var J="";if(y&&y.youtube){J="lg-has-youtube"}else{if(y&&y.vimeo){J="lg-has-vimeo"}else{J="lg-has-html5"}}z.$slide.eq(G).prepend('<div class="lg-video-cont '+J+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+c+'" /></div></div>')}else{if(y){z.$slide.eq(G).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>');z.$el.trigger("hasVideo.lg",[G,C,I])}else{z.$slide.eq(G).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+C+'" /></div>')}}}z.$el.trigger("onAferAppendSlide.lg",[G]);a=z.$slide.eq(G).find(".lg-object");if(A){a.attr("sizes",A)}if(H){a.attr("srcset",H);try{picturefill({elements:[a[0]]})}catch(e){console.error("Make sure you have included Picturefill version 2")}}if(this.s.appendSubHtmlTo!==".lg-sub-html"){z.addHtml(G)}z.$slide.eq(G).addClass("lg-loaded")}z.$slide.eq(G).find(".lg-object").on("load.lg error.lg",function(){var m=0;if(b&&!k("body").hasClass("lg-from-hash")){m=b}setTimeout(function(){z.$slide.eq(G).addClass("lg-complete");z.$el.trigger("onSlideItemLoad.lg",[G,b||0])},m)});if(y&&y.html5&&!f){z.$slide.eq(G).addClass("lg-complete")}if(F===true){if(!z.$slide.eq(G).hasClass("lg-complete")){z.$slide.eq(G).find(".lg-object").on("load.lg error.lg",function(){z.preload(G)})}else{z.preload(G)}}};g.prototype.slide=function(f,d,u){var t=this.$outer.find(".lg-current").index();var s=this;if(s.lGalleryOn&&(t===f)){return}var e=this.$slide.length;var a=s.lGalleryOn?this.s.speed:0;var w=false;var x=false;if(!s.lgBusy){if(this.s.download){var v;if(s.s.dynamic){v=s.s.dynamicEl[f].downloadUrl!==false&&(s.s.dynamicEl[f].downloadUrl||s.s.dynamicEl[f].src)}else{v=s.$items.eq(f).attr("data-download-url")!=="false"&&(s.$items.eq(f).attr("data-download-url")||s.$items.eq(f).attr("href")||s.$items.eq(f).attr("data-src"))}if(v){k("#lg-download").attr("href",v);s.$outer.removeClass("lg-hide-download")}else{s.$outer.addClass("lg-hide-download")}}this.$el.trigger("onBeforeSlide.lg",[t,f,d,u]);s.lgBusy=true;clearTimeout(s.hideBartimeout);if(this.s.appendSubHtmlTo===".lg-sub-html"){setTimeout(function(){s.addHtml(f)},a)}this.arrowDisable(f);if(!d){s.$outer.addClass("lg-no-trans");this.$slide.removeClass("lg-prev-slide lg-next-slide");if(f<t){x=true;if((f===0)&&(t===e-1)&&!u){x=false;w=true}}else{if(f>t){w=true;if((f===e-1)&&(t===0)&&!u){x=true;w=false}}}if(x){this.$slide.eq(f).addClass("lg-prev-slide");this.$slide.eq(t).addClass("lg-next-slide")}else{if(w){this.$slide.eq(f).addClass("lg-next-slide");this.$slide.eq(t).addClass("lg-prev-slide")}}setTimeout(function(){s.$slide.removeClass("lg-current");s.$slide.eq(f).addClass("lg-current");s.$outer.removeClass("lg-no-trans")},50)}else{var c=f-1;var b=f+1;if((f===0)&&(t===e-1)){b=0;c=e-1}else{if((f===e-1)&&(t===0)){b=0;c=e-1}}this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");s.$slide.eq(c).addClass("lg-prev-slide");s.$slide.eq(b).addClass("lg-next-slide");s.$slide.eq(f).addClass("lg-current")}if(s.lGalleryOn){setTimeout(function(){s.loadContent(f,true,0)},this.s.speed+50);setTimeout(function(){s.lgBusy=false;s.$el.trigger("onAfterSlide.lg",[t,f,d,u])},this.s.speed)}else{s.loadContent(f,true,s.s.backdropDuration);s.lgBusy=false;s.$el.trigger("onAfterSlide.lg",[t,f,d,u])}s.lGalleryOn=true;if(this.s.counter){k("#lg-counter-current").text(f+1)}}};g.prototype.goToNextSlide=function(b){var a=this;if(!a.lgBusy){if((a.index+1)<a.$slide.length){a.index++;a.$el.trigger("onBeforeNextSlide.lg",[a.index]);a.slide(a.index,b,false)}else{if(a.s.loop){a.index=0;a.$el.trigger("onBeforeNextSlide.lg",[a.index]);a.slide(a.index,b,false)}else{if(a.s.slideEndAnimatoin){a.$outer.addClass("lg-right-end");setTimeout(function(){a.$outer.removeClass("lg-right-end")},400)}}}}};g.prototype.goToPrevSlide=function(b){var a=this;if(!a.lgBusy){if(a.index>0){a.index--;a.$el.trigger("onBeforePrevSlide.lg",[a.index,b]);a.slide(a.index,b,false)}else{if(a.s.loop){a.index=a.$items.length-1;a.$el.trigger("onBeforePrevSlide.lg",[a.index,b]);a.slide(a.index,b,false)}else{if(a.s.slideEndAnimatoin){a.$outer.addClass("lg-left-end");setTimeout(function(){a.$outer.removeClass("lg-left-end")},400)}}}}};g.prototype.keyPress=function(){var a=this;if(this.$items.length>1){k(l).on("keyup.lg",function(b){if(a.$items.length>1){if(b.keyCode===37){b.preventDefault();a.goToPrevSlide()}if(b.keyCode===39){b.preventDefault();a.goToNextSlide()}}})}k(l).on("keydown.lg",function(b){if(a.s.escKey===true&&b.keyCode===27){b.preventDefault();if(!a.$outer.hasClass("lg-thumb-open")){a.destroy()}else{a.$outer.removeClass("lg-thumb-open")}}})};g.prototype.arrow=function(){var a=this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()});this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})};g.prototype.arrowDisable=function(a){if(!this.s.loop&&this.s.hideControlOnEnd){if((a+1)<this.$slide.length){this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled")}if(a>0){this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled")}}};g.prototype.setTranslate=function(b,a,c){if(this.s.useLeft){b.css("left",a)}else{b.css({transform:"translate3d("+(a)+"px, "+c+"px, 0px)"})}};g.prototype.touchMove=function(b,c){var a=c-b;if(Math.abs(a)>15){this.$outer.addClass("lg-dragging");this.setTranslate(this.$slide.eq(this.index),a,0);this.setTranslate(k(".lg-prev-slide"),-this.$slide.eq(this.index).width()+a,0);this.setTranslate(k(".lg-next-slide"),this.$slide.eq(this.index).width()+a,0)}};g.prototype.touchEnd=function(a){var b=this;if(b.s.mode!=="lg-slide"){b.$outer.addClass("lg-slide")}this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0");setTimeout(function(){b.$outer.removeClass("lg-dragging");if((a<0)&&(Math.abs(a)>b.s.swipeThreshold)){b.goToNextSlide(true)}else{if((a>0)&&(Math.abs(a)>b.s.swipeThreshold)){b.goToPrevSlide(true)}else{if(Math.abs(a)<5){b.$el.trigger("onSlideClick.lg")}}}b.$slide.removeAttr("style")});setTimeout(function(){if(!b.$outer.hasClass("lg-dragging")&&b.s.mode!=="lg-slide"){b.$outer.removeClass("lg-slide")}},b.s.speed+100)};g.prototype.enableSwipe=function(){var a=this;var b=0;var d=0;var c=false;if(a.s.enableSwipe&&a.isTouch&&a.doCss()){a.$slide.on("touchstart.lg",function(e){if(!a.$outer.hasClass("lg-zoomed")&&!a.lgBusy){e.preventDefault();a.manageSwipeClass();b=e.originalEvent.targetTouches[0].pageX}});a.$slide.on("touchmove.lg",function(e){if(!a.$outer.hasClass("lg-zoomed")){e.preventDefault();d=e.originalEvent.targetTouches[0].pageX;a.touchMove(b,d);c=true}});a.$slide.on("touchend.lg",function(){if(!a.$outer.hasClass("lg-zoomed")){if(c){c=false;a.touchEnd(d-b)}else{a.$el.trigger("onSlideClick.lg")}}})}};g.prototype.enableDrag=function(){var a=this;var b=0;var d=0;var e=false;var c=false;if(a.s.enableDrag&&!a.isTouch&&a.doCss()){a.$slide.on("mousedown.lg",function(f){if(!a.$outer.hasClass("lg-zoomed")){if(k(f.target).hasClass("lg-object")||k(f.target).hasClass("lg-video-play")){f.preventDefault();if(!a.lgBusy){a.manageSwipeClass();b=f.pageX;e=true;a.$outer.scrollLeft+=1;a.$outer.scrollLeft-=1;a.$outer.removeClass("lg-grab").addClass("lg-grabbing");a.$el.trigger("onDragstart.lg")}}}});k(l).on("mousemove.lg",function(f){if(e){c=true;d=f.pageX;a.touchMove(b,d);a.$el.trigger("onDragmove.lg")}});k(l).on("mouseup.lg",function(f){if(c){c=false;a.touchEnd(d-b);a.$el.trigger("onDragend.lg")}else{if(k(f.target).hasClass("lg-object")||k(f.target).hasClass("lg-video-play")){a.$el.trigger("onSlideClick.lg")}}if(e){e=false;a.$outer.removeClass("lg-grabbing").addClass("lg-grab")}})}};g.prototype.manageSwipeClass=function(){var c=this.index+1;var b=this.index-1;var a=this.$slide.length;if(this.s.loop){if(this.index===0){b=a-1}else{if(this.index===a-1){c=0}}}this.$slide.removeClass("lg-next-slide lg-prev-slide");if(b>-1){this.$slide.eq(b).addClass("lg-prev-slide")}this.$slide.eq(c).addClass("lg-next-slide")};g.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){if(!b.deltaY){return}if(b.deltaY>0){a.goToPrevSlide()}else{a.goToNextSlide()}b.preventDefault()})};g.prototype.closeGallery=function(){var a=this;var b=false;this.$outer.find(".lg-close").on("click.lg",function(){a.destroy()});if(a.s.closable){a.$outer.on("mousedown.lg",function(c){if(k(c.target).is(".lg-outer")||k(c.target).is(".lg-item ")||k(c.target).is(".lg-img-wrap")){b=true}else{b=false}});a.$outer.on("mouseup.lg",function(c){if(k(c.target).is(".lg-outer")||k(c.target).is(".lg-item ")||k(c.target).is(".lg-img-wrap")&&b){if(!a.$outer.hasClass("lg-dragging")){a.destroy()}}})}};g.prototype.destroy=function(b){var a=this;if(!b){a.$el.trigger("onBeforeClose.lg")}k(l).scrollTop(a.prevScrollTop);if(b){if(!a.s.dynamic){this.$items.off("click.lg click.lgcustom")}k.removeData(a.el,"lightGallery")}this.$el.off(".lg.tm");k.each(k.fn.lightGallery.modules,function(c){if(a.modules[c]){a.modules[c].destroy()}});this.lGalleryOn=false;clearTimeout(a.hideBartimeout);this.hideBartimeout=false;k(l).off(".lg");k("body").removeClass("lg-on lg-from-hash");if(a.$outer){a.$outer.removeClass("lg-visible")}k(".lg-backdrop").removeClass("in");setTimeout(function(){if(a.$outer){a.$outer.remove()}k(".lg-backdrop").remove();if(!b){a.$el.trigger("onCloseAfter.lg")}},a.s.backdropDuration+50)};k.fn.lightGallery=function(a){return this.each(function(){if(!k.data(this,"lightGallery")){k.data(this,"lightGallery",new g(this,a))}else{try{k(this).data("lightGallery").init()}catch(b){console.error("lightGallery has not initiated properly")}}})};k.fn.lightGallery.modules={}})(jQuery,window,document);