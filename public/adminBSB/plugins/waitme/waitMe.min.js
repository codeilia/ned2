(function(a){a.fn.waitMe=function(b){return this.each(function(){var f=a(this),j="waitMe",k,h,p,g=false,n="background-color",i="",m="",c,o,d;var e={init:function(){var x={effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",source:"",onClose:function(){}};o=a.extend(x,b);d=new Date().getMilliseconds();c=a('<div class="'+j+'" data-waitme_id="'+d+'"></div>');switch(o.effect){case"none":p=0;break;case"bounce":p=3;break;case"rotateplane":p=1;break;case"stretch":p=5;break;case"orbit":p=2;break;case"roundBounce":p=12;break;case"win8":p=5;g=true;break;case"win8_linear":p=5;g=true;break;case"ios":p=12;break;case"facebook":p=3;break;case"rotation":p=1;n="border-color";break;case"timer":p=2;if(a.isArray(o.color)){var v=o.color[0]}else{var v=o.color}i="border-color:"+v;break;case"pulse":p=1;n="border-color";break;case"progressBar":p=1;break;case"bouncePulse":p=3;break;case"img":p=1;break}if(i!==""){i+=";"}if(p>0){if(o.effect==="img"){m='<img src="'+o.source+'">'}else{for(var y=1;y<=p;++y){if(a.isArray(o.color)){var v=o.color[y];if(v==undefined){v="#000"}}else{var v=o.color}if(g){m+='<div class="'+j+"_progress_elem"+y+'"><div style="'+n+":"+v+'"></div></div>'}else{m+='<div class="'+j+"_progress_elem"+y+'" style="'+n+":"+v+'"></div>'}}}h=a('<div class="'+j+"_progress "+o.effect+'" style="'+i+'">'+m+"</div>")}if(o.text&&o.maxSize===""){if(a.isArray(o.color)){var v=o.color[0]}else{var v=o.color}k=a('<div class="'+j+'_text" style="color:'+v+'">'+o.text+"</div>")}var r=f.find("> ."+j);if(r){r.remove()}var z=a('<div class="'+j+'_content"></div>');z.append(h,k);c.append(z);if(f[0].tagName=="HTML"){f=a("body")}f.addClass(j+"_container").attr("data-waitme_id",d).append(c);r=f.find("> ."+j);var D=f.find("."+j+"_content");r.css({background:o.bg});D.css({marginTop:-D.outerHeight()/2+"px"});if(o.maxSize!==""){var E=h.outerHeight();var t=h.outerWidth();var A=E;if(o.effect==="img"){h.css({height:o.maxSize+"px"});h.find(">img").css({maxHeight:"100%"});D.css({marginTop:-D.outerHeight()/2+"px"})}else{if(o.maxSize<A){z.css({transform:"scale("+o.maxSize/A+")"})}}}function s(F){D.css({top:"auto",transform:"translateY("+F+"px) translateZ(0)"})}if(f.outerHeight()>a(window).height()){var B=a(window).scrollTop(),q=D.outerHeight(),C=f.offset().top,w=f.outerHeight(),u=B-C+a(window).height()/2;if(u<0){u=Math.abs(u)}if(u-q>=0&&u+q<=w){if(C-B>a(window).height()/2){u=q}s(u)}else{if(B>C+w-q){u=B-C-q}else{u=B-C+q}s(u)}a(document).scroll(function(){var F=a(window).scrollTop(),G=F-C+a(window).height()/2;if(G-q>=0&&G+q<=w){s(G)}})}r.on("destroyed",function(){if(o.onClose&&a.isFunction(o.onClose)){o.onClose()}r.trigger("close")});a.event.special.destroyed={remove:function(F){if(F.handler){F.handler()}}};return r},hide:function(){l()}};function l(){var q=f.attr("data-waitme_id");f.removeClass(j+"_container").removeAttr("data-waitme_id");f.find("."+j+'[data-waitme_id="'+q+'"]').remove()}if(e[b]){return e[b].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof b==="object"||!b){return e.init.apply(this,arguments)}}})};a(window).on("load",function(){a("body.waitMe_body").addClass("hideMe");setTimeout(function(){a("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove();a("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})})(jQuery);