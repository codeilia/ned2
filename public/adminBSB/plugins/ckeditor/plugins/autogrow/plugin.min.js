(function(){function a(A){function o(){y=A.document;j=y[CKEDITOR.env.ie?"getBody":"getDocumentElement"]();z=CKEDITOR.env.quirks?y.getBody():y.getDocumentElement();var c=CKEDITOR.env.quirks?z:z.findOne("body");c&&(c.setStyle("height","auto"),c.setStyle("min-height",CKEDITOR.env.safari?"0%":"auto"));x=CKEDITOR.dom.element.createFromHtml('\x3cspan style\x3d"margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;"\x3e'+(CKEDITOR.env.webkit?"\x26nbsp;":"")+"\x3c/span\x3e",y)}function w(){u&&z.setStyle("overflow-y","hidden");var e=A.window.getViewPaneSize().height,c;j.append(x);c=x.getDocumentPosition(y).y+x.$.offsetHeight;x.remove();c+=v;c=Math.max(c,b);c=Math.min(c,i);c!=e&&s!=c&&(c=A.fire("autoGrow",{currentHeight:e,newHeight:c}).newHeight,A.resize(A.container.getStyle("width"),c,!0),s=c);u||(c<i&&z.$.scrollHeight>z.$.clientHeight?z.setStyle("overflow-y","hidden"):z.removeStyle("overflow-y"))}var s,y,j,z,x,v=A.config.autoGrow_bottomSpace||0,b=void 0!==A.config.autoGrow_minHeight?A.config.autoGrow_minHeight:200,i=A.config.autoGrow_maxHeight||Infinity,u=!A.config.autoGrow_maxHeight;A.addCommand("autogrow",{exec:w,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var B={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1},d;for(d in B){A.on(d,function(c){"wysiwyg"==c.editor.mode&&setTimeout(function(){var e=A.getCommand("maximize");!A.window||e&&e.state==CKEDITOR.TRISTATE_ON?s=null:(w(),u||w())},100)})}A.on("afterCommandExec",function(c){"maximize"==c.data.name&&"wysiwyg"==c.editor.mode&&(c.data.command.state==CKEDITOR.TRISTATE_ON?z.removeStyle("overflow-y"):w())});A.on("contentDom",o);o();A.config.autoGrow_onStartup&&A.editable().isVisible()&&A.execCommand("autogrow")}CKEDITOR.plugins.add("autogrow",{init:function(b){if(b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){b.on("instanceReady",function(){b.editable().isInline()?b.ui.space("contents").setStyle("height","auto"):a(b)})}}})})();