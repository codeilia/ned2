(function(){function b(t,l){var s=t.editable().findOne('a[data-cke-autoembed\x3d"'+l+'"]'),r=t.lang.autoembed,q;if(s&&s.data("cke-saved-href")){var s=s.data("cke-saved-href"),p=CKEDITOR.plugins.autoEmbed.getWidgetDefinition(t,s);if(p){var o="function"==typeof p.defaults?p.defaults():p.defaults,o=CKEDITOR.dom.element.createFromHtml(p.template.output(o)),k,j=t.widgets.wrapElement(o,p.name),i=new CKEDITOR.dom.documentFragment(j.getDocument());i.append(j);(k=t.widgets.initOn(o,p))?(q=t.showNotification(r.embeddingInProgress,"info"),k.loadContent(s,{noNotifications:!0,callback:function(){var d=t.editable().findOne('a[data-cke-autoembed\x3d"'+l+'"]');if(d){var w=t.getSelection(),v=t.createRange(),u=t.editable();t.fire("saveSnapshot");t.fire("lockSnapshot",{dontUpdate:!0});var g=w.createBookmarks(!1)[0],m=g.startNode,n=g.endNode||m;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&!g.endNode&&m.equals(d.getNext())&&d.append(m);v.setStartBefore(d);v.setEndAfter(d);u.insertElement(j,v);u.contains(m)&&u.contains(n)?w.selectBookmarks([g]):(m.remove(),n.remove());t.fire("unlockSnapshot")}q.hide();t.widgets.finalizeCreation(i)},errorCallback:function(){q.hide();t.widgets.destroy(k,!0);t.showNotification(r.embeddingFailed,"info")}})):t.widgets.finalizeCreation(i)}else{CKEDITOR.warn("autoembed-no-widget-def")}}}var a=/^<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>$/i;CKEDITOR.plugins.add("autoembed",{requires:"autolink,undo",lang:"cs,de,de-ch,en,eo,eu,fr,it,km,ko,ku,mk,nb,pl,pt,pt-br,ru,tr,ug,uk,zh,zh-cn",init:function(d){var e=1,c;d.on("paste",function(g){if(g.data.dataTransfer.getTransferType(d)==CKEDITOR.DATA_TRANSFER_INTERNAL){c=0}else{var f=g.data.dataValue.match(a);if(c=null!=f&&decodeURI(f[1])==decodeURI(f[2])){g.data.dataValue='\x3ca data-cke-autoembed\x3d"'+ ++e+'"'+g.data.dataValue.substr(2)}}},null,null,20);d.on("afterPaste",function(){c&&b(d,e)})}});CKEDITOR.plugins.autoEmbed={getWidgetDefinition:function(f,h){var e=f.config.autoEmbed_widget||"embed,embedSemantic",j,i=f.widgets.registered;if("string"==typeof e){for(e=e.split(",");j=e.shift();){if(i[j]){return i[j]}}}else{if("function"==typeof e){return i[e(h)]}}return null}}})();