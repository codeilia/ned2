(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",lang:"ar,bg,ca,cs,cy,da,de,de-ch,el,en,en-gb,eo,es,eu,fa,fi,fo,fr,gl,he,hr,hu,id,it,ja,km,ko,ku,nb,nl,no,pl,pt,pt-br,ru,sk,sl,sq,sv,tr,tt,ug,uk,vi,zh,zh-cn",icons:"language",hidpi:!0,init:function(r){var q=r.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],p=this,o=r.lang.language,n={},l,j,i,m;r.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(e,d){var f=n["language_"+d];if(f){e[f.style.checkActive(e.elementPath(),e)?"removeStyle":"applyStyle"](f.style)}},refresh:function(b){this.setState(p.getCurrentLangElement(b)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(m=0;m<q.length;m++){l=q[m].split(":"),j=l[0],i="language_"+j,n[i]={label:l[1],langId:j,group:"language",order:m,ltr:"rtl"!=(""+l[2]).toLowerCase(),onClick:function(){r.execCommand("language",this.langId)},role:"menuitemcheckbox"},n[i].style=new CKEDITOR.style({element:"span",attributes:{lang:j,dir:n[i].ltr?"ltr":"rtl"}})}n.language_remove={label:o.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:n.length,onClick:function(){var a=p.getCurrentLangElement(r);a&&r.execCommand("language",a.getAttribute("lang"))}};r.addMenuGroup("language",1);r.addMenuGroup("language_remove");r.addMenuItems(n);r.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:o.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var a={},e=p.getCurrentLangElement(r),c;for(c in n){a[c]=CKEDITOR.TRISTATE_OFF}a.language_remove=e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e&&(a["language_"+e.getAttribute("lang")]=CKEDITOR.TRISTATE_ON);return a}})},getCurrentLangElement:function(f){var e=f.elementPath();f=e&&e.elements;var h;if(e){for(var g=0;g<f.length;g++){e=f[g],!h&&"span"==e.getName()&&e.hasAttribute("dir")&&e.hasAttribute("lang")&&(h=e)}}return h}})})();