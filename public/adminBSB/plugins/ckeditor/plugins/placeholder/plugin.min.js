(function(){CKEDITOR.plugins.add("placeholder",{requires:"widget,dialog",lang:"af,ar,bg,ca,cs,cy,da,de,de-ch,el,en,en-gb,eo,es,et,eu,fa,fi,fr,fr-ca,gl,he,hr,hu,id,it,ja,km,ko,ku,lv,nb,nl,no,pl,pt,pt-br,ru,si,sk,sl,sq,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"placeholder",hidpi:!0,onLoad:function(){CKEDITOR.addCss(".cke_placeholder{background-color:#ff0}")},init:function(d){var c=d.lang.placeholder;CKEDITOR.dialog.add("placeholder",this.path+"dialogs/placeholder.js");d.widgets.add("placeholder",{dialog:"placeholder",pathName:c.pathName,template:'\x3cspan class\x3d"cke_placeholder"\x3e[[]]\x3c/span\x3e',downcast:function(){return new CKEDITOR.htmlParser.text("[["+this.data.name+"]]")},init:function(){this.setData("name",this.element.getText().slice(2,-2))},data:function(){this.element.setText("[["+this.data.name+"]]")},getLabel:function(){return this.editor.lang.widget.label.replace(/%1/,this.data.name+" "+this.pathName)}});d.ui.addButton&&d.ui.addButton("CreatePlaceholder",{label:c.toolbar,command:"placeholder",toolbar:"insert,5",icon:"placeholder"})},afterInit:function(d){var c=/\[\[([^\[\]])+\]\]/g;d.dataProcessor.dataFilter.addRules({text:function(a,g){var b=g.parent&&CKEDITOR.dtd[g.parent.name];if(!b||b.span){return a.replace(c,function(e){var f=null,f=new CKEDITOR.htmlParser.element("span",{"class":"cke_placeholder"});f.add(new CKEDITOR.htmlParser.text(e));f=d.widgets.wrapElement(f,"placeholder");return f.getOuterHtml()})}}})}})})();