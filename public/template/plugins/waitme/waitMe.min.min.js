(function(b){b.fn.waitMe=function(a){return this.each(function(){var A=b(this),w="waitMe",v,y,q,z=false,s="background-color",x="",t="",D,r,C;var B={init:function(){var k={effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",source:"",onClose:function(){}};r=b.extend(k,a);C=new Date().getMilliseconds();D=b('<div class="'+w+'" data-waitme_id="'+C+'"></div>');switch(r.effect){case"none":q=0;break;case"bounce":q=3;break;case"rotateplane":q=1;break;case"stretch":q=5;break;case"orbit":q=2;break;case"roundBounce":q=12;break;case"win8":q=5;z=true;break;case"win8_linear":q=5;z=true;break;case"ios":q=12;break;case"facebook":q=3;break;case"rotation":q=1;s="border-color";break;case"timer":q=2;if(b.isArray(r.color)){var m=r.color[0]}else{var m=r.color}x="border-color:"+m;break;case"pulse":q=1;s="border-color";break;case"progressBar":q=1;break;case"bouncePulse":q=3;break;case"img":q=1;break}if(x!==""){x+=";"}if(q>0){if(r.effect==="img"){t='<img src="'+r.source+'">'}else{for(var j=1;j<=q;++j){if(b.isArray(r.color)){var m=r.color[j];if(m==undefined){m="#000"}}else{var m=r.color}if(z){t+='<div class="'+w+"_progress_elem"+j+'"><div style="'+s+":"+m+'"></div></div>'}else{t+='<div class="'+w+"_progress_elem"+j+'" style="'+s+":"+m+'"></div>'}}}y=b('<div class="'+w+"_progress "+r.effect+'" style="'+x+'">'+t+"</div>")}if(r.text&&r.maxSize===""){if(b.isArray(r.color)){var m=r.color[0]}else{var m=r.color}v=b('<div class="'+w+'_text" style="color:'+m+'">'+r.text+"</div>")}var d=A.find("> ."+w);if(d){d.remove()}var i=b('<div class="'+w+'_content"></div>');i.append(y,v);D.append(i);if(A[0].tagName=="HTML"){A=b("body")}A.addClass(w+"_container").attr("data-waitme_id",C).append(D);d=A.find("> ."+w);var c=A.find("."+w+"_content");d.css({background:r.bg});c.css({marginTop:-c.outerHeight()/2+"px"});if(r.maxSize!==""){var F=y.outerHeight();var o=y.outerWidth();var h=F;if(r.effect==="img"){y.css({height:r.maxSize+"px"});y.find(">img").css({maxHeight:"100%"});c.css({marginTop:-c.outerHeight()/2+"px"})}else{if(r.maxSize<h){i.css({transform:"scale("+r.maxSize/h+")"})}}}function p(E){c.css({top:"auto",transform:"translateY("+E+"px) translateZ(0)"})}if(A.outerHeight()>b(window).height()){var g=b(window).scrollTop(),f=c.outerHeight(),e=A.offset().top,l=A.outerHeight(),n=g-e+b(window).height()/2;if(n<0){n=Math.abs(n)}if(n-f>=0&&n+f<=l){if(e-g>b(window).height()/2){n=f}p(n)}else{if(g>e+l-f){n=g-e-f}else{n=g-e+f}p(n)}b(document).scroll(function(){var H=b(window).scrollTop(),E=H-e+b(window).height()/2;if(E-f>=0&&E+f<=l){p(E)}})}d.on("destroyed",function(){if(r.onClose&&b.isFunction(r.onClose)){r.onClose()}d.trigger("close")});b.event.special.destroyed={remove:function(E){if(E.handler){E.handler()}}};return d},hide:function(){u()}};function u(){var c=A.attr("data-waitme_id");A.removeClass(w+"_container").removeAttr("data-waitme_id");A.find("."+w+'[data-waitme_id="'+c+'"]').remove()}if(B[a]){return B[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof a==="object"||!a){return B.init.apply(this,arguments)}}})};b(window).on("load",function(){b("body.waitMe_body").addClass("hideMe");setTimeout(function(){b("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove();b("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})})(jQuery);