/*! lightgallery - v1.2.21 - 2016-06-28
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2016 Sachin N; Licensed Apache 2.0 */
(function(l,g,h,i){var j={autoplay:false,pause:5000,progressBar:true,fourceAutoplay:false,autoplayControls:true,appendAutoplayControlsTo:".lg-toolbar"};var k=function(a){this.core=l(a).data("lightGallery");this.$el=l(a);if(this.core.$items.length<2){return false}this.core.s=l.extend({},j,this.core.s);this.interval=false;this.fromAuto=true;this.canceledOnTouch=false;this.fourceAutoplayTemp=this.core.s.fourceAutoplay;if(!this.core.doCss()){this.core.s.progressBar=false}this.init();return this};k.prototype.init=function(){var a=this;if(a.core.s.autoplayControls){a.controls()}if(a.core.s.progressBar){a.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>')}a.progress();if(a.core.s.autoplay){a.startlAuto()}a.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){if(a.interval){a.cancelAuto();a.canceledOnTouch=true}});a.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){if(!a.interval&&a.canceledOnTouch){a.startlAuto();a.canceledOnTouch=false}})};k.prototype.progress=function(){var a=this;var b;var c;a.$el.on("onBeforeSlide.lg.tm",function(){if(a.core.s.progressBar&&a.fromAuto){b=a.core.$outer.find(".lg-progress-bar");c=a.core.$outer.find(".lg-progress");if(a.interval){c.removeAttr("style");b.removeClass("lg-start");setTimeout(function(){c.css("transition","width "+(a.core.s.speed+a.core.s.pause)+"ms ease 0s");b.addClass("lg-start")},20)}}if(!a.fromAuto&&!a.core.s.fourceAutoplay){a.cancelAuto()}a.fromAuto=false})};k.prototype.controls=function(){var a=this;var b='<span class="lg-autoplay-button lg-icon"></span>';l(this.core.s.appendAutoplayControlsTo).append(b);a.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){if(l(a.core.$outer).hasClass("lg-show-autoplay")){a.cancelAuto();a.core.s.fourceAutoplay=false}else{if(!a.interval){a.startlAuto();a.core.s.fourceAutoplay=a.fourceAutoplayTemp}}})};k.prototype.startlAuto=function(){var a=this;a.core.$outer.find(".lg-progress").css("transition","width "+(a.core.s.speed+a.core.s.pause)+"ms ease 0s");a.core.$outer.addClass("lg-show-autoplay");a.core.$outer.find(".lg-progress-bar").addClass("lg-start");a.interval=setInterval(function(){if(a.core.index+1<a.core.$items.length){a.core.index++}else{a.core.index=0}a.fromAuto=true;a.core.slide(a.core.index,false,false)},a.core.s.speed+a.core.s.pause)};k.prototype.cancelAuto=function(){clearInterval(this.interval);this.interval=false;this.core.$outer.find(".lg-progress").removeAttr("style");this.core.$outer.removeClass("lg-show-autoplay");this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")};k.prototype.destroy=function(){this.cancelAuto();this.core.$outer.find(".lg-progress-bar").remove()};l.fn.lightGallery.modules.autoplay=k})(jQuery,window,document);