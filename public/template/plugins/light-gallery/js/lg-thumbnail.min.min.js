/*! lightgallery - v1.2.21 - 2016-06-28
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2016 Sachin N; Licensed Apache 2.0 */
(function(l,g,h,j){var k={thumbnail:true,animateThumb:true,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:false,showThumbByDefault:true,toogleThumb:true,pullCaptionUp:true,enableThumbDrag:true,enableThumbSwipe:true,swipeThreshold:50,loadYoutubeThumbnail:true,youtubeThumbSize:1,loadVimeoThumbnail:true,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:true};var i=function(a){this.core=l(a).data("lightGallery");this.core.s=l.extend({},k,this.core.s);this.$el=l(a);this.$thumbOuter=null;this.thumbOuterWidth=0;this.thumbTotalWidth=(this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin));this.thumbIndex=this.core.index;this.left=0;this.init();return this};i.prototype.init=function(){var a=this;if(this.core.s.thumbnail&&this.core.$items.length>1){if(this.core.s.showThumbByDefault){setTimeout(function(){a.core.$outer.addClass("lg-thumb-open")},700)}if(this.core.s.pullCaptionUp){this.core.$outer.addClass("lg-pull-caption-up")}this.build();if(this.core.s.animateThumb){if(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()){this.enableThumbDrag()}if(this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()){this.enableThumbSwipe()}this.thumbClickable=false}else{this.thumbClickable=true}this.toogle();this.thumbkeyPress()}};i.prototype.build=function(){var o=this;var c="";var f="";var a;var d='<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":f="640";break;case"thumbnail_medium":f="200x150";break;case"thumbnail_small":f="100x75"}o.core.$outer.addClass("lg-has-thumb");o.core.$outer.find(".lg").append(d);o.$thumbOuter=o.core.$outer.find(".lg-thumb-outer");o.thumbOuterWidth=o.$thumbOuter.width();if(o.core.s.animateThumb){o.core.$outer.find(".lg-thumb").css({width:o.thumbTotalWidth+"px",position:"relative"})}if(this.core.s.animateThumb){o.$thumbOuter.css("height",o.core.s.thumbContHeight+"px")}function b(n,m,w){var u=o.core.isVideo(n,w)||{};var t;var v="";if(u.youtube||u.vimeo||u.dailymotion){if(u.youtube){if(o.core.s.loadYoutubeThumbnail){t="//img.youtube.com/vi/"+u.youtube[1]+"/"+o.core.s.youtubeThumbSize+".jpg"}else{t=m}}else{if(u.vimeo){if(o.core.s.loadVimeoThumbnail){t="//i.vimeocdn.com/video/error_"+f+".jpg";v=u.vimeo[1]}else{t=m}}else{if(u.dailymotion){if(o.core.s.loadDailymotionThumbnail){t="//www.dailymotion.com/thumbnail/video/"+u.dailymotion[1]}else{t=m}}}}}else{t=m}c+='<div data-vimeo-id="'+v+'" class="lg-thumb-item" style="width:'+o.core.s.thumbWidth+"px; margin-right: "+o.core.s.thumbMargin+'px"><img src="'+t+'" /></div>';v=""}if(o.core.s.dynamic){for(var e=0;e<o.core.s.dynamicEl.length;e++){b(o.core.s.dynamicEl[e].src,o.core.s.dynamicEl[e].thumb,e)}}else{o.core.$items.each(function(m){if(!o.core.s.exThumbImage){b(l(this).attr("href")||l(this).attr("data-src"),l(this).find("img").attr("src"),m)}else{b(l(this).attr("href")||l(this).attr("data-src"),l(this).attr(o.core.s.exThumbImage),m)}})}o.core.$outer.find(".lg-thumb").html(c);a=o.core.$outer.find(".lg-thumb-item");a.each(function(){var n=l(this);var m=n.attr("data-vimeo-id");if(m){l.getJSON("//www.vimeo.com/api/v2/video/"+m+".json?callback=?",{format:"json"},function(q){n.find("img").attr("src",q[0][o.core.s.vimeoThumbSize])})}});a.eq(o.core.index).addClass("active");o.core.$el.on("onBeforeSlide.lg.tm",function(){a.removeClass("active");a.eq(o.core.index).addClass("active")});a.on("click.lg touchend.lg",function(){var m=l(this);setTimeout(function(){if((o.thumbClickable&&!o.core.lgBusy)||!o.core.doCss()){o.core.index=m.index();o.core.slide(o.core.index,false,true)}},50)});o.core.$el.on("onBeforeSlide.lg.tm",function(){o.animateThumb(o.core.index)});l(g).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){o.animateThumb(o.core.index);o.thumbOuterWidth=o.$thumbOuter.width()},200)})};i.prototype.setTranslate=function(a){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+(a)+"px, 0px, 0px)"})};i.prototype.animateThumb=function(b){var a=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var c;switch(this.core.s.currentPagerPosition){case"left":c=0;break;case"middle":c=(this.thumbOuterWidth/2)-(this.core.s.thumbWidth/2);break;case"right":c=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=((this.core.s.thumbWidth+this.core.s.thumbMargin)*b-1)-c;if(this.left>(this.thumbTotalWidth-this.thumbOuterWidth)){this.left=this.thumbTotalWidth-this.thumbOuterWidth}if(this.left<0){this.left=0}if(this.core.lGalleryOn){if(!a.hasClass("on")){this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms")}if(!this.core.doCss()){a.animate({left:-this.left+"px"},this.core.s.speed)}}else{if(!this.core.doCss()){a.css("left",-this.left+"px")}}this.setTranslate(this.left)}};i.prototype.enableThumbDrag=function(){var a=this;var c=0;var e=0;var f=false;var d=false;var b=0;a.$thumbOuter.addClass("lg-grab");a.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(n){if(a.thumbTotalWidth>a.thumbOuterWidth){n.preventDefault();c=n.pageX;f=true;a.core.$outer.scrollLeft+=1;a.core.$outer.scrollLeft-=1;a.thumbClickable=false;a.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing")}});l(g).on("mousemove.lg.thumb",function(n){if(f){b=a.left;d=true;e=n.pageX;a.$thumbOuter.addClass("lg-dragging");b=b-(e-c);if(b>(a.thumbTotalWidth-a.thumbOuterWidth)){b=a.thumbTotalWidth-a.thumbOuterWidth}if(b<0){b=0}a.setTranslate(b)}});l(g).on("mouseup.lg.thumb",function(){if(d){d=false;a.$thumbOuter.removeClass("lg-dragging");a.left=b;if(Math.abs(e-c)<a.core.s.swipeThreshold){a.thumbClickable=true}}else{a.thumbClickable=true}if(f){f=false;a.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")}})};i.prototype.enableThumbSwipe=function(){var a=this;var c=0;var e=0;var d=false;var b=0;a.core.$outer.find(".lg-thumb").on("touchstart.lg",function(f){if(a.thumbTotalWidth>a.thumbOuterWidth){f.preventDefault();c=f.originalEvent.targetTouches[0].pageX;a.thumbClickable=false}});a.core.$outer.find(".lg-thumb").on("touchmove.lg",function(f){if(a.thumbTotalWidth>a.thumbOuterWidth){f.preventDefault();e=f.originalEvent.targetTouches[0].pageX;d=true;a.$thumbOuter.addClass("lg-dragging");b=a.left;b=b-(e-c);if(b>(a.thumbTotalWidth-a.thumbOuterWidth)){b=a.thumbTotalWidth-a.thumbOuterWidth}if(b<0){b=0}a.setTranslate(b)}});a.core.$outer.find(".lg-thumb").on("touchend.lg",function(){if(a.thumbTotalWidth>a.thumbOuterWidth){if(d){d=false;a.$thumbOuter.removeClass("lg-dragging");if(Math.abs(e-c)<a.core.s.swipeThreshold){a.thumbClickable=true}a.left=b}else{a.thumbClickable=true}}else{a.thumbClickable=true}})};i.prototype.toogle=function(){var a=this;if(a.core.s.toogleThumb){a.core.$outer.addClass("lg-can-toggle");a.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>');a.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){a.core.$outer.toggleClass("lg-thumb-open")})}};i.prototype.thumbkeyPress=function(){var a=this;l(g).on("keydown.lg.thumb",function(b){if(b.keyCode===38){b.preventDefault();a.core.$outer.addClass("lg-thumb-open")}else{if(b.keyCode===40){b.preventDefault();a.core.$outer.removeClass("lg-thumb-open")}}})};i.prototype.destroy=function(){if(this.core.s.thumbnail&&this.core.$items.length>1){l(g).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb");this.$thumbOuter.remove();this.core.$outer.removeClass("lg-has-thumb")}};l.fn.lightGallery.modules.Thumbnail=i})(jQuery,window,document);