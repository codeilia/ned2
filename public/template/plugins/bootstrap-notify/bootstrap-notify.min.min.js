(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){b(require("jquery"))}else{b(jQuery)}}}(function(d){var f={element:"body",position:null,type:"info",allow_dismiss:true,newest_on_top:false,showProgressbar:false,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5000,timer:1000,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){var a=arguments[0];for(var b=1;b<arguments.length;b++){a=a.replace(RegExp("\\{"+(b-1)+"\\}","gm"),arguments[b])}return a};function e(b,a,c){var a={content:{message:typeof a=="object"?a.message:a,title:a.title?a.title:"",icon:a.icon?a.icon:"",url:a.url?a.url:"#",target:a.target?a.target:"-"}};c=d.extend(true,{},a,c);this.settings=d.extend(true,{},f,c);this._defaults=f;if(this.settings.content.target=="-"){this.settings.content.target=this.settings.url_target}this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"};if(typeof this.settings.offset=="number"){this.settings.offset={x:this.settings.offset,y:this.settings.offset}}this.init()}d.extend(e.prototype,{init:function(){var a=this;this.buildNotify();if(this.settings.content.icon){this.setIcon()}if(this.settings.content.url!="#"){this.styleURL()}this.styleDismiss();this.placement();this.bind();this.notify={$ele:this.$ele,update:function(k,b){var n={};if(typeof k=="string"){n[k]=b}else{n=k}for(var k in n){switch(k){case"type":this.$ele.removeClass("alert-"+a.settings.type);this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+a.settings.type);a.settings.type=n[k];this.$ele.addClass("alert-"+n[k]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+n[k]);break;case"icon":var m=this.$ele.find('[data-notify="icon"]');if(a.settings.icon_type.toLowerCase()=="class"){m.removeClass(a.settings.content.icon).addClass(n[k])}else{if(!m.is("img")){m.find("img")}m.attr("src",n[k])}break;case"progress":var l=a.settings.delay-(a.settings.delay*(n[k]/100));this.$ele.data("notify-delay",l);this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",n[k]).css("width",n[k]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",n[k]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",n[k]);break;default:this.$ele.find('[data-notify="'+k+'"]').html(n[k])}}var c=this.$ele.outerHeight()+parseInt(a.settings.spacing)+parseInt(a.settings.offset.y);a.reposition(c)},close:function(){a.close()}}},buildNotify:function(){var a=this.settings.content;this.$ele=d(String.format(this.settings.template,this.settings.type,a.title,a.message,a.url,a.target));this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align);if(!this.settings.allow_dismiss){this.$ele.find('[data-notify="dismiss"]').css("display","none")}if((this.settings.delay<=0&&!this.settings.showProgressbar)||!this.settings.showProgressbar){this.$ele.find('[data-notify="progressbar"]').remove()}},setIcon:function(){if(this.settings.icon_type.toLowerCase()=="class"){this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon)}else{if(this.$ele.find('[data-notify="icon"]').is("img")){this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon)}else{this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')}}},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var j=this,a=this.settings.offset.y,i={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:(this.settings.element==="body"?"fixed":"absolute"),transition:"all .5s ease-in-out",zIndex:this.settings.z_index},b=false,c=this.settings;d('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return a=Math.max(a,parseInt(d(this).css(c.placement.from))+parseInt(d(this).outerHeight())+parseInt(c.spacing))});if(this.settings.newest_on_top==true){a=this.settings.offset.y}i[this.settings.placement.from]=a+"px";switch(this.settings.placement.align){case"left":case"right":i[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":i.left=0;i.right=0;break}this.$ele.css(i).addClass(this.settings.animate.enter);d.each(Array("webkit-","moz-","o-","ms-",""),function(h,g){j.$ele[0].style[g+"AnimationIterationCount"]=1});d(this.settings.element).append(this.$ele);if(this.settings.newest_on_top==true){a=(parseInt(a)+parseInt(this.settings.spacing))+this.$ele.outerHeight();this.reposition(a)}if(d.isFunction(j.settings.onShow)){j.settings.onShow.call(this.$ele)}this.$ele.one(this.animations.start,function(g){b=true}).one(this.animations.end,function(g){if(d.isFunction(j.settings.onShown)){j.settings.onShown.call(this)}});setTimeout(function(){if(!b){if(d.isFunction(j.settings.onShown)){j.settings.onShown.call(this)}}},600)},bind:function(){var b=this;this.$ele.find('[data-notify="dismiss"]').on("click",function(){b.close()});this.$ele.mouseover(function(c){d(this).data("data-hover","true")}).mouseout(function(c){d(this).data("data-hover","false")});this.$ele.data("data-hover","false");if(this.settings.delay>0){b.$ele.data("notify-delay",b.settings.delay);var a=setInterval(function(){var h=parseInt(b.$ele.data("notify-delay"))-b.settings.timer;if((b.$ele.data("data-hover")==="false"&&b.settings.mouse_over=="pause")||b.settings.mouse_over!="pause"){var c=((b.settings.delay-h)/b.settings.delay)*100;b.$ele.data("notify-delay",h);b.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",c).css("width",c+"%")}if(h<=-(b.settings.timer)){clearInterval(a);b.close()}},b.settings.timer)}},close:function(){var h=this,c=null,a=parseInt(this.$ele.css(this.settings.placement.from)),b=false;this.$ele.data("closing","true").addClass(this.settings.animate.exit);h.reposition(a);if(d.isFunction(h.settings.onClose)){h.settings.onClose.call(this.$ele)}this.$ele.one(this.animations.start,function(g){b=true}).one(this.animations.end,function(g){d(this).remove();if(d.isFunction(h.settings.onClosed)){h.settings.onClosed.call(this)}});setTimeout(function(){if(!b){h.$ele.remove();if(h.settings.onClosed){h.settings.onClosed(h.$ele)}}},600)},reposition:function(a){var h=this,b='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',c=this.$ele.nextAll(b);if(this.settings.newest_on_top==true){c=this.$ele.prevAll(b)}c.each(function(){d(this).css(h.settings.placement.from,a);a=(parseInt(a)+parseInt(h.settings.spacing))+d(this).outerHeight()})}});d.notify=function(a,c){var b=new e(this,a,c);return b.notify};d.notifyDefaults=function(a){f=d.extend(true,{},f,a);return f};d.notifyClose=function(a){if(typeof a==="undefined"||a=="all"){d("[data-notify]").find('[data-notify="dismiss"]').trigger("click")}else{d('[data-notify-position="'+a+'"]').find('[data-notify="dismiss"]').trigger("click")}}}));