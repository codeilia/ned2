angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function b(a,d){if(!d){return undefined}if(angular.isFunction(a.$parent[d])){return a.$parent[d]}return function(c){return c[d]}}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:false,link:function(e,f,a){$(function(){if(!angular.isArray(e.model)){e.model=[]}var l=$("select",f);var d=a.typeaheadSource?a.typeaheadSource.split("."):null;var c=d?(d.length>1?e.$parent[d[0]][d[1]]:e.$parent[d[0]]):null;l.tagsinput(e.$parent[a.options||""]||{typeahead:{source:angular.isFunction(c)?c:null},itemValue:b(e,a.itemvalue),itemText:b(e,a.itemtext),confirmKeys:b(e,a.confirmkeys)?JSON.parse(a.confirmkeys):[13],tagClass:angular.isFunction(e.$parent[a.tagclass])?e.$parent[a.tagclass]:function(g){return a.tagclass}});for(var k=0;k<e.model.length;k++){l.tagsinput("add",e.model[k])}l.on("itemAdded",function(g){if(e.model.indexOf(g.item)===-1){e.model.push(g.item)}});l.on("itemRemoved",function(g){var h=e.model.indexOf(g.item);if(h!==-1){e.model.splice(h,1)}});var i=e.model.slice();e.$watch("model",function(){var h=e.model.filter(function(m){return i.indexOf(m)===-1}),g=i.filter(function(m){return e.model.indexOf(m)===-1}),j;i=e.model.slice();for(j=0;j<g.length;j++){l.tagsinput("remove",g[j])}l.tagsinput("refresh");for(j=0;j<h.length;j++){l.tagsinput("add",h[j])}},true)})}}}]);