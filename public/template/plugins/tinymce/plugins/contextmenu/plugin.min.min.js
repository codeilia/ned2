tinymce.PluginManager.add("contextmenu",function(d){var f,e=d.settings.contextmenu_never_use_native;d.on("contextmenu",function(b){var i,c=d.getDoc();if(b.ctrlKey&&!e){return}b.preventDefault();if(tinymce.Env.mac&&tinymce.Env.webkit){if(b.button==2&&c.caretRangeFromPoint){d.selection.setRng(c.caretRangeFromPoint(b.x,b.y))}}i=d.settings.contextmenu||"link image inserttable | cell row column deletetable";if(!f){var m=[];tinymce.each(i.split(/[ ,]/),function(h){var g=d.menuItems[h];if(h=="|"){g={text:h}}if(g){g.shortcut="";m.push(g)}});for(var l=0;l<m.length;l++){if(m[l].text=="|"){if(l===0||l==m.length-1){m.splice(l,1)}}}f=new tinymce.ui.Menu({items:m,context:"contextmenu",classes:"contextmenu"}).renderTo();d.on("remove",function(){f.remove();f=null})}else{f.show()}var a={x:b.pageX,y:b.pageY};if(!d.inline){a=tinymce.DOM.getPos(d.getContentAreaContainer());a.x+=b.clientX;a.y+=b.clientY}f.moveTo(a.x,a.y)})});