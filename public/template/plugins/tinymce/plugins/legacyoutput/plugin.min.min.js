(function(b){b.PluginManager.add("legacyoutput",function(f,a,e){f.settings.inline_styles=false;f.on("init",function(){var h="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",c=b.explode(f.settings.font_size_style_values),d=f.schema;f.formatter.register({alignleft:{selector:h,attributes:{align:"left"}},aligncenter:{selector:h,attributes:{align:"center"}},alignright:{selector:h,attributes:{align:"right"}},alignjustify:{selector:h,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:true}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:true}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(g){return b.inArray(c,g.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});b.each("b,i,u,strike".split(","),function(g){d.addValidElements(g+"[*]")});if(!d.getElementRule("font")){d.addValidElements("font[face|size|color|style]")}b.each(h.split(","),function(j){var g=d.getElementRule(j);if(g){if(!g.attributes.align){g.attributes.align={};g.attributesOrder.push("align")}}})});f.addButton("fontsizeselect",function(){var h=[],c="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";var d=f.settings.fontsize_formats||c;f.$.each(d.split(" "),function(o,n){var g=n,i=n;var p=n.split("=");if(p.length>1){g=p[0];i=p[1]}h.push({text:g,value:i})});return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:h,fixedWidth:true,onPostRender:function(){var g=this;f.on("NodeChange",function(){var j;j=f.dom.getParent(f.selection.getNode(),"font");if(j){g.value(j.size)}else{g.value("")}})},onclick:function(g){if(g.control.settings.value){f.execCommand("FontSize",false,g.control.settings.value)}}}});f.addButton("fontselect",function(){function j(h){h=h.replace(/;$/,"").split(";");var g=h.length;while(g--){h[g]=h[g].split("=")}return h}var d="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats";var i=[],c=j(f.settings.font_formats||d);e.each(c,function(g,h){i.push({text:{raw:h[0]},value:h[1],textStyle:h[1].indexOf("dings")==-1?"font-family:"+h[1]:""})});return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:i,fixedWidth:true,onPostRender:function(){var g=this;f.on("NodeChange",function(){var h;h=f.dom.getParent(f.selection.getNode(),"font");if(h){g.value(h.face)}else{g.value("")}})},onselect:function(g){if(g.control.settings.value){f.execCommand("FontName",false,g.control.settings.value)}}}})})})(tinymce);