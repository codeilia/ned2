(function(i,l){var o={};function p(a,e){var b,d=[];for(var c=0;c<a.length;++c){b=o[a[c]]||n(a[c]);if(!b){throw"module definition dependecy not found: "+a[c]}d.push(b)}e.apply(null,d)}function k(a,b,c){if(typeof a!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(b===l){throw"invalid module definition, dependencies must be specified"}if(c===l){throw"invalid module definition, definition function must be specified"}p(b,function(){o[a]=c.apply(null,arguments)})}function m(a){return !!o[a]}function n(a){var c=i;var d=a.split(/[.\/]/);for(var b=0;b<d.length;++b){if(!c[d[b]]){return}c=c[d[b]]}return c}function j(b){var c,g,e,d,a;for(c=0;c<b.length;c++){g=i;e=b[c];d=e.split(/[.\/]/);for(var f=0;f<d.length-1;++f){if(g[d[f]]===l){g[d[f]]={}}g=g[d[f]]}g[d[d.length-1]]=o[e]}if(i.AMDLC_TESTS){a=i.privateModules||{};for(e in o){a[e]=o[e]}for(c=0;c<b.length;c++){delete a[b[c]]}i.privateModules=a}}k("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,f,b){function c(h,r){e.each(r,function(q){if(q.constructor==RegExp){h=h.replace(q,"")}else{h=h.replace(q[0],q[1])}});return h}function a(A){var y=new b(),h=new f({},y),x="";var B=y.getShortEndedElements();var C=e.makeMap("script noscript style textarea video audio iframe object"," ");var z=y.getBlockElements();function D(r){var q=r.name,s=r;if(q==="br"){x+="\n";return}if(B[q]){x+=" "}if(C[q]){x+=" ";return}if(r.type==3){x+=r.value}if(!r.shortEnded){if((r=r.firstChild)){do{D(r)}while((r=r.next))}}if(z[q]&&s.next){x+="\n";if(q=="p"){x+="\n"}}}A=c(A,[/<!\[[^\]]+\]>/g]);D(h.parse(A));return x}function d(r){function h(q,u,v){if(!u&&!v){return" "}return"\u00a0"}r=c(r,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,h],/<br class="Apple-interchange-newline">/g,/<br>$/i]);return r}function g(h){var r=0;return function(){return h+(r++)}}return{filter:c,innerText:a,trimHtml:d,createIdGenerator:g}});k("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(f){var d=function(q){return/^https?:\/\/[\w\?\-\/+=.&%]+$/i.test(q)};var c=function(q){return d(q)&&/.(gif|jpe?g|png)$/.test(q)};var g=function(q,r,v){q.undoManager.extra(function(){v(q,r)},function(){q.insertContent('<img src="'+r+'">')});return true};var e=function(q,r,v){q.undoManager.extra(function(){v(q,r)},function(){q.execCommand("mceInsertLink",false,r)});return true};var b=function(q,r,v){return q.selection.isCollapsed()===false&&d(r)?e(q,r,v):false};var a=function(q,r,v){return c(r)?g(q,r,v):false};var h=function(q,r){q.insertContent(r,{merge:q.settings.paste_merge_formats!==false,paste:true});return true};var s=function(q,r){f.each([b,a,h],function(v){return v(q,r,h)!==true})};var t=function(q,r){if(q.settings.smart_paste===false){h(q,r)}else{s(q,r)}};return{isImageUrl:c,isAbsoluteUrl:d,insertContent:t}});k("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(e,c,a,b,d,f){return function(aa){var ac=this,ai,R,ak=0,T=false;var Y="%MCEPASTEBIN%",Q;var W="data:text/mce-internal,";var S=b.createIdGenerator("mceclip");function X(r){var s,q=aa.dom;s=aa.fire("BeforePastePreProcess",{content:r});s=aa.fire("PastePreProcess",s);r=s.content;if(!s.isDefaultPrevented()){if(aa.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()){var t=q.add(aa.getBody(),"div",{style:"display:none"},r);s=aa.fire("PastePostProcess",{node:t});q.remove(t);r=s.node.innerHTML}if(!s.isDefaultPrevented()){d.insertContent(aa,r)}}}function V(q){q=aa.dom.encode(q).replace(/\r\n/g,"\n");var s=aa.dom.getParent(aa.selection.getStart(),aa.dom.isBlock);var t=aa.settings.forced_root_block;var r;if(t){r=aa.dom.createHTML(t,aa.settings.forced_root_block_attrs);r=r.substr(0,r.length-3)+">"}if((s&&/^(PRE|DIV)$/.test(s.nodeName))||!t){q=b.filter(q,[[/\n/g,"<br>"]])}else{q=b.filter(q,[[/\n\n/g,"</p>"+r],[/^(.*<\/p>)(<p>)$/,r+"$1"],[/\n/g,"<br />"]]);if(q.indexOf("<p>")!=-1){q=r+q}}X(q)}function U(){var w=aa.dom,v=aa.getBody();var u=aa.dom.getViewPort(aa.getWin()),x=u.y,s=20;var q;R=aa.selection.getRng();if(aa.inline){q=aa.selection.getScrollContainer();if(q&&q.scrollTop>0){x=q.scrollTop}}function t(C){var B,z,A,D=C.startContainer;B=C.getClientRects();if(B.length){return B[0]}if(!C.collapsed||D.nodeType!=1){return}A=D.childNodes[R.startOffset];while(A&&A.nodeType==3&&!A.data.length){A=A.nextSibling}if(!A){return}if(A.tagName=="BR"){z=w.doc.createTextNode("\uFEFF");A.parentNode.insertBefore(z,A);C=w.createRng();C.setStartBefore(z);C.setEndAfter(z);B=C.getClientRects();w.remove(z)}if(B.length){return B[0]}}if(R.getClientRects){var r=t(R);if(r){s=x+(r.top-w.getPos(v).y)}else{s=x;var y=R.startContainer;if(y){if(y.nodeType==3&&y.parentNode!=v){y=y.parentNode}if(y.nodeType==1){s=w.getPos(y,q||v).y}}}}ai=w.add(aa.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},Y);if(e.ie||e.gecko){w.setStyle(ai,"left",w.getStyle(v,"direction",true)=="rtl"?65535:-65535)}w.bind(ai,"beforedeactivate focusin focusout",function(z){z.stopPropagation()});ai.focus();aa.selection.select(ai,true)}function g(){if(ai){var q;while((q=aa.dom.get("mcepastebin"))){aa.dom.remove(q);aa.dom.unbind(q)}if(R){aa.selection.setRng(R)}}ai=R=null}function h(){var r="",t,s,q,u;t=aa.dom.select("div[id=mcepastebin]");for(s=0;s<t.length;s++){q=t[s];if(q.firstChild&&q.firstChild.id=="mcepastebin"){q=q.firstChild}u=q.innerHTML;if(r!=Y){r+=u}}return r}function ah(s){var u={};if(s){if(s.getData){var q=s.getData("Text");if(q&&q.length>0){if(q.indexOf(W)==-1){u["text/plain"]=q}}}if(s.types){for(var t=0;t<s.types.length;t++){var r=s.types[t];u[r]=s.getData(r)}}}return u}function ag(q){return ah(q.clipboardData||aa.getDoc().dataTransfer)}function am(q){return ad(q,"text/html")||ad(q,"text/plain")}function ae(q){var r;r=q.indexOf(",");if(r!==-1){return q.substr(r+1)}return null}function al(r,q){return r.images_dataimg_filter?r.images_dataimg_filter(q):true}function ab(w,s,x){if(w){aa.selection.setRng(w);w=null}var q=s.result;var r=ae(q);var t=new Image();t.src=q;if(al(aa.settings,t)){var u=aa.editorUpload.blobCache;var y,v;v=u.findFirst(function(z){return z.base64()===r});if(!v){y=u.create(S(),x,r);u.add(y)}else{y=v}X('<img src="'+y.blobUri()+'">')}else{X('<img src="'+q+'">')}}function aj(q,s){var r=q.clipboardData||q.dataTransfer;function t(v){var u,z,x,y=false;if(v){for(u=0;u<v.length;u++){z=v[u];if(/^image\/(jpeg|png|gif|bmp)$/.test(z.type)){var w=z.getAsFile?z.getAsFile():z;x=new FileReader();x.onload=ab.bind(null,s,x,w);x.readAsDataURL(w);q.preventDefault();y=true}}}return y}if(aa.settings.paste_data_images&&r){return t(r.items)||t(r.files)}}function Z(r){var q=r.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&q&&q.items&&q.items.length===0}function an(q){return c.getCaretRangeFromPoint(q.clientX,q.clientY,aa.getDoc())}function ad(r,q){return q in r&&r[q].length>0}function P(q){return(a.metaKeyPressed(q)&&q.keyCode==86)||(q.shiftKey&&q.keyCode==45)}function af(){aa.on("keydown",function(u){function t(v){if(P(v)&&!v.isDefaultPrevented()){g()}}if(P(u)&&!u.isDefaultPrevented()){Q=u.shiftKey&&u.keyCode==86;if(Q&&e.webkit&&navigator.userAgent.indexOf("Version/")!=-1){return}u.stopImmediatePropagation();ak=new Date().getTime();if(e.ie&&Q){u.preventDefault();aa.fire("paste",{ieFake:true});return}g();U();aa.once("keyup",t);aa.once("paste",function(){aa.off("keyup",t)})}});function q(t,w,v){var u;if(ad(t,"text/html")){u=t["text/html"]}else{u=h();if(u==Y){v=true}}u=b.trimHtml(u);if(ai&&ai.firstChild&&ai.firstChild.id==="mcepastebin"){v=true}g();if(!u.length){v=true}if(v){if(ad(t,"text/plain")&&u.indexOf("</p>")==-1){u=t["text/plain"]}else{u=b.innerText(u)}}if(u==Y){if(!w){aa.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")}return}if(v){V(u)}else{X(u)}}var s=function(){return R||aa.selection.getRng()};aa.on("paste",function(t){var y=new Date().getTime();var u=ag(t);var w=new Date().getTime()-y;var x=(new Date().getTime()-ak-w)<1000;var v=ac.pasteFormat=="text"||Q;Q=false;if(t.isDefaultPrevented()||Z(t)){g();return}if(!am(u)&&aj(t,s())){g();return}if(!x){t.preventDefault()}if(e.ie&&(!x||t.ieFake)){U();aa.dom.bind(ai,"paste",function(z){z.stopPropagation()});aa.getDoc().execCommand("Paste",false,null);u["text/html"]=h()}if(ad(u,"text/html")){t.preventDefault();q(u,x,v)}else{f.setEditorTimeout(aa,function(){q(u,x,v)},0)}});aa.on("dragstart dragend",function(t){T=t.type=="dragstart"});function r(t){return t["text/plain"].indexOf("file://")===0}aa.on("drop",function(t){var v,w;w=an(t);if(t.isDefaultPrevented()||T){return}v=ah(t.dataTransfer);if((!am(v)||r(v))&&aj(t,w)){return}if(w&&aa.settings.paste_filter_drop!==false){var u=v["mce-internal"]||v["text/html"]||v["text/plain"];if(u){t.preventDefault();f.setEditorTimeout(aa,function(){aa.undoManager.transact(function(){if(v["mce-internal"]){aa.execCommand("Delete")}aa.selection.setRng(w);u=b.trimHtml(u);if(!v["text/html"]){V(u)}else{X(u)}})})}}});aa.on("dragover dragend",function(t){if(aa.settings.paste_data_images){t.preventDefault()}})}ac.pasteHtml=X;ac.pasteText=V;ac.pasteImageData=aj;aa.on("preInit",function(){af();aa.parser.addNodeFilter("img",function(w,x,r){function q(z){return z.data&&z.data.paste===true}function s(z){if(!z.attr("data-mce-object")&&y!==e.transparentSrc){z.remove()}}function v(z){return z.indexOf("webkit-fake-url")===0}function u(z){return z.indexOf("data:")===0}if(!aa.settings.paste_data_images&&q(r)){var t=w.length;while(t--){var y=w[t].attributes.map.src;if(!y){continue}if(v(y)){s(w[t])}else{if(!aa.settings.allow_html_data_urls&&u(y)){s(w[t])}}}}})})}});k("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(t,a,g,e,f,h){function b(q){return((/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i).test(q)||(/class="OutlineElement/).test(q)||(/id="?docs\-internal\-guid\-/.test(q)))}function s(q){var r,v;v=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];q=q.replace(/^[\u00a0 ]+/,"");t.each(v,function(u){if(u.test(q)){r=true;return false}});return r}function d(q){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(q)}function c(q){var r=q.settings;q.on("BeforePastePreProcess",function(H){var F=H.content,G,K;F=F.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"");F=F.replace(/<br class="?Apple-interchange-newline"?>/gi,"");G=r.paste_retain_style_properties;if(G){K=t.makeMap(G.split(/[, ]/))}function I(B){var S,v,U=1;function w(O){var P="";if(O.type===3){return O.value}if((O=O.firstChild)){do{P+=w(O)}while((O=O.next))}return P}function y(O,P){if(O.type===3){if(P.test(O.value)){O.value=O.value.replace(P,"");return false}}if((O=O.firstChild)){do{if(!y(O,P)){return false}}while((O=O.next))}return true}function C(O){if(O._listIgnore){O.remove();return}if((O=O.firstChild)){do{C(O)}while((O=O.next))}}function u(R,Q,O){var P=R._listLevel||U;if(P!=U){if(P<U){if(S){S=S.parent.parent}}else{v=S;S=null}}if(!S||S.name!=Q){v=v||S;S=new f(Q,1);if(O>1){S.attr("start",""+O)}R.wrap(S)}else{S.append(R)}R.name="li";if(P>U&&v){v.lastChild.append(S)}U=P;C(R);y(R,/^\u00a0+/);y(R,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);y(R,/^\u00a0+/)}var V=[],D=B.firstChild;while(typeof D!=="undefined"&&D!==null){V.push(D);D=D.walk();if(D!==null){while(typeof D!=="undefined"&&D.parent!==B){D=D.walk()}}}for(var A=0;A<V.length;A++){B=V[A];if(B.name=="p"&&B.firstChild){var x=w(B);if(d(x)){u(B,"ul");continue}if(s(x)){var z=/([0-9]+)\./.exec(x);var T=1;if(z){T=parseInt(z[1],10)}u(B,"ol",T);continue}if(B._listLevel){u(B,"ul",1);continue}S=null}else{v=S;S=null}}}function N(w,y){var u={},v,x=q.dom.parseStyle(y);t.each(x,function(z,A){switch(A){case"mso-list":v=/\w+ \w+([0-9]+)/i.exec(y);if(v){w._listLevel=parseInt(v[1],10)}if(/Ignore/i.test(z)&&w.firstChild){w._listIgnore=true;w.firstChild._listIgnore=true}break;case"horiz-align":A="text-align";break;case"vert-align":A="vertical-align";break;case"font-color":case"mso-foreground":A="color";break;case"mso-background":case"mso-highlight":A="background";break;case"font-weight":case"font-style":if(z!="normal"){u[A]=z}return;case"mso-element":if(/^(comment|comment-list)$/i.test(z)){w.remove();return}break}if(A.indexOf("mso-comment")===0){w.remove();return}if(A.indexOf("mso-")===0){return}if(G=="all"||(K&&K[A])){u[A]=z}});if(/(bold)/i.test(u["font-weight"])){delete u["font-weight"];w.wrap(new f("b",1))}if(/(italic)/i.test(u["font-style"])){delete u["font-style"];w.wrap(new f("i",1))}u=q.dom.serializeStyle(u,w.name);if(u){return u}return null}if(r.paste_enable_default_filters===false){return}if(b(H.content)){H.wordContent=true;F=h.filter(F,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(u,v){return(v.length>0)?v.replace(/./," ").slice(Math.floor(v.length/2)).split("").join("\u00a0"):""}]]);var M=r.paste_word_valid_elements;if(!M){M=("-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}var J=new g({valid_elements:M,valid_children:"-li[p]"});t.each(J.elements,function(u){if(!u.attributes["class"]){u.attributes["class"]={};u.attributesOrder.push("class")}if(!u.attributes.style){u.attributes.style={};u.attributesOrder.push("style")}});var E=new a({},J);E.addAttributeFilter("style",function(w){var v=w.length,u;while(v--){u=w[v];u.attr("style",N(u,u.attr("style")));if(u.name=="span"&&u.parent&&!u.attributes.length){u.unwrap()}}});E.addAttributeFilter("class",function(x){var w=x.length,u,v;while(w--){u=x[w];v=u.attr("class");if(/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(v)){u.remove()}u.attr("class",null)}});E.addNodeFilter("del",function(v){var u=v.length;while(u--){v[u].remove()}});E.addNodeFilter("a",function(x){var v=x.length,u,y,w;while(v--){u=x[v];y=u.attr("href");w=u.attr("name");if(y&&y.indexOf("#_msocom_")!=-1){u.remove();continue}if(y&&y.indexOf("file://")===0){y=y.split("#")[1];if(y){y="#"+y}}if(!y&&!w){u.unwrap()}else{if(w&&!/^_?(?:toc|edn|ftn)/i.test(w)){u.unwrap();continue}u.attr({href:y,name:w})}}});var L=E.parse(F);if(r.paste_convert_word_fake_lists!==false){I(L)}H.content=new e({validate:r.validate},J).serialize(L)}})}c.isWordContent=b;return c});k("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(d,c,a,b){return function(g){function f(r){g.on("BeforePastePreProcess",function(q){q.content=r(q.content)})}function h(v){if(!a.isWordContent(v)){return v}var u=[];c.each(g.schema.getBlockElements(),function(q,r){u.push(r)});var t=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+u.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");v=b.filter(v,[[t,"$1"]]);v=b.filter(v,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return v}function e(v){if(a.isWordContent(v)){return v}var x=g.settings.paste_webkit_styles;if(g.settings.paste_remove_styles_if_webkit===false||x=="all"){return v}if(x){x=x.split(/[, ]/)}if(x){var u=g.dom,w=g.selection.getNode();v=v.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(r,t,s,H){var G=u.parseStyle(s,"span"),D={};if(x==="none"){return t+H}for(var E=0;E<x.length;E++){var F=G[x[E]],q=u.getStyle(w,x[E],true);if(/color/.test(x[E])){F=u.toHex(F);q=u.toHex(q)}if(q!=F){D[x[E]]=F}}D=u.serializeStyle(D,"span");if(D){return t+' style="'+D+'"'+H}return t+H})}else{v=v.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}v=v.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(t,r,s,q){return r+' style="'+s+'"'+q});return v}if(d.webkit){f(e)}if(d.ie){f(h)}}});k("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,a,b,d){var c;e.add("paste",function(g){var t=this,f,h=g.settings;function u(){return c||g.settings.paste_plaintext_inform===false}function v(){if(f.pasteFormat=="text"){this.active(false);f.pasteFormat="html";g.fire("PastePlainTextToggle",{state:false})}else{f.pasteFormat="text";this.active(true);if(!u()){var q=g.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");g.notificationManager.open({text:q,type:"info"});c=true;g.fire("PastePlainTextToggle",{state:true})}}g.focus()}t.clipboard=f=new a(g);t.quirks=new d(g);t.wordFilter=new b(g);if(g.settings.paste_as_text){t.clipboard.pasteFormat="text"}if(h.paste_preprocess){g.on("PastePreProcess",function(q){h.paste_preprocess.call(t,t,q)})}if(h.paste_postprocess){g.on("PastePostProcess",function(q){h.paste_postprocess.call(t,t,q)})}g.addCommand("mceInsertClipboardContent",function(q,r){if(r.content){t.clipboard.pasteHtml(r.content)}if(r.text){t.clipboard.pasteText(r.text)}});if(g.settings.paste_block_drop){g.on("dragend dragover draggesture dragdrop drop drag",function(q){q.preventDefault();q.stopPropagation()})}if(!g.settings.paste_data_images){g.on("drop",function(q){var r=q.dataTransfer;if(r&&r.files&&r.files.length>0){q.preventDefault()}})}g.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:v,active:t.clipboard.pasteFormat=="text"});g.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:f.pasteFormat,onclick:v})})});j(["tinymce/pasteplugin/Utils"])})(this);