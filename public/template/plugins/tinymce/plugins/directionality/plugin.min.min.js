tinymce.PluginManager.add("directionality",function(d){function e(h){var a=d.dom,b,c=d.selection.getSelectedBlocks();if(c.length){b=a.getAttrib(c[0],"dir");tinymce.each(c,function(g){if(!a.getParent(g.parentNode,"*[dir='"+h+"']",a.getRoot())){if(b!=h){a.setAttrib(g,"dir",h)}else{a.setAttrib(g,"dir",null)}}});d.nodeChanged()}}function f(a){var b=[];tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(c){b.push(c+"[dir="+a+"]")});return b.join(",")}d.addCommand("mceDirectionLTR",function(){e("ltr")});d.addCommand("mceDirectionRTL",function(){e("rtl")});d.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:f("ltr")});d.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:f("rtl")})});