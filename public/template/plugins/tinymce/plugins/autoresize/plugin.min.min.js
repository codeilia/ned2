tinymce.PluginManager.add("autoresize",function(k){var l=k.settings,j=0;function g(){return k.plugins.fullscreen&&k.plugins.fullscreen.isFullscreen()}if(k.settings.inline){return}function h(d){var u,b,e,a,A=tinymce.DOM,w,y,z,f,B,x,v,c;b=k.getDoc();if(!b){return}e=b.body;a=b.documentElement;w=l.autoresize_min_height;if(!e||(d&&d.type==="setcontent"&&d.initial)||g()){if(e&&a){e.style.overflowY="auto";a.style.overflowY="auto"}return}z=k.dom.getStyle(e,"margin-top",true);f=k.dom.getStyle(e,"margin-bottom",true);B=k.dom.getStyle(e,"padding-top",true);x=k.dom.getStyle(e,"padding-bottom",true);v=k.dom.getStyle(e,"border-top-width",true);c=k.dom.getStyle(e,"border-bottom-width",true);y=e.offsetHeight+parseInt(z,10)+parseInt(f,10)+parseInt(B,10)+parseInt(x,10)+parseInt(v,10)+parseInt(c,10);if(isNaN(y)||y<=0){y=tinymce.Env.ie?e.scrollHeight:(tinymce.Env.webkit&&e.clientHeight===0?0:e.offsetHeight)}if(y>l.autoresize_min_height){w=y}if(l.autoresize_max_height&&y>l.autoresize_max_height){w=l.autoresize_max_height;e.style.overflowY="auto";a.style.overflowY="auto"}else{e.style.overflowY="hidden";a.style.overflowY="hidden";e.scrollTop=0}if(w!==j){u=w-j;A.setStyle(k.iframeElement,"height",w+"px");j=w;if(tinymce.isWebKit&&u<0){h(d)}}}function i(b,c,a){tinymce.util.Delay.setEditorTimeout(k,function(){h({});if(b--){i(b,c,a)}else{if(a){a()}}},c)}l.autoresize_min_height=parseInt(k.getParam("autoresize_min_height",k.getElement().offsetHeight),10);l.autoresize_max_height=parseInt(k.getParam("autoresize_max_height",0),10);k.on("init",function(){var a,b;a=k.getParam("autoresize_overflow_padding",1);b=k.getParam("autoresize_bottom_margin",50);if(a!==false){k.dom.setStyles(k.getBody(),{paddingLeft:a,paddingRight:a})}if(b!==false){k.dom.setStyles(k.getBody(),{paddingBottom:b})}});k.on("nodechange setcontent keyup FullscreenStateChanged",h);if(k.getParam("autoresize_on_init",true)){k.on("init",function(){i(20,100,function(){i(5,1000)})})}k.addCommand("mceAutoResize",h)});