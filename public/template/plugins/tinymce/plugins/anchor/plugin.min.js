tinymce.PluginManager.add("anchor",function(b){function a(){var e=b.selection.getNode(),d="";var c=e.tagName=="A"&&b.dom.getAttrib(e,"href")==="";if(c){d=e.name||e.id||""}b.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:d},onsubmit:function(f){var g=f.data.name;if(c){e.id=g}else{b.selection.collapse(true);b.execCommand("mceInsertContent",false,b.dom.createHTML("a",{id:g}))}}})}b.addCommand("mceAnchor",a);b.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:a,stateSelector:"a:not([href])"});b.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:a})});