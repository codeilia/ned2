(function(){CKEDITOR.plugins.add("embedsemantic",{icons:"embedsemantic",hidpi:!0,requires:"embedbase",onLoad:function(){this.registerOembedTag()},init:function(e){var c=CKEDITOR.plugins.embedBase.createWidgetBaseDefinition(e),f=c.init;CKEDITOR.tools.extend(c,{dialog:"embedBase",button:e.lang.embedbase.button,allowedContent:"oembed",requiredContent:"oembed",styleableElements:"oembed",providerUrl:new CKEDITOR.template(e.config.embed_provider||"//ckeditor.iframe.ly/api/oembed?url\x3d{url}\x26callback\x3d{callback}"),init:function(){var a=this;f.call(this);this.once("ready",function(){this.data.loadOnReady&&this.loadContent(this.data.url,{callback:function(){a.setData("loadOnReady",!1);e.fire("updateSnapshot")}})})},upcast:function(g,d){if("oembed"==g.name){var h=g.children[0];if(h&&h.type==CKEDITOR.NODE_TEXT&&h.value){return d.url=h.value,d.loadOnReady=!0,h=new CKEDITOR.htmlParser.element("div"),g.replaceWith(h),h.attributes["class"]=g.attributes["class"],h}}},downcast:function(g){var d=new CKEDITOR.htmlParser.element("oembed");d.add(new CKEDITOR.htmlParser.text(this.data.url));g.attributes["class"]&&(d.attributes["class"]=g.attributes["class"]);return d}},!0);e.widgets.add("embedSemantic",c)},registerOembedTag:function(){var d=CKEDITOR.dtd,c;d.oembed={"#":1};for(c in d){d[c].div&&(d[c].oembed=1)}}})})();